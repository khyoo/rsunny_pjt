<!DOCTYPE HTML>
<html lang="ko">

<head>
	<th:block th:replace="layout/fragments/front/head :: headFragment"></th:block>
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">

	<script type="text/javascript"
		src="//dapi.kakao.com/v2/maps/sdk.js?appkey=565d4d316c7e529f3ad7bd8265a31214&libraries=services,clusterer,drawing"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EHV3KH3XT"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-6EHV3KH3XT');
	</script>
	<script th:inline="javascript">
		var EXTERNAL_LINK_URL = null;

		// 천단위 콤마
		function numComma(val) {
			return val != null ? val.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") : 0;
		}
		
		

		
		let _roadviewMarker = null;
		
		let polygon = null;
		let realTradingOverlayClick = [false, false, false, false, false]; 	//실거래가 오버레이 팝업 클릭 배열
		
		$(document).ready(function () {
			
			$('a.search_lp').click(function () {
				if ($('#wy').val() == '') {
					$('#wy').attr('placeholder', '주소지를 입력하세요.');
					return;
				}
				
				if ($('#wt').val() == '1') {
					location.href = '/02la01?t=r&init=jibun&keyword=' + $('#wy').val();
				} else {
					location.href = '/02la01?t=r&init=none&keyword=' + $('#wy').val();
				}												
			});
			
			$('#wy').keyup(function () {
				if (event.keyCode == 13) $('a.search_lp').trigger('click');
			});
			
			$( "#searchSido" ).selectmenu({
				  change: function( event, ui ) {console.log(ui.item.label);
					  $.get('/forsale/rest/addr/getSigungu?sido=' + ui.item.label, {}, function (data) {									
							//console.log(data);
			
							$('#searchSigungu option').remove();
							
							$('#searchEmd option').remove();
							$('#searchEmd').append('<option value="0">읍·면·동</option>').selectmenu('refresh');
													
							let options = [];	
							options.push('<option value="0">시·군·구</option>');	
							if (data.length > 0) {
								data.forEach((item, idx) => {
									options.push("<option value='" + (idx+1) + "'>" + item.sigungu + "</option>");															
								});
							}				
							$('#searchSigungu').append(options.join("")).selectmenu('refresh');						
						});
				  }
				});
				
				$( "#searchSigungu" ).selectmenu({
				  change: function( event, ui ) {//console.log(ui.item.label);
					  $.get('/forsale/rest/addr/getEmd?sido=' + $('#searchSido').find(':selected').text() + '&sigungu=' + ui.item.label, {}, function (data) {									
							//console.log(data);
			
							$('#searchEmd option').remove();
		
							let options = [];
							options.push('<option value="0">읍·면·동</option>');
							if (data.length > 0) {
								data.forEach((item, idx) => {
									options.push("<option value='" + (idx+1) + "'>" + item.emd + "</option>");													
								});
							}												
							$('#searchEmd').append(options.join("")).selectmenu('refresh');							
						});
				  }
				});
							
			$("#slider-range").slider({
				range: true,
				min: 2015,
				max: 2023,
				values: [2022, 2023],
				slide: function (event, ui) {
					//console.log(ui.values[0]);
					$("#tradeYear").text(ui.values[0]);
					$("#tradeYearEnd").text(ui.values[1]);

					dealYearStart = ui.values[0];
					dealYearEnd = ui.values[1];

					removeRealTrading();
					getRealTrading();
				}
			});
			
			$('#searchSido').on('selectmenuchange', function() {			     
			    $.get('/forsale/rest/addr/getSigungu?sido=' + paramSido, {}, function (data) {
					$('#searchSigungu option').remove();
					
					$('#searchEmd option').remove();
					$('#searchEmd').append('<option value="0">읍·면·동</option>').selectmenu('refresh');
											
					let options = [];	
					options.push('<option value="0">시·군·구</option>');	
					if (data.length > 0) {
						data.forEach((item, idx) => {
							options.push("<option value='" + (idx+1) + "'>" + item.sigungu + "</option>");															
						});
					}				
					$('#searchSigungu').append(options.join("")).selectmenu('refresh');
					
					$( "#searchSigungu option" ).each(function() {							
						if ($(this).text() == paramSigungu) {
							$( "#searchSigungu" ).val($(this).val()).attr("selected", true);
							$( "#searchSigungu" ).selectmenu('refresh').trigger("selectmenuchange");
						}
					});
				});
			});
			
			$('#searchSigungu').on('selectmenuchange', function() {
				 $.get('/forsale/rest/addr/getEmd?sido=' + paramSido + '&sigungu=' + paramSigungu, {}, function (data) {
						$('#searchEmd option').remove();
	
						let options = [];
						options.push('<option value="0">읍·면·동</option>');
						if (data.length > 0) {
							data.forEach((item, idx) => {
								options.push("<option value='" + (idx+1) + "'>" + item.emd + "</option>");													
							});
						}												
						$('#searchEmd').append(options.join("")).selectmenu('refresh');	
						
						$( "#searchEmd option" ).each(function() {
							if ($(this).text() == paramEmd) {	
								$( "#searchEmd" ).val($(this).val()).attr("selected", true);
								$( "#searchEmd" ).selectmenu('refresh');
							}
						});
				});
			});

			$('#mo-catAreaSub2').css("background", "#1263DF");
			$('#mo-catAreaSub2').css("color", "#fff");

			$('#mo-catPriceSub2').css("background", "#1263DF");
			$('#mo-catPriceSub2').css("color", "#fff");

			Proj4js.defs["EPSG:5174"] = "+proj=tmerc +lat_0=38 +lon_0=127.0028902777778 +k=1 +x_0=200000 +y_0=500000 +ellps=bessel +units=m +no_defs +towgs84=-115.80,474.99,674.11,1.16,-2.31,-1.63,6.43";
			Proj4js.defs["EPSG:4326"] = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs";
			var s_srs = new Proj4js.Proj("EPSG:5174");
			var t_srs = new Proj4js.Proj("EPSG:4326");

			const urlParams = new URL(location.href).searchParams;

			const jibun = urlParams.get('init');
			
			const keyword = urlParams.get('keyword');
			let paramSido = urlParams.get('sido');
			let paramSigungu = urlParams.get('sigungu');
			let paramEmd = urlParams.get('emd');
			
			$( "#searchSido option" ).each(function() {
				if ($(this).text() == paramSido) {
					$( "#searchSido" ).val($(this).val()).attr("selected", true);
					$( "#searchSido" ).selectmenu('refresh').trigger("selectmenuchange");
				}
			});
			
			//console.log(keyword)
			let zIdx = 1;

			var isAuthenticated = /*[(${IS_AUTHENTICATED})]*/ false;

			var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
			let map = null;
			var clusterer = null;

			/*
			function sido_trans_full(e) {
				for (var t in dong_trans) {
					e = e.replace(t, dong_trans[t])
				}
				return sido_trans_table[e.split(" ")[0]] == undefined ? e : e.replace(e.split(" ")[0], sido_trans_table[e.split(" ")[0]])
			}
			*/

			/**  개별공시지가 차트 : START  **/
			let xLabels = [];
			let datapoints = [];
			let minValue = 0;
			let maxValue = 0;

			let gong_data = {
				labels: xLabels,
				datasets: [
					{
						data: datapoints,
						borderColor: 'rgb(153, 102, 255)',
						fill: false,
						tension: 0.4
					}
				]
			};

			const ctx = document.getElementById('mdv_chart_canvas');

			let gongChart = new Chart(ctx, {
				type: 'line',
				data: gong_data,
				options: {
					plugins: {
						legend: {
							display: false
						},
					},
					responsive: true,
					interaction: {
						intersect: false,
					},
					scales: {
						x: {
							display: true,
							title: {
								display: true
							},
							grid: {
								display: false,
							},
						},
						y: {
							display: true,
							title: {
								display: true
							},
							suggestedMin: minValue,
							suggestedMax: maxValue
						}
					}
				},
			});
			/**  개별공시지가 차트 : END  **/
			
			function getJibunDetailApi(latlng) {
				let saledtltype = $('#selSaleDetailType').val();
				let saleTrdType = 'A';
			
				$.get('https://polygon.disco.re/get_pnu_by_latlng2/?lat=' + latlng.getLat() + '&lng=' + latlng.getLng() + '&spec=goon', {}, function (pnu) {
					//console.log(pnu);
					
						// 토지대장
						$.get('https://data.disco.re/home/land_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
							//console.log(data);
							$('#land_forest_info_area').text(data.area);
							$('#land_forest_info_purpose').text(data.purpose);
							$('#p6').text(data.p6);
							$('#p10').text(data.p10);
							$('#owner_gbn').text(data.owner_gbn);
							$('#days').text(data.days);
							$('#why').text(data.why);
							$('#p16').text(data.p16);
							$('#p12').text(data.p12);
							$('#p14').text(data.p14);

							let info_main = data.land_use_planning_info_main;
							if (info_main != null && info_main.length > 0) {
								info_main = info_main.split(',');
							}

							let info_main_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
							let info_main_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
							let info_main_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

							$('#info_main_0').text(info_main_0);
							$('#info_main_1').text(info_main_1);
							$('#info_main_2').text(info_main_2);

							let info_etc = data.land_use_planning_info_etc;
							if (info_etc != null && info_etc.length > 0) {
								info_etc = info_etc.split(',');
							}

							let info_etc_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
							let info_etc_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
							let info_etc_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

							$('#arch_info_0').text(info_etc_0);
							$('#arch_info_1').text(info_etc_1);
							$('#arch_info_2').text(info_etc_2);
						});

						$.get('https://data.disco.re/home/arch_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
							//console.log(data);
							let html = '';
							if (data.overall_title_section.length > 0) {
								let build_info = data.overall_title_section[0];

								$('#dpa_overall_b1').text(build_info.b10 != null ? build_info.b10 : "-");

								$('#dpa_overall_a1').text(build_info.b32 != null ? build_info.b32 : "-");
								$('#dpa_overall_a1_1').text(build_info.b33 != null ? build_info.b33 : "-");

								$('.dpa-c-name').text(build_info.b32 != null ? build_info.b32 : "-");

								$('#dpa_overall_a2').text(build_info.b25 != null ? build_info.b25 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.b26 + '㎡</span><br><span>(건폐율 ' + build_info.b27 + '%)</span>';
								$('#dpa_overall_a3').html(html);

								$('#dpa_overall_b2').text(build_info.b28 != null ? build_info.b28 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.b29 + '㎡</span><br><span>(용적률 ' + build_info.b30 + '%)</span>';
								$('#dpa_overall_b3').html(html);

								$('#dpa_overall_c3_0').text(build_info.b34 != null ? build_info.b34 : "-");
								$('#dpa_overall_c3_1').text(build_info.b35 != null ? build_info.b35 : "-");
								$('#dpa_overall_c3_2').text(build_info.b56 != null ? build_info.b56 : "-");

								$('#dpa_overall_a5').text(build_info.b19 != null ? build_info.b19 : "-");

								$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
								$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
								$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
								$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");

								$('#dpaz_value_1').text(build_info.b44 != null ? build_info.b44 + "대" : "-");
								$('#dpaz_value_2').text(build_info.b46 != null ? build_info.b46 + "대" : "-");
								$('#dpaz_value_3').text(build_info.b40 != null ? build_info.b40 + "대" : "-");
								$('#dpaz_value_4').text(build_info.b42 != null ? build_info.b42 + "대" : "-");

								let temp_b48 = build_info.b48.substr(0, 4) + "년 " + build_info.b48.substr(4, 2) + "월 " + build_info.b48.substr(6, 2) + "일";
								$('#dpad_value1').text(build_info.b48 != null ? temp_b48 : "-");
								let temp_b49 = build_info.b49.substr(0, 4) + "년 " + build_info.b49.substr(4, 2) + "월 " + build_info.b49.substr(6, 2) + "일";
								$('#dpad_value2').text(build_info.b49 != null ? temp_b49 : "-");
								let temp_b50 = build_info.b50.substr(0, 4) + "년 " + build_info.b50.substr(4, 2) + "월 " + build_info.b50.substr(6, 2) + "일";
								$('#dpad_value3').text(build_info.b50 != null ? temp_b50 : "-");

							} else {
								//console.log(data.title_section)
								let build_info = data.title_section[0];

								$('#dpa_overall_b1').text(build_info.a23 != null ? build_info.a23 : "-");

								$('#dpa_overall_a1').text(build_info.a36 != null ? build_info.a36 : "-");
								$('#dpa_overall_a1_1').text(build_info.a37 != null ? build_info.a37 : "-");
								$('#dpa_title_b5_1').text(build_info.a33 != null ? build_info.a33 : "-");
								$('#dpa_title_b5_2').text(build_info.a39 != null ? build_info.a39 : "-");

								$('#dpa_overall_c2').text(build_info.a43 != null ? build_info.a43 + "m" : "-");
								$('#dpa_overall_c5').text(build_info.a44 != null ? build_info.a44 + "/" + build_info.a45 : "-");

								$('.dpa-c-name').text(build_info.a36 != null ? build_info.a36 : "-");

								$('#dpa_overall_a2').text(build_info.a26 != null ? build_info.a26 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.a27 + '㎡</span><br><span>(건폐율 ' + build_info.a28 + '%)</span>';
								$('#dpa_overall_a3').html(html);

								$('#dpa_overall_b2').text(build_info.a29 != null ? build_info.a29 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.a30 + '㎡</span><br><span>(용적률 ' + build_info.a31 + '%)</span>';
								$('#dpa_overall_b3').html(html);

								$('#dpa_overall_c3_0').text(build_info.a41 != null ? build_info.a41 : "-");
								$('#dpa_overall_c3_1').text(build_info.a42 != null ? build_info.a42 : "-");
								$('#dpa_overall_c3_2').text(build_info.a67 != null ? build_info.a67 : "-");

								$('#dpa_overall_a5').text(build_info.a17 != null ? build_info.a17 : "-");

								$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
								$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
								$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
								$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");

								$('#dpaz_value_1').text(build_info.a55 != null ? build_info.a55 + "대" : "-");
								$('#dpaz_value_2').text(build_info.a57 != null ? build_info.a57 + "대" : "-");
								$('#dpaz_value_3').text(build_info.a51 != null ? build_info.a51 + "대" : "-");
								$('#dpaz_value_4').text(build_info.a53 != null ? build_info.a53 + "대" : "-");

								$('#dpal_value1').text(build_info.a46 != null ? build_info.a46 : "-");
								$('#dpal_value2').text(build_info.a47 != null ? build_info.a47 : "-");

								let temp_a59 = build_info.a59.substr(0, 4) + "년 " + build_info.a59.substr(4, 2) + "월 " + build_info.a59.substr(6, 2) + "일";
								$('#dpad_value1').text(build_info.a59 != null ? temp_a59 : "-");
								let temp_a60 = build_info.a60.substr(0, 4) + "년 " + build_info.a60.substr(4, 2) + "월 " + build_info.a60.substr(6, 2) + "일";
								$('#dpad_value2').text(build_info.a60 != null ? temp_a60 : "-");
								let temp_a61 = build_info.a61.substr(0, 4) + "년 " + build_info.a61.substr(4, 2) + "월 " + build_info.a61.substr(6, 2) + "일";
								$('#dpad_value3').text(build_info.a61 != null ? temp_a61 : "-");

								$.get('https://data.disco.re/home/arch_floor_list/?key=' + build_info.a1, {}, function (subData) {
									//console.log(subData);
									let subHtml = '';
									if (subData.length > 0) {
										subData.forEach(item => {
											subHtml += '<div class="rfc-cool-grey" style="width:auto;padding:7px 20px;font-size:14px;">';
											subHtml += '	<div style="display:table;">';
											subHtml += '		<div style="position:relative;line-height:32px;display:table-row;">';
											subHtml += '			<span style="display:table-cell;background:#afbed7;width:27px;display: inline-block;height: 20px;text-align: center;line-height:21px;color: #fff;border-radius:10px;">';
											subHtml += item.d31.substr(0, 1);
											subHtml += '			</span>';
											subHtml += '			<span style="display:table-cell;min-width:70px;font-size: 16px; padding:0 5px;text-align:middle;" class="rf3_text1">';
											subHtml += item.floor;
											subHtml += '			</span>';
											subHtml += '			<span style="display:table-cell;width:auto;text-align:left;line-height: 20px;">';
											subHtml += item.d27 + ' · ' + item.d28;
											subHtml += '			</span>';
											subHtml += '		</div>';
											subHtml += '	</div>';
											subHtml += '	<div style="width:100%;">';
											subHtml += item.d24;
											subHtml += ' · ';
											subHtml += '		<span style="display: inline-block;">';
											subHtml += item.d29 + '㎡';
											subHtml += '		</span>';
											subHtml += '	</div>';
											subHtml += '</div>';
											subHtml += '<div class="ifs-tab-bar"></div>';
										});

										$('#dpaf_data_list').html(subHtml);
									}
								});
							}
						});

						$.get('https://data.disco.re/home/get_land_history/?pnu=' + pnu.pnu, {}, function (data) {
							//console.log(data);

							let html = '';
							data.reverse().forEach(item => {
								html += '<div style="display: table-row;line-height: 48px;">';
								html += '	<div style="display: table-cell;width:40%;text-align:left;font-size:14px;color:#50555a;padding-left:12px;">';
								html += item.move_date;
								html += '	</div>';
								html += '	<div style="display: table-cell;width:60%;text-align:left;font-size:14px;color:#1e1e23;">';
								html += item.reason;
								html += '	</div>';
								html += '</div>';
							});
							$('#land_history').html(html);
						});
								
						// 실거래가 목록
						$.get('/forsale/rest/tradings/getListFromPnu?pnu=' + pnu.pnu + '&saleDetailType=' + saledtltype + '&tradeType=' + saleTrdType, {}, function (data) {
							//console.log("실거래가목록2-1");
							//console.log(data);

							$('#trp-detail-period-cnt').text('(' + data.length + '건)');

							let html = '';
							if (data.length > 0) {
								data.forEach(item => {
									html += '<div class="detail_tradings_table2">';
									html += '	<div class="detail_tradings_table_row">';
									html += '		<div class="detail_tradings_table_cell2" style="width: 22%;">';
									html += '`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '.' + item.dealDay;
									html += '		</div>';
									html += '		<div class="detail_tradings_table_cell2" style="width: 20%;">';
									html += '			<span data-area="total" style="display: inline;">';
									html += numComma(item.dealAmount) + "만";
									html += '			</span>';
									html += '		</div>';
									html += '		<div class="detail_tradings_table_cell2" style="width: auto;">';
									if (saledtltype == 'h1') {
										html += '-';	
									} else {
										html += item.floor + '층 ' + item.floor + '**호';
									}									
									html += '		</div>';
									html += '		<div class="detail_tradings_table_cell2" style="width: 90px;"></div>';
									html += '	</div>';
									html += '</div>';
								});
							} else {
								html += '<div class="detail_tradings_table2">';
								html += '	<div class="detail_tradings_table_row">';
								html += '	<span>';
								html += '		실거래 내역이 없습니다.';
								html += '	</span>';
								html += '	</div>';
								html += '</div>';
							}
							$('#detail_tradings_table_conts').html(html);
						});


						$.get('https://data.disco.re/home/land_price/?pnu=' + pnu.pnu, {}, function (data) {
							//console.log(data);
							xLabels.length = 0;
							datapoints.length = 0;

							minValue = data[0][2];
							maxValue = data[0][2];

							data.forEach(item => {
								xLabels.push('`' + (item[0] + '').substr(2, 2) + '년');
								datapoints.push(item[2]);
								if (minValue > item[2])
									minValue = item[2];
								if (maxValue < item[2])
									maxValue = item[2];
							});

							gongChart.update();
						});
				});

				$.get('https://polygon.disco.re/get_land_by_latlng/?lat=' + latlng.getLat() + '&lng=' + latlng.getLng(), {}, function (result) {
					//console.log(result.address);
					
					$('#jibunAddress').text(result.address);
					
						let tempPoly = null;
						tempPoly = parse_land_polygon_value(result.polygon);

						// 지도에 표시할 다각형을 생성합니다
						polygon = new kakao.maps.Polygon({
							path: tempPoly[0],//polygonPath, // 그려질 다각형의 좌표 배열입니다
							strokeWeight: 2, // 선의 두께입니다 
							strokeColor: '#75B8FA', // 선의 색깔입니다
							strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
							strokeStyle: 'shortdash', // 선의 스타일 입니다
							fillColor: '#CFE7FF', // 채우기 색깔입니다
							fillOpacity: 0.7  // 채우기 불투명도 입니다  

						});

						// 지도에 다각형을 표시합니다
						polygon.setMap(map);
					
				});	
			}

			let overlayStatus = false;
			
			// 마커 레이어
			let isOverlayClick = false;			
				
			let jibunClickHandler = function (mouseEvent) {				
				if (polygon != null) {
					polygon.setMap(null);
				}
				
				// 클릭한 위도, 경도 정보를 가져옵니다 
				let latlng = mouseEvent.latLng;
					
				// 매물 상세 화면 영역 ------
				$('.cell_hidden').hide();
				$('.btn_wrap').hide();
				$('#slide_detail').hide();
				$('.tag_wrap').hide();
				$('.info_wrap').hide();
				// -------------------------
				
				// 지번 상세 화면 상단 매물번호 영역
				$('.saleDetail').hide();
				// 지번 상세 화면 상단 주소 영역
				$('.jibunDetail').show();
				
				let gisSubWrap = $('#map').children().eq(0).children().eq(0).children().eq(4).hasClass('gis_sub_wrap'); 
				
				if (!gisSubWrap) {
					gisSubWrap = !gisSubWrap;
					$('#map').children().eq(0).children().eq(0).children().eq(4).addClass('gis_sub_wrap');	
				}				
				getJibunDetailApi(latlng);	
								
				let detailW = $(".detail_wrap").width();
				let listW = $(".left_wrap").width();
						
				let isMini = $(".detail_wrap").hasClass("mini");
		
				if (isMini) {
					$('.left_wrap').hide();
					$('.detail_wrap').css("left", "0px");
				} else {						
					$("#gis_layout").addClass("detailOn");
				    $(".detail_wrap").css("left",detailW*-1);            
				    $(".detail_wrap").animate({"left":listW},200,function(){
					    $("#gis_layout").removeClass("detailMov");
					});		
				}			
				realTradingOverlayClick = [false, false, false, false, false];
							
				minimapShow(latlng);						
			}
			
			let overlayClickHandler = function (evt) {				
				if (polygon != null) {
					polygon.setMap(null);
				}
									
				// 매물 상세 화면 영역 ------
				$('.cell_hidden').hide();
				$('.btn_wrap').hide();
				$('#slide_detail').hide();
				$('.tag_wrap').hide();
				$('.info_wrap').hide();
				// -------------------------
				
				// 지번 상세 화면 상단 매물번호 영역
				$('.saleDetail').hide();
				// 지번 상세 화면 상단 주소 영역
				$('.jibunDetail').show();
				
				let gisSubWrap = $('#map').children().eq(0).children().eq(0).children().eq(4).hasClass('gis_sub_wrap'); 
				
				if (!gisSubWrap) {
					gisSubWrap = !gisSubWrap;
					$('#map').children().eq(0).children().eq(0).children().eq(4).addClass('gis_sub_wrap');	
				}
								
				let idx = $('.overlay_wrap').index(this);
				$('.overlay_wrap').eq(idx).parent().css('z-index', zIdx++);
					
				realTradingOverlayClick.forEach((item, index) => {
					if (idx === index)
						realTradingOverlayClick[index] = !realTradingOverlayClick[index];
					else 
						realTradingOverlayClick[index] = false;
				});					
				
				let posX = $('.overlay_wrap').eq(idx).find('.overlay_metaX').text();
				let posY = $('.overlay_wrap').eq(idx).find('.overlay_metaY').text();
				
				let coords = new kakao.maps.LatLng(posY, posX);
					
				getJibunDetailApi(coords);				
				
				let detailW = $(".detail_wrap").width();
				let listW = $(".left_wrap").width();
						
				let isMini = $(".detail_wrap").hasClass("mini");
		
				if (isMini) {
					$('.left_wrap').hide();
					$('.detail_wrap').css("left", "0px");
				} else {						
					$("#gis_layout").addClass("detailOn");
				    $(".detail_wrap").css("left",detailW*-1);            
				    $(".detail_wrap").animate({"left":listW},200,function(){
					    $("#gis_layout").removeClass("detailMov");
					});		
				}			
				realTradingOverlayClick = [false, false, false, false, false];
							
				minimapShow(coords);						
			}
			
			let jibunClickHandler22 = function (mouseEvent) {							
				if (polygon != null)
					polygon.setMap(null);
				
				// 클릭한 위도, 경도 정보를 가져옵니다 
				var latlng = mouseEvent.latLng;
					
				// 매물 상세 화면 영역 ------
				$('.cell_hidden').hide();
				$('.btn_wrap').hide();
				$('#slide_detail').hide();
				$('.tag_wrap').hide();
				$('.info_wrap').hide();
				// -------------------------
				
				// 지번 상세 화면 상단 매물번호 영역
				$('.saleDetail').hide();
				// 지번 상세 화면 상단 주소 영역
				$('.jibunDetail').show();
				
				let gisSubWrap = $('#map').children().eq(0).children().eq(0).children().eq(4).hasClass('gis_sub_wrap'); 
				
				if (!gisSubWrap) {
					gisSubWrap = !gisSubWrap;
					$('#map').children().eq(0).children().eq(0).children().eq(4).addClass('gis_sub_wrap');	
				}
				
				let saledtltype = $('#selSaleDetailType').val();
				let saleTrdType = 'A';
				
				$('.gis_sub_wrap').off('click');
				
				if (gisSubWrap) {
					$('.gis_sub_wrap').on('click', function (e) {										
						if (!isOverlayClick) {
			
							$.get('https://polygon.disco.re/get_pnu_by_latlng2/?lat=' + latlng.getLat() + '&lng=' + latlng.getLng() + '&spec=goon', {}, function (pnu) {
								console.log(pnu);
								
									// 토지대장
									$.get('https://data.disco.re/home/land_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
										console.log(data);
										$('#land_forest_info_area').text(data.area);
										$('#land_forest_info_purpose').text(data.purpose);
										$('#p6').text(data.p6);
										$('#p10').text(data.p10);
										$('#owner_gbn').text(data.owner_gbn);
										$('#days').text(data.days);
										$('#why').text(data.why);
										$('#p16').text(data.p16);
										$('#p12').text(data.p12);
										$('#p14').text(data.p14);
			
										let info_main = data.land_use_planning_info_main;
										if (info_main != null && info_main.length > 0) {
											info_main = info_main.split(',');
										}
			
										let info_main_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
										let info_main_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
										let info_main_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));
			
										$('#info_main_0').text(info_main_0);
										$('#info_main_1').text(info_main_1);
										$('#info_main_2').text(info_main_2);
			
										let info_etc = data.land_use_planning_info_etc;
										if (info_etc != null && info_etc.length > 0) {
											info_etc = info_etc.split(',');
										}
			
										let info_etc_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
										let info_etc_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
										let info_etc_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));
			
										$('#arch_info_0').text(info_etc_0);
										$('#arch_info_1').text(info_etc_1);
										$('#arch_info_2').text(info_etc_2);
									});
			
									$.get('https://data.disco.re/home/arch_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
										console.log(data);
										let html = '';
										if (data.overall_title_section.length > 0) {
											let build_info = data.overall_title_section[0];
			
											$('#dpa_overall_b1').text(build_info.b10 != null ? build_info.b10 : "-");
			
											$('#dpa_overall_a1').text(build_info.b32 != null ? build_info.b32 : "-");
											$('#dpa_overall_a1_1').text(build_info.b33 != null ? build_info.b33 : "-");
			
											$('.dpa-c-name').text(build_info.b32 != null ? build_info.b32 : "-");
			
											$('#dpa_overall_a2').text(build_info.b25 != null ? build_info.b25 + "㎡" : "-");
			
											html = '';
											html += '<span>' + build_info.b26 + '㎡</span><br><span>(건폐율 ' + build_info.b27 + '%)</span>';
											$('#dpa_overall_a3').html(html);
			
											$('#dpa_overall_b2').text(build_info.b28 != null ? build_info.b28 + "㎡" : "-");
			
											html = '';
											html += '<span>' + build_info.b29 + '㎡</span><br><span>(용적률 ' + build_info.b30 + '%)</span>';
											$('#dpa_overall_b3').html(html);
			
											$('#dpa_overall_c3_0').text(build_info.b34 != null ? build_info.b34 : "-");
											$('#dpa_overall_c3_1').text(build_info.b35 != null ? build_info.b35 : "-");
											$('#dpa_overall_c3_2').text(build_info.b56 != null ? build_info.b56 : "-");
			
											$('#dpa_overall_a5').text(build_info.b19 != null ? build_info.b19 : "-");
			
											$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
											$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
											$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
											$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");
			
											$('#dpaz_value_1').text(build_info.b44 != null ? build_info.b44 + "대" : "-");
											$('#dpaz_value_2').text(build_info.b46 != null ? build_info.b46 + "대" : "-");
											$('#dpaz_value_3').text(build_info.b40 != null ? build_info.b40 + "대" : "-");
											$('#dpaz_value_4').text(build_info.b42 != null ? build_info.b42 + "대" : "-");
			
											let temp_b48 = build_info.b48.substr(0, 4) + "년 " + build_info.b48.substr(4, 2) + "월 " + build_info.b48.substr(6, 2) + "일";
											$('#dpad_value1').text(build_info.b48 != null ? temp_b48 : "-");
											let temp_b49 = build_info.b49.substr(0, 4) + "년 " + build_info.b49.substr(4, 2) + "월 " + build_info.b49.substr(6, 2) + "일";
											$('#dpad_value2').text(build_info.b49 != null ? temp_b49 : "-");
											let temp_b50 = build_info.b50.substr(0, 4) + "년 " + build_info.b50.substr(4, 2) + "월 " + build_info.b50.substr(6, 2) + "일";
											$('#dpad_value3').text(build_info.b50 != null ? temp_b50 : "-");
			
										} else {
											console.log(data.title_section)
											let build_info = data.title_section[0];
			
											$('#dpa_overall_b1').text(build_info.a23 != null ? build_info.a23 : "-");
			
											$('#dpa_overall_a1').text(build_info.a36 != null ? build_info.a36 : "-");
											$('#dpa_overall_a1_1').text(build_info.a37 != null ? build_info.a37 : "-");
											$('#dpa_title_b5_1').text(build_info.a33 != null ? build_info.a33 : "-");
											$('#dpa_title_b5_2').text(build_info.a39 != null ? build_info.a39 : "-");
			
											$('#dpa_overall_c2').text(build_info.a43 != null ? build_info.a43 + "m" : "-");
											$('#dpa_overall_c5').text(build_info.a44 != null ? build_info.a44 + "/" + build_info.a45 : "-");
			
											$('.dpa-c-name').text(build_info.a36 != null ? build_info.a36 : "-");
			
											$('#dpa_overall_a2').text(build_info.a26 != null ? build_info.a26 + "㎡" : "-");
			
											html = '';
											html += '<span>' + build_info.a27 + '㎡</span><br><span>(건폐율 ' + build_info.a28 + '%)</span>';
											$('#dpa_overall_a3').html(html);
			
											$('#dpa_overall_b2').text(build_info.a29 != null ? build_info.a29 + "㎡" : "-");
			
											html = '';
											html += '<span>' + build_info.a30 + '㎡</span><br><span>(용적률 ' + build_info.a31 + '%)</span>';
											$('#dpa_overall_b3').html(html);
			
											$('#dpa_overall_c3_0').text(build_info.a41 != null ? build_info.a41 : "-");
											$('#dpa_overall_c3_1').text(build_info.a42 != null ? build_info.a42 : "-");
											$('#dpa_overall_c3_2').text(build_info.a67 != null ? build_info.a67 : "-");
			
											$('#dpa_overall_a5').text(build_info.a17 != null ? build_info.a17 : "-");
			
											$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
											$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
											$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
											$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");
			
											$('#dpaz_value_1').text(build_info.a55 != null ? build_info.a55 + "대" : "-");
											$('#dpaz_value_2').text(build_info.a57 != null ? build_info.a57 + "대" : "-");
											$('#dpaz_value_3').text(build_info.a51 != null ? build_info.a51 + "대" : "-");
											$('#dpaz_value_4').text(build_info.a53 != null ? build_info.a53 + "대" : "-");
			
											$('#dpal_value1').text(build_info.a46 != null ? build_info.a46 : "-");
											$('#dpal_value2').text(build_info.a47 != null ? build_info.a47 : "-");
			
											let temp_a59 = build_info.a59.substr(0, 4) + "년 " + build_info.a59.substr(4, 2) + "월 " + build_info.a59.substr(6, 2) + "일";
											$('#dpad_value1').text(build_info.a59 != null ? temp_a59 : "-");
											let temp_a60 = build_info.a60.substr(0, 4) + "년 " + build_info.a60.substr(4, 2) + "월 " + build_info.a60.substr(6, 2) + "일";
											$('#dpad_value2').text(build_info.a60 != null ? temp_a60 : "-");
											let temp_a61 = build_info.a61.substr(0, 4) + "년 " + build_info.a61.substr(4, 2) + "월 " + build_info.a61.substr(6, 2) + "일";
											$('#dpad_value3').text(build_info.a61 != null ? temp_a61 : "-");
			
											$.get('https://data.disco.re/home/arch_floor_list/?key=' + build_info.a1, {}, function (subData) {
												console.log(subData);
												let subHtml = '';
												if (subData.length > 0) {
													subData.forEach(item => {
														subHtml += '<div class="rfc-cool-grey" style="width:auto;padding:7px 20px;font-size:14px;">';
														subHtml += '	<div style="display:table;">';
														subHtml += '		<div style="position:relative;line-height:32px;display:table-row;">';
														subHtml += '			<span style="display:table-cell;background:#afbed7;width:27px;display: inline-block;height: 20px;text-align: center;line-height:21px;color: #fff;border-radius:10px;">';
														subHtml += item.d31.substr(0, 1);
														subHtml += '			</span>';
														subHtml += '			<span style="display:table-cell;min-width:70px;font-size: 16px; padding:0 5px;text-align:middle;" class="rf3_text1">';
														subHtml += item.floor;
														subHtml += '			</span>';
														subHtml += '			<span style="display:table-cell;width:auto;text-align:left;line-height: 20px;">';
														subHtml += item.d27 + ' · ' + item.d28;
														subHtml += '			</span>';
														subHtml += '		</div>';
														subHtml += '	</div>';
														subHtml += '	<div style="width:100%;">';
														subHtml += item.d24;
														subHtml += ' · ';
														subHtml += '		<span style="display: inline-block;">';
														subHtml += item.d29 + '㎡';
														subHtml += '		</span>';
														subHtml += '	</div>';
														subHtml += '</div>';
														subHtml += '<div class="ifs-tab-bar"></div>';
													});
			
													$('#dpaf_data_list').html(subHtml);
												}
											});
										}
									});
			
									$.get('https://data.disco.re/home/get_land_history/?pnu=' + pnu.pnu, {}, function (data) {
										console.log(data);
			
										let html = '';
										data.reverse().forEach(item => {
											html += '<div style="display: table-row;line-height: 48px;">';
											html += '	<div style="display: table-cell;width:40%;text-align:left;font-size:14px;color:#50555a;padding-left:12px;">';
											html += item.move_date;
											html += '	</div>';
											html += '	<div style="display: table-cell;width:60%;text-align:left;font-size:14px;color:#1e1e23;">';
											html += item.reason;
											html += '	</div>';
											html += '</div>';
										});
										$('#land_history').html(html);
									});
											
									// 실거래가 목록
									$.get('/forsale/rest/tradings/getListFromPnu?pnu=' + pnu.pnu + '&saleDetailType=' + saledtltype + '&tradeType=' + saleTrdType, {}, function (data) {
										console.log("실거래가목록2-1");
										console.log(data);
			
										$('#trp-detail-period-cnt').text('(' + data.length + '건)');
			
										let html = '';
										if (data.length > 0) {
											data.forEach(item => {
												html += '<div class="detail_tradings_table2">';
												html += '	<div class="detail_tradings_table_row">';
												html += '		<div class="detail_tradings_table_cell2" style="width: 22%;">';
												html += '`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '.' + item.dealDay;
												html += '		</div>';
												html += '		<div class="detail_tradings_table_cell2" style="width: 20%;">';
												html += '			<span data-area="total" style="display: inline;">';
												html += numComma(item.dealAmount) + "만";
												html += '			</span>';
												html += '		</div>';
												html += '		<div class="detail_tradings_table_cell2" style="width: auto;">';
												html += item.floor + '층 ' + item.floor + '**호';
												html += '		</div>';
												html += '		<div class="detail_tradings_table_cell2" style="width: 90px;"></div>';
												html += '	</div>';
												html += '</div>';
											});
										} else {
											html += '<div class="detail_tradings_table2">';
											html += '	<div class="detail_tradings_table_row">';
											html += '	<span>';
											html += '		실거래 내역이 없습니다.';
											html += '	</span>';
											html += '	</div>';
											html += '</div>';
										}
										$('#detail_tradings_table_conts').html(html);
									});
			
			
									$.get('https://data.disco.re/home/land_price/?pnu=' + pnu.pnu, {}, function (data) {
										console.log(data);
										xLabels.length = 0;
										datapoints.length = 0;
			
										minValue = data[0][2];
										maxValue = data[0][2];
			
										data.forEach(item => {
											xLabels.push('`' + (item[0] + '').substr(2, 2) + '년');
											datapoints.push(item[2]);
											if (minValue > item[2])
												minValue = item[2];
											if (maxValue < item[2])
												maxValue = item[2];
										});
			
										gongChart.update();
									});
							});
			
							$.get('https://polygon.disco.re/get_land_by_latlng/?lat=' + latlng.getLat() + '&lng=' + latlng.getLng(), {}, function (result) {
								console.log(result.address);
								
								$('#jibunAddress').text(result.address);
								
									let tempPoly = null;
									tempPoly = parse_land_polygon_value(result.polygon);
			
									// 지도에 표시할 다각형을 생성합니다
									polygon = new kakao.maps.Polygon({
										path: tempPoly[0],//polygonPath, // 그려질 다각형의 좌표 배열입니다
										strokeWeight: 2, // 선의 두께입니다 
										strokeColor: '#75B8FA', // 선의 색깔입니다
										strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
										strokeStyle: 'shortdash', // 선의 스타일 입니다
										fillColor: '#CFE7FF', // 채우기 색깔입니다
										fillOpacity: 0.7  // 채우기 불투명도 입니다  
			
									});
			
									// 지도에 다각형을 표시합니다
									polygon.setMap(map);
								
							});	
						
							var detailW = $(".detail_wrap").width();
							var listW = $(".left_wrap").width();
							$("#gis_layout").addClass("detailOn");
							//$(".detail_wrap").css("left", detailW * -1);
		
							//$('.tabCon_wrap').hide();
		
							var isMini = $(".detail_wrap").hasClass("mini");
		
							if (isMini) {
								$('.left_wrap').hide();
								$('.detail_wrap').css("left", "0px");
							} else {
								//$(".detail_wrap").show();		
								
								$(".detail_wrap").animate({ "left": listW }, 200, function () {
									$("#gis_layout").removeClass("detailMov");
								});
								
							}
							
							realTradingOverlayClick = [false, false, false, false, false];
							
							minimapShow(latlng);
						}
					});	
				}
				
				
				/*
				let eventsTest = $._data($(".overlay_wrap")[0], 'events');
				
				if (typeof(eventsTest) == 'undefined' || eventsTest == null) {
					$('.overlay_wrap').on('click', function (e) {
						isOverlayClick = false;
									
						let idx = $('.overlay_wrap').index(this);
						$('.overlay_wrap').eq(idx).parent().css('z-index', zIdx++);
						
						//console.log(realTradingOverlayClick[idx]);
						realTradingOverlayClick.forEach((item, index) => {
							if (idx === index)
								realTradingOverlayClick[index] = !realTradingOverlayClick[index];
							else 
								realTradingOverlayClick[index] = false;
						});					
						
						if (!realTradingOverlayClick[idx]) {
							$('.overlay_wrap').eq(idx).parent().hide();
							$('.detail_wrap .saleNum a').trigger('click');
						} else {
							let posX = $('.overlay_wrap').eq(idx).find('.overlay_metaX').text();
							let posY = $('.overlay_wrap').eq(idx).find('.overlay_metaY').text();

							$.get('https://polygon.disco.re/get_pnu_by_latlng2/?lat=' + posY + '&lng=' + posX + '&spec=goon', {}, function (pnu) {
								console.log("pnu");
								console.log(pnu);
								// 토지대장
								$.get('https://data.disco.re/home/land_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
									console.log(data);
									$('#land_forest_info_area').text(data.area);
									$('#land_forest_info_purpose').text(data.purpose);
									$('#p6').text(data.p6);
									$('#p10').text(data.p10);
									$('#owner_gbn').text(data.owner_gbn);
									$('#days').text(data.days);
									$('#why').text(data.why);
									$('#p16').text(data.p16);
									$('#p12').text(data.p12);
									$('#p14').text(data.p14);

									let info_main = data.land_use_planning_info_main;
									if (info_main != null && info_main.length > 0) {
										info_main = info_main.split(',');
									}

									let info_main_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
									let info_main_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
									let info_main_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

									$('#info_main_0').text(info_main_0);
									$('#info_main_1').text(info_main_1);
									$('#info_main_2').text(info_main_2);

									let info_etc = data.land_use_planning_info_etc;
									if (info_etc != null && info_etc.length > 0) {
										info_etc = info_etc.split(',');
									}

									let info_etc_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
									let info_etc_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
									let info_etc_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

									$('#arch_info_0').text(info_etc_0);
									$('#arch_info_1').text(info_etc_1);
									$('#arch_info_2').text(info_etc_2);
								});

								$.get('https://data.disco.re/home/arch_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
									console.log(data);
									let html = '';
									if (data.overall_title_section.length > 0) {
										let build_info = data.overall_title_section[0];

										$('#dpa_overall_b1').text(build_info.b10 != null ? build_info.b10 : "-");

										$('#dpa_overall_a1').text(build_info.b32 != null ? build_info.b32 : "-");
										$('#dpa_overall_a1_1').text(build_info.b33 != null ? build_info.b33 : "-");

										$('.dpa-c-name').text(build_info.b32 != null ? build_info.b32 : "-");

										$('#dpa_overall_a2').text(build_info.b25 != null ? build_info.b25 + "㎡" : "-");

										html = '';
										html += '<span>' + build_info.b26 + '㎡</span><br><span>(건폐율 ' + build_info.b27 + '%)</span>';
										$('#dpa_overall_a3').html(html);

										$('#dpa_overall_b2').text(build_info.b28 != null ? build_info.b28 + "㎡" : "-");

										html = '';
										html += '<span>' + build_info.b29 + '㎡</span><br><span>(용적률 ' + build_info.b30 + '%)</span>';
										$('#dpa_overall_b3').html(html);

										$('#dpa_overall_c3_0').text(build_info.b34 != null ? build_info.b34 : "-");
										$('#dpa_overall_c3_1').text(build_info.b35 != null ? build_info.b35 : "-");
										$('#dpa_overall_c3_2').text(build_info.b56 != null ? build_info.b56 : "-");

										$('#dpa_overall_a5').text(build_info.b19 != null ? build_info.b19 : "-");

										$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
										$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
										$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
										$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");

										$('#dpaz_value_1').text(build_info.b44 != null ? build_info.b44 + "대" : "-");
										$('#dpaz_value_2').text(build_info.b46 != null ? build_info.b46 + "대" : "-");
										$('#dpaz_value_3').text(build_info.b40 != null ? build_info.b40 + "대" : "-");
										$('#dpaz_value_4').text(build_info.b42 != null ? build_info.b42 + "대" : "-");

										let temp_b48 = build_info.b48.substr(0, 4) + "년 " + build_info.b48.substr(4, 2) + "월 " + build_info.b48.substr(6, 2) + "일";
										$('#dpad_value1').text(build_info.b48 != null ? temp_b48 : "-");
										let temp_b49 = build_info.b49.substr(0, 4) + "년 " + build_info.b49.substr(4, 2) + "월 " + build_info.b49.substr(6, 2) + "일";
										$('#dpad_value2').text(build_info.b49 != null ? temp_b49 : "-");
										let temp_b50 = build_info.b50.substr(0, 4) + "년 " + build_info.b50.substr(4, 2) + "월 " + build_info.b50.substr(6, 2) + "일";
										$('#dpad_value3').text(build_info.b50 != null ? temp_b50 : "-");

									} else {
										console.log(data.title_section)
										let build_info = data.title_section[0];

										$('#dpa_overall_b1').text(build_info.a23 != null ? build_info.a23 : "-");

										$('#dpa_overall_a1').text(build_info.a36 != null ? build_info.a36 : "-");
										$('#dpa_overall_a1_1').text(build_info.a37 != null ? build_info.a37 : "-");
										$('#dpa_title_b5_1').text(build_info.a33 != null ? build_info.a33 : "-");
										$('#dpa_title_b5_2').text(build_info.a39 != null ? build_info.a39 : "-");

										$('#dpa_overall_c2').text(build_info.a43 != null ? build_info.a43 + "m" : "-");
										$('#dpa_overall_c5').text(build_info.a44 != null ? build_info.a44 + "/" + build_info.a45 : "-");

										$('.dpa-c-name').text(build_info.a36 != null ? build_info.a36 : "-");

										$('#dpa_overall_a2').text(build_info.a26 != null ? build_info.a26 + "㎡" : "-");

										html = '';
										html += '<span>' + build_info.a27 + '㎡</span><br><span>(건폐율 ' + build_info.a28 + '%)</span>';
										$('#dpa_overall_a3').html(html);

										$('#dpa_overall_b2').text(build_info.a29 != null ? build_info.a29 + "㎡" : "-");

										html = '';
										html += '<span>' + build_info.a30 + '㎡</span><br><span>(용적률 ' + build_info.a31 + '%)</span>';
										$('#dpa_overall_b3').html(html);

										$('#dpa_overall_c3_0').text(build_info.a41 != null ? build_info.a41 : "-");
										$('#dpa_overall_c3_1').text(build_info.a42 != null ? build_info.a42 : "-");
										$('#dpa_overall_c3_2').text(build_info.a67 != null ? build_info.a67 : "-");

										$('#dpa_overall_a5').text(build_info.a17 != null ? build_info.a17 : "-");

										$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
										$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
										$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
										$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");

										$('#dpaz_value_1').text(build_info.a55 != null ? build_info.a55 + "대" : "-");
										$('#dpaz_value_2').text(build_info.a57 != null ? build_info.a57 + "대" : "-");
										$('#dpaz_value_3').text(build_info.a51 != null ? build_info.a51 + "대" : "-");
										$('#dpaz_value_4').text(build_info.a53 != null ? build_info.a53 + "대" : "-");

										$('#dpal_value1').text(build_info.a46 != null ? build_info.a46 : "-");
										$('#dpal_value2').text(build_info.a47 != null ? build_info.a47 : "-");

										let temp_a59 = build_info.a59.substr(0, 4) + "년 " + build_info.a59.substr(4, 2) + "월 " + build_info.a59.substr(6, 2) + "일";
										$('#dpad_value1').text(build_info.a59 != null ? temp_a59 : "-");
										let temp_a60 = build_info.a60.substr(0, 4) + "년 " + build_info.a60.substr(4, 2) + "월 " + build_info.a60.substr(6, 2) + "일";
										$('#dpad_value2').text(build_info.a60 != null ? temp_a60 : "-");
										let temp_a61 = build_info.a61.substr(0, 4) + "년 " + build_info.a61.substr(4, 2) + "월 " + build_info.a61.substr(6, 2) + "일";
										$('#dpad_value3').text(build_info.a61 != null ? temp_a61 : "-");

										$.get('https://data.disco.re/home/arch_floor_list/?key=' + build_info.a1, {}, function (subData) {
											console.log(subData);
											let subHtml = '';
											if (subData.length > 0) {
												subData.forEach(item => {
													subHtml += '<div class="rfc-cool-grey" style="width:auto;padding:7px 20px;font-size:14px;">';
													subHtml += '	<div style="display:table;">';
													subHtml += '		<div style="position:relative;line-height:32px;display:table-row;">';
													subHtml += '			<span style="display:table-cell;background:#afbed7;width:27px;display: inline-block;height: 20px;text-align: center;line-height:21px;color: #fff;border-radius:10px;">';
													subHtml += item.d31.substr(0, 1);
													subHtml += '			</span>';
													subHtml += '			<span style="display:table-cell;min-width:70px;font-size: 16px; padding:0 5px;text-align:middle;" class="rf3_text1">';
													subHtml += item.floor;
													subHtml += '			</span>';
													subHtml += '			<span style="display:table-cell;width:auto;text-align:left;line-height: 20px;">';
													subHtml += item.d27 + ' · ' + item.d28;
													subHtml += '			</span>';
													subHtml += '		</div>';
													subHtml += '	</div>';
													subHtml += '	<div style="width:100%;">';
													subHtml += item.d24;
													subHtml += ' · ';
													subHtml += '		<span style="display: inline-block;">';
													subHtml += item.d29 + '㎡';
													subHtml += '		</span>';
													subHtml += '	</div>';
													subHtml += '</div>';
													subHtml += '<div class="ifs-tab-bar"></div>';
												});

												$('#dpaf_data_list').html(subHtml);
											}
										});
									}
								});

								$.get('https://data.disco.re/home/get_land_history/?pnu=' + pnu.pnu, {}, function (data) {
									console.log(data);

									let html = '';
									data.reverse().forEach(item => {
										html += '<div style="display: table-row;line-height: 48px;">';
										html += '	<div style="display: table-cell;width:40%;text-align:left;font-size:14px;color:#50555a;padding-left:12px;">';
										html += item.move_date;
										html += '	</div>';
										html += '	<div style="display: table-cell;width:60%;text-align:left;font-size:14px;color:#1e1e23;">';
										html += item.reason;
										html += '	</div>';
										html += '</div>';
									});
									$('#land_history').html(html);
								});

								
								// 실거래가 목록
								$.get('/forsale/rest/tradings/getListFromPnu?pnu=' + pnu.pnu + '&saleDetailType=' + saledtltype + '&tradeType=' + saleTrdType, {}, function (data) {
									console.log("실거래가목록 : 오버레이 팝업");
									//console.log(data);
									//console.log(data[0].posX);

									let geocoder = new kakao.maps.services.Geocoder();
									 
									$('#trp-detail-period-cnt').text('(' + data.length + '건)');

									let html = '';
									if (data.length > 0) {
										data.forEach(item => {
											html += '<div class="detail_tradings_table2">';
											html += '	<div class="detail_tradings_table_row">';
											html += '		<div class="detail_tradings_table_cell2" style="width: 22%;">';
											html += '`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '.' + item.dealDay;
											html += '		</div>';
											html += '		<div class="detail_tradings_table_cell2" style="width: 20%;">';
											html += '			<span data-area="total" style="display: inline;">';
											html += numComma(item.dealAmount) + "만";
											html += '			</span>';
											html += '		</div>';
											html += '		<div class="detail_tradings_table_cell2" style="width: auto;">';
											if (saledtltype == 'h1') {
												html += '-';	
											} else {
												html += item.floor + '층 ' + item.floor + '**호';
											}
											
											html += '		</div>';
											html += '		<div class="detail_tradings_table_cell2" style="width: 90px;"></div>';
											html += '	</div>';
											html += '</div>';
											
											geocoder.coord2Address(item.posX, item.posY, function(result, status) {
										        if (status === kakao.maps.services.Status.OK) {									        	
										        	console.log(item.rid);
										        	console.log(result[0].address);
										        	console.log(result[0].address.address_name);
										        	let pnu = item.pnu + '1' + result[0].address.main_address_no.padStart(4, '0')  + result[0].address.sub_address_no.padStart(4, '0');
										        	console.log(pnu);
										        	
													let jibun1 = result[0].address.main_address_no; 
													let jibun2 = result[0].address.sub_address_no != '' ? '-' + result[0].address.sub_address_no : '';
										        	let rtDTO = new Object();
										        	rtDTO.rid = item.rid;
										        	rtDTO.pnu = pnu;
													rtDTO.jibun = jibun1 + jibun2;
													
										        	$.post("/forsale/rest/tradings/updateCoords", rtDTO, function (data, status) {
														console.log("Data: " + data + "\nStatus: " + status);
													});
										        }
											});
										});
									}
									$('#detail_tradings_table_conts').html(html);
								});


								$.get('https://data.disco.re/home/land_price/?pnu=' + pnu.pnu, {}, function (data) {
									console.log(data);
									xLabels.length = 0;
									datapoints.length = 0;

									minValue = data[0][2];
									maxValue = data[0][2];

									data.forEach(item => {
										xLabels.push('`' + (item[0] + '').substr(2, 2) + '년');
										datapoints.push(item[2]);
										if (minValue > item[2])
											minValue = item[2];
										if (maxValue < item[2])
											maxValue = item[2];
									});

									gongChart.update();
								});
							});	
							
							var detailW = $(".detail_wrap").width();
							var listW = $(".left_wrap").width();
							$("#gis_layout").addClass("detailOn");
							//$(".detail_wrap").css("left", detailW * -1);


							//$('.tabCon_wrap').hide();

							var isMini = $(".detail_wrap").hasClass("mini");

							if (isMini) {
								$('.left_wrap').hide();
								$('.detail_wrap').css("left", "0px");
							} else {
								$(".detail_wrap").animate({ "left": listW }, 200, function () {
									$("#gis_layout").removeClass("detailMov");
								});
							}
							
							minimapShow(latlng);
						}		
					});
				}
				*/
			}
			

			var w = /*[[${form.w}]]*/ '';
			if ((w == null || w.length == 0) && keyword == null) {
				//console.log("not search");				
				let geocoder = new kakao.maps.services.Geocoder();
				
				let callback = function (result, status) {
					if (status === kakao.maps.services.Status.OK) {
						var address = result[0];

						var addressDetail = (address.address == null) ? address.road_address : address.address;
						$('ul.address').find('li.sido').text(addressDetail.region_1depth_name);
						$('ul.address').find('li.gugun').text(addressDetail.region_2depth_name);
						$('ul.address').find('li.dong').text(addressDetail.region_3depth_name);

						$('#frmFilter').find('input[name=sido]').val(addressDetail.region_1depth_name);
						$('#frmFilter').find('input[name=sigungu]').val(addressDetail.region_2depth_name);
						$('#frmFilter').find('input[name=dong]').val(addressDetail.region_3depth_name);

						var options = { //지도를 생성할 때 필요한 기본 옵션
							center: new kakao.maps.LatLng(address.y, address.x), //지도의 중심좌표.
							scrollwheel: true,
							minZoom: 1,
							maxZoom: 10,
							level: 4 //지도의 레벨(확대, 축소 정도)
						};
						map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴
						_initMap(map);

						let bounds = map.getBounds();
						
						// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
						var zoomControl = new kakao.maps.ZoomControl();
						map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
						
						let boundbox = map.getBounds().toString().replace('((', '').replace('))', '').replace('(', '').replace(')', '').replaceAll(' ', '');
						getRealTrading(boundbox);

						// 마우스 드래그로 지도 이동이 완료되었을 때 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
						kakao.maps.event.addListener(map, 'dragend', function () {
							let level = map.getLevel();

							if (isRealTradings) {		
								removeRealTrading2();
								realTradingOverlayClick = [false, false, false, false, false];
								
								if (level >= 6) {
									realTransCluster(map);
								} else {
									getRealTrading();
								}
							}

							if (!isAreaExtent) {
								$('.area_meter').css('display', 'inline-block');
								$('.area_pyeong').css('display', 'none');
							} else {
								$('.area_pyeong').css('display', 'inline-block');
								$('.area_meter').css('display', 'none');
							}

							/*
							$('.overlay_wrap').off('click');
									
							$('.overlay_wrap').on('click', function (e) {
								let idx = $('.overlay_wrap').index(this);
								$('.overlay_wrap').eq(idx).parent().css('z-index', zIdx++);								
							});
							*/
						});

						// 지도가 확대 또는 축소되면 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
						kakao.maps.event.addListener(map, 'zoom_changed', function () {
							let level = map.getLevel();

							if (isRealTradings) {
								removeRealTrading2();
								realTradingOverlayClick = [false, false, false, false, false];
								
								if (level >= 6) {
									realTransCluster(map);
								} else {
									getRealTrading();
								}
							}

							if (!isAreaExtent) {
								$('.area_meter').css('display', 'inline-block');
								$('.area_pyeong').css('display', 'none');
							} else {
								$('.area_pyeong').css('display', 'inline-block');
								$('.area_meter').css('display', 'none');
							}

							/*
							$('.overlay_wrap').off('click');
							
							$('.overlay_wrap').on('click', function (e) {
								let idx = $('.overlay_wrap').index(this);
								$('.overlay_wrap').eq(idx).parent().css('z-index', zIdx++);
							});
							*/
						});


						// 지도에 클릭 이벤트를 등록합니다
						// 지도를 클릭하면 마지막 파라미터로 넘어온 함수를 호출합니다
						kakao.maps.event.addListener(map, 'click', jibunClickHandler);

						// 마커 클러스터러를 생성합니다
						clusterer = new kakao.maps.MarkerClusterer({
							map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체
							averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정
							minLevel: 1, // 클러스터 할 최소 지도 레벨
							minClusterSize: 1,
							disableClickZoom: true // 클러스터 마커를 클릭했을 때 지도가 확대되지 않도록 설정한다
						});

						// 데이터를 가져오기 위해 jQuery를 사용합니다
						// 데이터를 가져와 마커를 생성하고 클러스터러 객체에 넘겨줍니다
						var formdata = $('#frmFilter').serializeObject();
						$.get("/forsale/rest/getSalePositions", formdata, function (data) {
							//alert(JSON.stringify(data));
							// 데이터에서 좌표 값을 가지고 마커를 표시합니다
							// 마커 클러스터러로 관리할 마커 객체는 생성할 때 지도 객체를 설정하지 않습니다
							var markers = $(data.positions).map(function (i, position) {
								//alert(position.lat + '...' + position.lng);
								return new kakao.maps.Marker({
									position: new kakao.maps.LatLng(position.lat + (Math.random() / 300), position.lng + (Math.random() / 300))
								});
							});

							//alert(JSON.stringify(markers));
							// 클러스터러에 마커들을 추가합니다
							clusterer.addMarkers(markers);

							//클러스터 클릭 이벤트 처리.
							kakao.maps.event.addListener(clusterer, 'clusterclick', function (cluster) {
								var bound = cluster.getBounds();
								//alert( JSON.stringify(bound) );
								var swX = bound.ha;
								var swY = bound.qa;
								var neX = bound.oa;
								var neY = bound.pa;

								var frm = $('#frmFilter');
								frm.find('input[name=swX]').val(swX);
								frm.find('input[name=swY]').val(swY);
								frm.find('input[name=neX]').val(neX);
								frm.find('input[name=neY]').val(neY);
								frm.find('input[name=page]').val(1);
								movePageTab1(1);
							});
						});
					}
					else if (status === kakao.maps.services.Status.ZERO_RESULT) {
						mapFromCurrentPosition(container);
					}
					else {
						console.log(status);
					}
				};

				geocoder.addressSearch('쌍봉동', callback);

			} else {
				var options = { //지도를 생성할 때 필요한 기본 옵션
					center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
					scrollwheel: true,
					minZoom: 1,
					maxZoom: 10,
					level: 4 //지도의 레벨(확대, 축소 정도)
				};

				// 지도를 생성합니다    
				map = new kakao.maps.Map(container, options);
				_initMap(map);
				
				let boundbox = map.getBounds().toString().replace('((', '').replace('))', '').replace('(', '').replace(')', '').replaceAll(' ', '');
				getRealTrading(boundbox);

				// 마우스 드래그로 지도 이동이 완료되었을 때 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
				kakao.maps.event.addListener(map, 'dragend', function () {
					let level = map.getLevel();

					if (isRealTradings) {
						removeRealTrading2();
						realTradingOverlayClick = [false, false, false, false, false];

						//console.log(level);
						//console.log(boundbox);
						if (level >= 6) {
							realTransCluster(map);
						} else {
							getRealTrading();
						}
					}

					// 지도 중심좌표를 얻어옵니다 
					var latlng = map.getCenter();

					var message = '변경된 지도 중심좌표는 ' + latlng.getLat() + ' 이고, ';
					message += '경도는 ' + latlng.getLng() + ' 입니다';
					console.log(message);
					console.log(map.getBounds().toString());
					//var resultDiv = document.getElementById('result');  
					//resultDiv.innerHTML = message;

				});
				// 지도가 확대 또는 축소되면 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
				kakao.maps.event.addListener(map, 'zoom_changed', function () {
					// 지도의 현재 레벨을 얻어옵니다
					var level = map.getLevel();

					if (isRealTradings) {
						removeRealTrading2();
						realTradingOverlayClick = [false, false, false, false, false];

						//console.log(level);
						//console.log(boundbox);
						if (level >= 6) {
							realTransCluster(map);
						} else {
							getRealTrading();
						}
					}

					var message = '현재 지도 레벨은 ' + level + ' 입니다';
					console.log(message);
					console.log(map.getBounds().toString());
					//var resultDiv = document.getElementById('result');  
					//resultDiv.innerHTML = message;

				});
				
				// 지도에 클릭 이벤트를 등록합니다
				// 지도를 클릭하면 마지막 파라미터로 넘어온 함수를 호출합니다
				kakao.maps.event.addListener(map, 'click', jibunClickHandler);

				// 장소 검색 객체를 생성합니다
				var ps = new kakao.maps.services.Places();

				// 키워드로 장소를 검색합니다
				ps.keywordSearch(keyword, placesSearchCB);
				
				//let geocoder = new kakao.maps.services.Geocoder();
				//geocoder.addressSearch(keyword, placesSearchCB);

				// 키워드 검색 완료 시 호출되는 콜백함수 입니다
				function placesSearchCB(data, status, pagination) {
					if (status === kakao.maps.services.Status.OK) {

						// 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
						// LatLngBounds 객체에 좌표를 추가합니다
						let bounds = new kakao.maps.LatLngBounds();
						let addr = '';

						for (var i = 0; i < data.length; i++) {
							//console.log(data[i]);    
							bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));
							addr = data[i].address_name;
						}
						addr = addr.split(' ');
						//console.log("addr start");
						//console.log(addr);
						//console.log("addr end");
						// 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
						map.setBounds(bounds);
						
						let sido_trans = {
							'서울' : '서울특별시',
							'인천' : '인천광역시',
							'대전' : '대전광역시',
							'대구' : '대구광역시',
							'부산' : '부산광역시',
							'광주' : '광주광역시',
							'울산' : '울산광역시',
							'경기' : '경기도',
							'세종특별자치시' : '세종특별자치시',
							'강원특별자치도' : '강원특별자치도',							
							'전북특별자치도' : '전라북도',
							'전남' : '전라남도',
							'충북' : '충청북도',
							'충남' : '충청남도',
							'경북' : '경상북도',
							'경남' : '경상남도',
							'제주특별자치도' : '제주특별자치도'
						}
						
						paramSido = addr[0];
						if (addr.length > 4) {
							paramSigungu = addr[1] + ' ' + addr[2];
							paramEmd = addr[3];	
						} else {
							paramSigungu = addr[1];
							paramEmd = addr[2];
						}
						
						paramSido = sido_trans[paramSido];
						
						$( "#searchSido option" ).each(function() {
							if ($(this).text() == paramSido) {
								$( "#searchSido" ).val($(this).val()).attr("selected", true);
								$( "#searchSido" ).selectmenu('refresh').trigger("selectmenuchange");
							}
						});
						
						if (jibun == 'jibun') {
							// 매물 상세 화면 영역 ------
							$('.cell_hidden').hide();
							$('.btn_wrap').hide();
							$('#slide_detail').hide();
							$('.tag_wrap').hide();
							$('.info_wrap').hide();
							// -------------------------
							
							// 지번 상세 화면 상단 매물번호 영역
							$('.saleDetail').hide();
							// 지번 상세 화면 상단 주소 영역
							$('.jibunDetail').show();

							let detailW = $(".detail_wrap").width();
							let listW = $(".left_wrap").width();
									
							let isMini = $(".detail_wrap").hasClass("mini");
					
							if (isMini) {
								$('.left_wrap').hide();
								$('.detail_wrap').css("left", "0px");
							} else {						
								$("#gis_layout").addClass("detailOn");
							    $(".detail_wrap").css("left",detailW*-1);            
							    $(".detail_wrap").animate({"left":listW},200,function(){
								    $("#gis_layout").removeClass("detailMov");
								});		
							}			
							realTradingOverlayClick = [false, false, false, false, false];
							
							let coords = new kakao.maps.LatLng(data[0].y, data[0].x);
							
							jibunDetails(coords);
					        minimapShow(coords);		
					        
					        getRealTrading();
					        
							/*
							// 주소-좌표 변환 객체를 생성합니다
							let geocoder = new kakao.maps.services.Geocoder();

							// 주소로 좌표를 검색합니다
							geocoder.addressSearch(keyword, function(result, status) {				    
							     if (status === kakao.maps.services.Status.OK) {				    	
							        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
							        map.setCenter(coords);
							        
							        jibunDetails(coords);
							        minimapShow(coords);		
							        
							        getRealTrading();
							    } else {
							    	console.log("주소 검색 실패");
							    }
							});
							*/
						}
					}
				}

				/*
				// 지도에 마커를 표시하는 함수입니다
				function displayMarker(place) {

					// 마커를 생성하고 지도에 표시합니다
					var marker = new kakao.maps.Marker({
						map: map,
						position: new kakao.maps.LatLng(place.y, place.x)
					});

					// 마커에 클릭이벤트를 등록합니다
					kakao.maps.event.addListener(marker, 'click', function () {
						// 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
						infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
						infowindow.open(map, marker);
					});
				}
				*/
			}
			
			

			$('a.share').click(function () {				
				var sampleTextarea = document.createElement("textarea");
				document.body.appendChild(sampleTextarea);
				sampleTextarea.value = EXTERNAL_LINK_URL; //save main text in it
				sampleTextarea.select(); //select textarea contenrs
				document.execCommand("copy");
				document.body.removeChild(sampleTextarea);
				alert('매물 상세페이지 URL이 클립보드에 복사 되었습니다.');
			});

			$('a.zoom_in').click(function () {
				var level = map.getLevel();
				if (level <= 2) return;

				map.setLevel(level - 1);
				//console.log(map.getLevel());
			});

			$('a.zoom_out').click(function () {
				var level = map.getLevel();
				if (level >= 10) return;

				map.setLevel(level + 1);
				//console.log(map.getLevel());
			});

			$('a.search').click(function () {
				var frm = $('#frmFilter');

				frm.find('input[name=swX]').val('');
				frm.find('input[name=swY]').val('');
				frm.find('input[name=neX]').val('');
				frm.find('input[name=neY]').val('');
				frm.find('input[name=page]').val(1);

				var formdata = frm.serializeObject();
				//alert(JSON.stringify(formdata));

				$.get('/forsale/tab1', formdata, function (result) {
					//console.log(result);
					$('div.tab1').html(result);
					imgResizeOut(".tabCon_wrap .thumb img");
					
					//$('#minimap_container').hide();
				});

				//마커 그리기.
				if (clusterer != null) {
					//마커 초기화.
					clusterer.clear();

					// 데이터를 가져오기 위해 jQuery를 사용합니다
					// 데이터를 가져와 마커를 생성하고 클러스터러 객체에 넘겨줍니다
					$.get("/forsale/rest/getSalePositions", formdata, function (data) {
						//alert(JSON.stringify(data));
						// 데이터에서 좌표 값을 가지고 마커를 표시합니다
						// 마커 클러스터러로 관리할 마커 객체는 생성할 때 지도 객체를 설정하지 않습니다
						var markers = $(data.positions).map(function (i, position) {
							//alert(position.lat + '...' + position.lng);
							return new kakao.maps.Marker({
								position: new kakao.maps.LatLng(position.lat, position.lng)
							});
						});

						//alert(JSON.stringify(markers));
						// 클러스터러에 마커들을 추가합니다
						clusterer.addMarkers(markers);
					});
				}
			});

			$('a[data-tab^=tab]').click(function () {
				if ($(this).data('tab') != 'tab1') {
					if (!isAuthenticated) {
						event.preventDefault();
						//$('a[data-tab=tab1]').trigger('click');
						$('a[data-lp="04l01p"]').trigger('click');
						return false;
					}
				}
			});

			//매물 상세.
			$("body").on("click", ".tabCon_wrap .list .menu", function () {
				forsaleDetail($(this).data('rid'));
			});

			//화면 로딩시 매물번호가 넘어오면 상세정보 보여주기.
			var loadingRid = /*[[${form.rid}]]*/ '';
			if (loadingRid && loadingRid.length > 0) {
				$('div.tab0').find('a:first').trigger('click');
				forsaleDetail(loadingRid);
				//alert(location.href);
				history.replaceState(null, '', location.href.replace('&rid=', '&r='));	//새로고침시 상세정보가 다시 뜨지 않도록 히스토리를 변경해줌.
			}

			//로딩시 매물목록
			$('a.search').trigger('click');
			
			
			function jibunDetails(latlng) {
				$.get('https://polygon.disco.re/get_pnu_by_latlng2/?lat=' + latlng.getLat() + '&lng=' + latlng.getLng() + '&spec=goon', {}, function (pnu) {
					console.log(pnu);
					
						// 토지대장
						$.get('https://data.disco.re/home/land_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);
							$('#land_forest_info_area').text(data.area);
							$('#land_forest_info_purpose').text(data.purpose);
							$('#p6').text(data.p6);
							$('#p10').text(data.p10);
							$('#owner_gbn').text(data.owner_gbn);
							$('#days').text(data.days);
							$('#why').text(data.why);
							$('#p16').text(data.p16);
							$('#p12').text(data.p12);
							$('#p14').text(data.p14);

							let info_main = data.land_use_planning_info_main;
							if (info_main != null && info_main.length > 0) {
								info_main = info_main.split(',');
							}

							let info_main_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
							let info_main_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
							let info_main_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

							$('#info_main_0').text(info_main_0);
							$('#info_main_1').text(info_main_1);
							$('#info_main_2').text(info_main_2);

							let info_etc = data.land_use_planning_info_etc;
							if (info_etc != null && info_etc.length > 0) {
								info_etc = info_etc.split(',');
							}

							let info_etc_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
							let info_etc_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
							let info_etc_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

							$('#arch_info_0').text(info_etc_0);
							$('#arch_info_1').text(info_etc_1);
							$('#arch_info_2').text(info_etc_2);
						});

						$.get('https://data.disco.re/home/arch_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);
							let html = '';
							if (data.overall_title_section.length > 0) {
								let build_info = data.overall_title_section[0];

								$('#dpa_overall_b1').text(build_info.b10 != null ? build_info.b10 : "-");

								$('#dpa_overall_a1').text(build_info.b32 != null ? build_info.b32 : "-");
								$('#dpa_overall_a1_1').text(build_info.b33 != null ? build_info.b33 : "-");

								$('.dpa-c-name').text(build_info.b32 != null ? build_info.b32 : "-");

								$('#dpa_overall_a2').text(build_info.b25 != null ? build_info.b25 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.b26 + '㎡</span><br><span>(건폐율 ' + build_info.b27 + '%)</span>';
								$('#dpa_overall_a3').html(html);

								$('#dpa_overall_b2').text(build_info.b28 != null ? build_info.b28 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.b29 + '㎡</span><br><span>(용적률 ' + build_info.b30 + '%)</span>';
								$('#dpa_overall_b3').html(html);

								$('#dpa_overall_c3_0').text(build_info.b34 != null ? build_info.b34 : "-");
								$('#dpa_overall_c3_1').text(build_info.b35 != null ? build_info.b35 : "-");
								$('#dpa_overall_c3_2').text(build_info.b56 != null ? build_info.b56 : "-");

								$('#dpa_overall_a5').text(build_info.b19 != null ? build_info.b19 : "-");

								$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
								$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
								$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
								$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");

								$('#dpaz_value_1').text(build_info.b44 != null ? build_info.b44 + "대" : "-");
								$('#dpaz_value_2').text(build_info.b46 != null ? build_info.b46 + "대" : "-");
								$('#dpaz_value_3').text(build_info.b40 != null ? build_info.b40 + "대" : "-");
								$('#dpaz_value_4').text(build_info.b42 != null ? build_info.b42 + "대" : "-");

								let temp_b48 = build_info.b48.substr(0, 4) + "년 " + build_info.b48.substr(4, 2) + "월 " + build_info.b48.substr(6, 2) + "일";
								$('#dpad_value1').text(build_info.b48 != null ? temp_b48 : "-");
								let temp_b49 = build_info.b49.substr(0, 4) + "년 " + build_info.b49.substr(4, 2) + "월 " + build_info.b49.substr(6, 2) + "일";
								$('#dpad_value2').text(build_info.b49 != null ? temp_b49 : "-");
								let temp_b50 = build_info.b50.substr(0, 4) + "년 " + build_info.b50.substr(4, 2) + "월 " + build_info.b50.substr(6, 2) + "일";
								$('#dpad_value3').text(build_info.b50 != null ? temp_b50 : "-");

							} else {
								console.log(data.title_section)
								let build_info = data.title_section[0];

								$('#dpa_overall_b1').text(build_info.a23 != null ? build_info.a23 : "-");

								$('#dpa_overall_a1').text(build_info.a36 != null ? build_info.a36 : "-");
								$('#dpa_overall_a1_1').text(build_info.a37 != null ? build_info.a37 : "-");
								$('#dpa_title_b5_1').text(build_info.a33 != null ? build_info.a33 : "-");
								$('#dpa_title_b5_2').text(build_info.a39 != null ? build_info.a39 : "-");

								$('#dpa_overall_c2').text(build_info.a43 != null ? build_info.a43 + "m" : "-");
								$('#dpa_overall_c5').text(build_info.a44 != null ? build_info.a44 + "/" + build_info.a45 : "-");

								$('.dpa-c-name').text(build_info.a36 != null ? build_info.a36 : "-");

								$('#dpa_overall_a2').text(build_info.a26 != null ? build_info.a26 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.a27 + '㎡</span><br><span>(건폐율 ' + build_info.a28 + '%)</span>';
								$('#dpa_overall_a3').html(html);

								$('#dpa_overall_b2').text(build_info.a29 != null ? build_info.a29 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.a30 + '㎡</span><br><span>(용적률 ' + build_info.a31 + '%)</span>';
								$('#dpa_overall_b3').html(html);

								$('#dpa_overall_c3_0').text(build_info.a41 != null ? build_info.a41 : "-");
								$('#dpa_overall_c3_1').text(build_info.a42 != null ? build_info.a42 : "-");
								$('#dpa_overall_c3_2').text(build_info.a67 != null ? build_info.a67 : "-");

								$('#dpa_overall_a5').text(build_info.a17 != null ? build_info.a17 : "-");

								$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
								$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
								$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
								$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");

								$('#dpaz_value_1').text(build_info.a55 != null ? build_info.a55 + "대" : "-");
								$('#dpaz_value_2').text(build_info.a57 != null ? build_info.a57 + "대" : "-");
								$('#dpaz_value_3').text(build_info.a51 != null ? build_info.a51 + "대" : "-");
								$('#dpaz_value_4').text(build_info.a53 != null ? build_info.a53 + "대" : "-");

								$('#dpal_value1').text(build_info.a46 != null ? build_info.a46 : "-");
								$('#dpal_value2').text(build_info.a47 != null ? build_info.a47 : "-");

								let temp_a59 = build_info.a59.substr(0, 4) + "년 " + build_info.a59.substr(4, 2) + "월 " + build_info.a59.substr(6, 2) + "일";
								$('#dpad_value1').text(build_info.a59 != null ? temp_a59 : "-");
								let temp_a60 = build_info.a60.substr(0, 4) + "년 " + build_info.a60.substr(4, 2) + "월 " + build_info.a60.substr(6, 2) + "일";
								$('#dpad_value2').text(build_info.a60 != null ? temp_a60 : "-");
								let temp_a61 = build_info.a61.substr(0, 4) + "년 " + build_info.a61.substr(4, 2) + "월 " + build_info.a61.substr(6, 2) + "일";
								$('#dpad_value3').text(build_info.a61 != null ? temp_a61 : "-");

								$.get('https://data.disco.re/home/arch_floor_list/?key=' + build_info.a1, {}, function (subData) {
									console.log(subData);
									let subHtml = '';
									if (subData.length > 0) {
										subData.forEach(item => {
											subHtml += '<div class="rfc-cool-grey" style="width:auto;padding:7px 20px;font-size:14px;">';
											subHtml += '	<div style="display:table;">';
											subHtml += '		<div style="position:relative;line-height:32px;display:table-row;">';
											subHtml += '			<span style="display:table-cell;background:#afbed7;width:27px;display: inline-block;height: 20px;text-align: center;line-height:21px;color: #fff;border-radius:10px;">';
											subHtml += item.d31.substr(0, 1);
											subHtml += '			</span>';
											subHtml += '			<span style="display:table-cell;min-width:70px;font-size: 16px; padding:0 5px;text-align:middle;" class="rf3_text1">';
											subHtml += item.floor;
											subHtml += '			</span>';
											subHtml += '			<span style="display:table-cell;width:auto;text-align:left;line-height: 20px;">';
											subHtml += item.d27 + ' · ' + item.d28;
											subHtml += '			</span>';
											subHtml += '		</div>';
											subHtml += '	</div>';
											subHtml += '	<div style="width:100%;">';
											subHtml += item.d24;
											subHtml += ' · ';
											subHtml += '		<span style="display: inline-block;">';
											subHtml += item.d29 + '㎡';
											subHtml += '		</span>';
											subHtml += '	</div>';
											subHtml += '</div>';
											subHtml += '<div class="ifs-tab-bar"></div>';
										});

										$('#dpaf_data_list').html(subHtml);
									}
								});
							}
						});

						$.get('https://data.disco.re/home/get_land_history/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);

							let html = '';
							data.reverse().forEach(item => {
								html += '<div style="display: table-row;line-height: 48px;">';
								html += '	<div style="display: table-cell;width:40%;text-align:left;font-size:14px;color:#50555a;padding-left:12px;">';
								html += item.move_date;
								html += '	</div>';
								html += '	<div style="display: table-cell;width:60%;text-align:left;font-size:14px;color:#1e1e23;">';
								html += item.reason;
								html += '	</div>';
								html += '</div>';
							});
							$('#land_history').html(html);
						});

						// 실거래가 목록
						$.get('/forsale/rest/tradings/getListFromPnu?pnu=' + pnu.pnu, {}, function (data) {
							console.log("실거래가목록2-1");
							console.log(data);

							$('#trp-detail-period-cnt').text('(' + data.length + '건)');

							let html = '';
							if (data.length > 0) {
								data.forEach(item => {
									html += '<div class="detail_tradings_table2">';
									html += '	<div class="detail_tradings_table_row">';
									html += '		<div class="detail_tradings_table_cell2" style="width: 22%;">';
									html += '`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '.' + item.dealDay;
									html += '		</div>';
									html += '		<div class="detail_tradings_table_cell2" style="width: 20%;">';
									html += '			<span data-area="total" style="display: inline;">';
									html += numComma(item.dealAmount) + "만";
									html += '			</span>';
									html += '		</div>';
									html += '		<div class="detail_tradings_table_cell2" style="width: auto;">';
									html += item.floor + '층 ' + item.floor + '**호';
									html += '		</div>';
									html += '		<div class="detail_tradings_table_cell2" style="width: 90px;"></div>';
									html += '	</div>';
									html += '</div>';
								});
							} else {
								html += '<div class="detail_tradings_table2">';
								html += '	<div class="detail_tradings_table_row">';
								html += '	<span>';
								html += '		실거래 내역이 없습니다.';
								html += '	</span>';
								html += '	</div>';
								html += '</div>';
							}
							$('#detail_tradings_table_conts').html(html);
						});


						$.get('https://data.disco.re/home/land_price/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);
							xLabels.length = 0;
							datapoints.length = 0;

							minValue = data[0][2];
							maxValue = data[0][2];

							data.forEach(item => {
								xLabels.push('`' + (item[0] + '').substr(2, 2) + '년');
								datapoints.push(item[2]);
								if (minValue > item[2])
									minValue = item[2];
								if (maxValue < item[2])
									maxValue = item[2];
							});

							gongChart.update();
						});
				});

				$.get('https://polygon.disco.re/get_land_by_latlng/?lat=' + latlng.getLat() + '&lng=' + latlng.getLng(), {}, function (result) {
					console.log(result.address);
					
					$('#jibunAddress').text(result.address);
					
						let tempPoly = null;
						tempPoly = parse_land_polygon_value(result.polygon);

						// 지도에 표시할 다각형을 생성합니다
						polygon = new kakao.maps.Polygon({
							path: tempPoly[0],//polygonPath, // 그려질 다각형의 좌표 배열입니다
							strokeWeight: 2, // 선의 두께입니다 
							strokeColor: '#75B8FA', // 선의 색깔입니다
							strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
							strokeStyle: 'shortdash', // 선의 스타일 입니다
							fillColor: '#CFE7FF', // 채우기 색깔입니다
							fillOpacity: 0.7  // 채우기 불투명도 입니다  

						});

						// 지도에 다각형을 표시합니다
						polygon.setMap(map);					
				});	
			}

			//등록매물
			var formdata = { saleType: $('#frmFilter').find('#saleType').val() };
			$.get('/forsale/tab2', formdata, function (result) {
				$('div.tab2').html(result);
			});

			//포인트 목록.
			$.get('/forsale/tab4', formdata, function (result) {
				$('div.pointList_wrap').html(result);
				$(".selectBox select").selectmenu();
			});

			$('a.getoffer').click(function () {
				//alert( $(this).data('rid') );
				var rid = $(this).data('rid');
				var formdata = { rid: rid };
				$.get('/forsale/agentList', formdata, function (result) {
					$('ul.agent-list').html(result);
				});
			});

			$('#frmItem1').find('select[name=itemCount]').selectmenu({
				change: function (event, ui) {
					var itemCount = $(this).val();
					if (itemCount == '') itemCount = 0;
					$('p.buyPoint1').text((itemCount * 10000).toLocaleString() + '원');
				}
			});

			$('a.item1, a.item2').click(function () {
				var itemType = $(this).hasClass('item1') ? '1' : '2';
				var form = (itemType == '1') ? $('#frmItem1') : $('#frmItem2');

				var formdata = form.serializeObject();
				formdata.itemType = itemType;
				//alert(JSON.stringify(formdata));

				if (itemType == '1' && formdata.itemCount == '') {
					alert('구매 수량을 선택하세요.');
					return;
				}
				else if (itemType == '2' && formdata.saleType == '') {
					alert('매물 유형을 선택하세요.');
					return;
				}

				if (itemType == '2') formdata.itemCount = 1;

				if (!confirm('전환하시겠습니까?')) return;

				$.post('/point/rest/buyItem', formdata, function (result) {
					alert(result.message);
					if (result.code == 0) {
						location.reload();
					}
				}).error(function () {
					alert('처리중 오류가 발생하였습니다.');
				})
			});

			//신고하기.
			$('a[data-lp="report"]').click(function () {
				var rid = $(this).data('rid');
				var saleNo = $('span[data-field="saleNo"]').text();

				var form = $('#frmReport');
				form.resetForm();	//초기화.

				form.find('h3.saleNo').text('매물번호 ' + saleNo);
				form.find('input[name=rid]').val(rid);
			});

			//신고하기 저장
			$('div.report_wrap').find('a.saveReport').click(function () {
				var form = $('#frmReport');

				var formdata = form.serializeObject();
				//alert(JSON.stringify(formdata));
				if (formdata.rid == '') {
					alert('잘못된 매물번호입니다.'); return;
				}
				else if (formdata.agentId != undefined && formdata.agentId == '') {
					alert('해당 중개사를 선택하세요.'); return;
				}
				else if (formdata.reportType == '') {
					alert('신고유형을 선택하세요.'); return;
				}

				if (!confirm('신고하시겠습니까?')) return;

				$.post('/report/rest/save', formdata, function (result) {
					//alert( JSON.stringify(result) );
					alert(result.message);
					if (result.code == 0) {
						$('a.wrap_close').trigger('click');
					}
				});
			});	//End-of-$('div.report_wrap').find('a.saveReport').click(function() {
			

			//동명으로 검색 이동.
			$('a.dongSearch').click(function () {
				if ($('#searchSido').val() == '0') {
					alert('시·도를 선택해주세요.');
					return;
				}
				
				let kw = $('#searchSido').find(':selected').text() + ($('#searchSigungu').val() != 0 ? $('#searchSigungu').find(':selected').text() : '') + ($('#searchEmd').val() != 0 ? $('#searchEmd').find(':selected').text() : '');
				
				// 장소 검색 객체를 생성합니다
				var ps = new kakao.maps.services.Places();

				// 키워드로 장소를 검색합니다
				ps.keywordSearch(kw, placesSearchCB);

				// 키워드 검색 완료 시 호출되는 콜백함수 입니다
				function placesSearchCB(data, status, pagination) {
					if (status === kakao.maps.services.Status.OK) {

						// 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
						// LatLngBounds 객체에 좌표를 추가합니다
						var bounds = new kakao.maps.LatLngBounds();

						for (var i = 0; i < data.length; i++) {
							//displayMarker(data[i]);    
							bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));
						}

						// 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
						map.setBounds(bounds);
						
						/*
						var moveLatLon = new kakao.maps.LatLng(data[0].y, data[0].x);

						// 지도 중심을 부드럽게 이동시킵니다
						// 만약 이동할 거리가 지도 화면보다 크면 부드러운 효과 없이 이동합니다
						map.panTo(moveLatLon);

						let level = map.getLevel();

						if (isRealTradings) {
							removeRealTrading();

							//console.log(level);
							//console.log(boundbox);
							if (level >= 6) {
								realTransCluster(map);
							} else {
								getRealTrading();
							}
						}
						*/
					}
				}

				/*
				var geocoder = new kakao.maps.services.Geocoder();
				geocoder.addressSearch( $('#w').val(), function(result, status) {
					if (status === kakao.maps.services.Status.OK) {
						var geoaddress = result[0];
						var addressDetail = (geoaddress.address==null)? geoaddress.road_address : geoaddress.address;
						$('ul.address').find('li.sido').text(addressDetail.region_1depth_name);
						$('ul.address').find('li.gugun').text(addressDetail.region_2depth_name);
						$('ul.address').find('li.dong').text(addressDetail.region_3depth_name);
						//alert(geoaddress.x + '...' + geoaddress.y);
						var moveLatLon = new kakao.maps.LatLng(geoaddress.y, geoaddress.x);
						// 지도 중심을 이동 시킵니다
						map.setCenter(moveLatLon);
					}
					else if (status === kakao.maps.services.Status.ZERO_RESULT) {
						$('#w').val('');
						alert('검색결과 없음(동명으로 검색)');
					}
				});
				*/
			});	//End-of-$('a.dongSearch').click(function() {

			function showRealTradingsMarker(item, itemIdx) {
				let tFillColor = '#15C4B2';
				let tStrokeColor = '#15C4B2';

				let tradeType = '';
				let saleDetailType = '';

				let contentStyle = '';
				let price = '';
				if (item.saleDetailType === 'a1') {
					saleDetailType = '아파트';
					if (item.tradeType === 'A') {
						tradeType = '매매';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleA';
						//price = numComma(item.dealAmount);
						price = item.dealAmount;
					} else if (item.tradeType === 'B') {
						tradeType = '월세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleB';
						price = numComma(item.deposit) + '/' + numComma(item.monthlyRent);
					} else if (item.tradeType === 'C') {
						tradeType = '전세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleC';
						//price = numComma(item.deposit);
						price = item.deposit;
					}
				} else if (item.saleDetailType === 'a2') {
					saleDetailType = '오피스텔';
					if (item.tradeType === 'A') {
						tradeType = '매매';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleA';
						//price = numComma(item.dealAmount);
						price = item.dealAmount;
					} else if (item.tradeType === 'B') {
						tradeType = '월세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleB';
						price = numComma(item.deposit) + '/' + numComma(item.monthlyRent);
					} else if (item.tradeType === 'C') {
						tradeType = '전세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleC';
						//price = numComma(item.deposit);
						price = item.deposit;
					}
				} else if (item.saleDetailType === 'a3') {
					saleDetailType = '분양·입주권';
					tradeType = '매매';

					tFillColor = '#15C4B2';
					tStrokeColor = '#15C4B2';

					contentStyle = 'overlay_titleA';
					//price = numComma(item.dealAmount);
					price = item.dealAmount;
				} else if (item.saleDetailType === 'h2') {
					saleDetailType = '연립·다세대';
					if (item.tradeType === 'A') {
						tradeType = '매매';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleA';
						//price = numComma(item.dealAmount);
						price = item.dealAmount;
					} else if (item.tradeType === 'B') {
						tradeType = '월세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleB';
						price = numComma(item.deposit) + '/' + numComma(item.monthlyRent);
					} else if (item.tradeType === 'C') {
						tradeType = '전세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleC';
						//price = numComma(item.deposit);
						price = item.deposit;
					}
				} else if (item.saleDetailType === 'h1') {
					saleDetailType = '단독·다가구';
					if (item.tradeType === 'A') {
						tradeType = '매매';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleA';
						//price = numComma(item.dealAmount);
						price = item.dealAmount;
					} else if (item.tradeType === 'B') {
						tradeType = '월세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleB';
						price = numComma(item.deposit) + '/' + numComma(item.monthlyRent);
					} else if (item.tradeType === 'C') {
						tradeType = '전세';

						tFillColor = '#15C4B2';
						tStrokeColor = '#15C4B2';

						contentStyle = 'overlay_titleC';
						//price = numComma(item.deposit);
						price = item.dealAmount;
					}
				} else if (item.saleDetailType === 'l1') {
					saleDetailType = '토지';
					tradeType = '매매';

					tFillColor = '#15C4B2';
					tStrokeColor = '#15C4B2';

					contentStyle = 'overlay_titleD';
					//price = numComma(item.dealAmount);
					price = item.dealAmount;
				} else if (item.saleDetailType === 'l3') {
					saleDetailType = '공장·창고';
					tradeType = '매매';

					tFillColor = '#15C4B2';
					tStrokeColor = '#15C4B2';

					contentStyle = 'overlay_titleE';
					//price = numComma(item.dealAmount);
					price = item.dealAmount;
				} else if (item.saleDetailType === 's1') {
					saleDetailType = '상가·업무';
					tradeType = '매매';

					tFillColor = '#15C4B2';
					tStrokeColor = '#15C4B2';

					contentStyle = 'overlay_titleF';
					//price = numComma(item.dealAmount);
					price = item.dealAmount;
				}

				let temp_meter = Number(item.useArea).toFixed(2);
				let temp_pyeong = Number(item.useArea / 3.3058).toFixed(0);

				if (itemIdx < 5) {
					var circle = new kakao.maps.Circle({
						center: new kakao.maps.LatLng(item.posY, item.posX),  // 원의 중심좌표 입니다 
						radius: 5, // 미터 단위의 원의 반지름입니다 
						strokeWeight: 2, // 선의 두께입니다 
						strokeColor: tStrokeColor, // 선의 색깔입니다
						strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다    
						fillColor: tFillColor, // 채우기 색깔입니다
						fillOpacity: 1  // 채우기 불투명도 입니다   
					});

					realTradingPoiTopArr.push(circle);

					// 마커가 지도 위에 표시되도록 설정합니다
					circle.setMap(map);
					kakao.maps.event.addListener(circle, 'click', function () {
						isOverlayClick = true;
					
						if (isOverlayClick) {							
							realTradingPoiTopArr.forEach((item, idx) => {
								if (item === circle) {
									//if ($('.overlay_wrap').eq(idx).parent().is(':visible')) {console.log("45545");
										$('.overlay_wrap').eq(idx).parent().show();
										
										$('.overlay_wrap').trigger('click');
									//}
								}								
							});

							
						}
					});

					//console.log(item);`
					let content = '<div class="overlay_wrap">' +
						'    <div class="overlay_pnu" style="display:none;">' + item.pnu + '</div>' +
						'    <div class="overlay_metaX" style="display:none;">' + item.posX + '</div>' +
						'    <div class="overlay_metaY" style="display:none;">' + item.posY + '</div>' +
						'    <div class="overlay_info">' +
						'        <div class="' + contentStyle + '">' +
						'            ' + tradeType + ' | ' + saleDetailType +
						'        </div>' +
						'        <div class="overlay_body">' +
						'            <div class="overlay_desc">' +
						'                <div>`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '/' + '<span class="area_meter">' + temp_meter + '</span>' + '<span class="area_pyeong">' + temp_pyeong + '</span><span class="area_unit">㎡</span></div>' +
						'                <div>' +
						'                	<span class="unit_meter_price">' + numComma((Number(price) / temp_meter).toFixed(0)) + '만원/㎡당</span>' +
						'					<span class="unit_pyeong_price">' + numComma((Number(price) / temp_pyeong).toFixed(0)) + '만원/평당</span>' +
						'					<span class="total_price">' + numComma(price) + '만원</span>' +
						'				 </div>' +
						'            </div>' +
						'        </div>' +
						'    </div>' +
						'</div>';

					// 커스텀 오버레이를 생성합니다
					let customOverlay = new kakao.maps.CustomOverlay({
						position: circle.getPosition(),
						content: content,
						clickable: true
					});

					realTradingOverArr.push(customOverlay);

					// 커스텀 오버레이를 지도에 표시합니다
					customOverlay.setMap(map);
				} else {
					var circle = new kakao.maps.Circle({
						center: new kakao.maps.LatLng(item.posY, item.posX),  // 원의 중심좌표 입니다 
						radius: 5, // 미터 단위의 원의 반지름입니다 
						strokeWeight: 2, // 선의 두께입니다 
						strokeColor: tStrokeColor, // 선의 색깔입니다
						strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다    
						fillColor: tFillColor, // 채우기 색깔입니다
						fillOpacity: 1  // 채우기 불투명도 입니다   
					});

					realTradingPoiArr.push(circle);

					// 마커가 지도 위에 표시되도록 설정합니다
					circle.setMap(map);

					kakao.maps.event.addListener(circle, 'mouseover', makeOverListener(map, circle, item));
					kakao.maps.event.addListener(circle, 'mouseout', makeOutListener(map, circle, item));
				}

				let customOverlaySub = null;
				
				function makeOverListener() {
					return function () {
						//console.log(item);`
						let content = '<div class="overlay_wrap">' +
							'    <div class="overlay_pnu" style="display:none;">' + item.pnu + '</div>' +
							'    <div class="overlay_metaX" style="display:none;">' + item.posX + '</div>' +
							'    <div class="overlay_metaY" style="display:none;">' + item.posY + '</div>' +
							'    <div class="overlay_info">' +
							'        <div class="' + contentStyle + '">' +
							'            ' + tradeType + ' | ' + saleDetailType +
							'        </div>' +
							'        <div class="overlay_body">' +
							'            <div class="overlay_desc">' +
							'                <div>`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '/' + '<span class="area_meter">' + temp_meter + '</span>' + '<span class="area_pyeong">' + temp_pyeong + '</span><span class="area_unit">㎡</span></div>' +
							'                <div>' +
							'                	<span class="unit_meter_price">' + numComma((Number(price) / temp_meter).toFixed(0)) + '만원/㎡당</span>' +
							'					<span class="unit_pyeong_price">' + numComma((Number(price) / temp_pyeong).toFixed(0)) + '만원/평당</span>' +
							'					<span class="total_price">' + numComma(price) + '만원</span>' +
							'				 </div>' +
							'            </div>' +
							'        </div>' +
							'    </div>' +
							'</div>';

						// 커스텀 오버레이를 생성합니다
						customOverlaySub = new kakao.maps.CustomOverlay({
							position: circle.getPosition(),
							content: content,
						});						
						// 커스텀 오버레이를 지도에 표시합니다
						customOverlaySub.setMap(map);
					};
				}

				function makeOutListener() {
					return function () {
						customOverlaySub.setMap(null);
					};
				}

			}

			$("#selSaleDetailType").on("change", function () {
				if ($("#selSaleDetailType").val() != '') {
					if ($("#selSaleDetailType").val() != 'all') {
						selSaleDetailType = $("#selSaleDetailType").val();
					} else {
						selSaleDetailType = '';
					}

					removeRealTrading();
					getRealTrading();
				}
			});

			$("#selTradeType").on("change", function () {
				if ($("#selTradeType").val() != '') {
					if ($("#selTradeType").val() != 'all') {
						selTradeType = $("#selTradeType").val();
					} else {
						selTradeType = '';
					}

					removeRealTrading();
					getRealTrading();
				}
			});

			function removeRealTrading() {
				if (realTradingPoiArr.length > 0) {
					realTradingPoiArr.forEach(function (realTradingPoi) {
						realTradingPoi.setMap(null);
					});
				}
				if (realTradingPoiTopArr.length > 0) {
					realTradingPoiTopArr.forEach(function (realTradingPoi) {
						realTradingPoi.setMap(null);
					});
				}
				if (realTradingOverArr.length > 0) {
					realTradingOverArr.forEach(function (realTradingOver) {
						realTradingOver.setMap(null);
					});
				}
			}
			
			function removeRealTrading2() {				
				if (realTradingOverArr.length > 0) {
					realTradingOverArr.forEach(function (realTradingOver) {
						realTradingOver.setMap(null);
					});
				}
			}

			let dealYear = '2023';
			let dealYearStart = '2022';
			let dealYearEnd = '2023';
			let selSaleDetailType = '';
			let selTradeType = 'A';


			let realTradingPoiRemoveArr = [];
			// 실거래가 팝업
			function getRealTrading() {
				let boundbox = map.getBounds().toString().replace('((', '').replace('))', '').replace('(', '').replace(')', '').replaceAll(' ', '');
				let boxArr = boundbox.split(',');	//console.log(boxArr);				
				let tempBox = 'BOX(' + boxArr[1] + ',' + boxArr[0] + ',' + boxArr[3] + ',' + boxArr[2] + ')';

				$.ajax({
					type: "GET",
					url: "http://api.vworld.kr/req/data",
					dataType: "jsonp",
					data: {
						request: "GetFeature",						
						data: "LT_C_ADSIDO_INFO",	//광역시도 검색
						key: vworld_key,
						geomFilter: tempBox,
						crs: "EPSG:4326",
						size: 100,
						geometry: false
					},
					async: false,
					cache: false,
					success: function (result) {
						console.log("test:::getRealTrading()"); console.log(result);
						if (result.response.status === 'OK' && result.response.record.total > 0) {
							//console.log(result.response.result.featureCollection);

							let level = map.getLevel();
							/*
							let emdArr = result.response.result.featureCollection.features;
							let cond = "(";
							emdArr.forEach((item, idx) => {
								console.log(item.properties.emd_cd);
								
								cond += "'";
								cond += item.properties.emd_cd;
								cond += "'";
								
								if (idx < emdArr.length-1) {
									cond += ",";	
								}
							});
							cond += ")";
							//console.log(cond);
							*/

							let sidoArr = result.response.result.featureCollection.features;

							let rtDTO = new Object();
							//rtDTO.emdCond = cond;

							rtDTO.selSaleDetailType = selSaleDetailType;
							rtDTO.selTradeType = selTradeType;
							rtDTO.dealYearStart = dealYearStart;
							rtDTO.dealYearEnd = dealYearEnd;
							rtDTO.posMinX = boxArr[1];
							rtDTO.posMinY = boxArr[0];
							rtDTO.posMaxX = boxArr[3];
							rtDTO.posMaxY = boxArr[2];
							console.log(realTradingPoiArr.length);
							if (realTradingPoiArr.length > 0) {
								realTradingPoiArr.forEach(function (realTradingPoi, idx) {//console.log("realTradingPoi");console.log(realTradingPoi.getPosition().Ma);
									//realTradingPoi.setMap(null);
									if (boxArr[1] > realTradingPoi.getPosition().La || realTradingPoi.getPosition().La > boxArr[3] || boxArr[0] > realTradingPoi.getPosition().Ma || boxArr[2] < realTradingPoi.getPosition().Ma) {
										realTradingPoiArr.splice(idx, 1);
									}
								});
							}
							console.log(realTradingPoiArr.length);
							sidoArr.forEach((item, idx) => {
								rtDTO.sidoCode = item.properties.ctprvn_cd;

								$.ajax({
									url: '/forsale/rest/tradings/getListOfficetel1',
									type: 'GET',
									data: rtDTO,
									dataType: "json",
									async: true,
									cache: false,
									success: function (result) {
										console.log(result);
										result.forEach((item, itemIdx) => { //console.log("itemIdx : " + itemIdx);
											if (item.posX != null && item.posY != null) {
												let boolPoi = false;
												if (realTradingPoiArr.length > 0) {
													realTradingPoiArr.forEach(function (realTradingPoi) {//console.log("realTradingPoi");console.log(realTradingPoi.getPosition().Ma);
														//realTradingPoi.setMap(null);
														if (realTradingPoi.getPosition().La == item.posX && realTradingPoi.getPosition().Ma == item.posY) {
															boolPoi = true;
														}
													});
												}
												//console.log(item.posY);
												if (!boolPoi) {
													showRealTradingsMarker(item, itemIdx);													
												}
											} else {
												console.log("좌표 없음");
												console.log(item.buildType);
												//console.log(item.saleDetailType);

												if (item.saleDetailType === 'l1') {
													let paramData = {
														serviceKey: data_go_key,
														pnu: item.pnu0,
														//startDt: item.dealMonth,
														stdrYear: item.dealMonth.substr(0, 4),
														//endDt: "209909",
														format: "json",
														numOfRows: "10000",
														pageNo: "1"
													};
													$.get('https://apis.data.go.kr/1611000/nsdi/LandCharacteristicsService/attr/getLandCharacteristics', paramData, function (data) {
														//console.log(data);
														//console.log(item.useArea);
														if (data.landCharacteristicss != 'undefined') {
															let temp = data.landCharacteristicss.field.filter(subItem => {
																//console.log(subItem);
																return Number(subItem.lndpclAr) === Number(item.useArea) && subItem.lndcgrCodeNm === item.buildType;
															});
															console.log(temp);
															if (temp.length > 0) {
																$.ajax({
																	type: "GET",
																	url: "http://api.vworld.kr/req/address",
																	dataType: "jsonp",
																	data: {
																		service: "address",
																		request: "getCoord",
																		format: "json",
																		crs: "EPSG:4326",
																		key: vworld_key,
																		type: "parcel",
																		address: item.sigungu + " " + temp[0].mnnmSlno
																	},
																	async: false,
																	cache: false,
																	success: function (result2) {//console.log(result2);	
																		if (result2.response.status === 'OK') {
																			rtDTO.rid = item.rid;
																			rtDTO.posX = result2.response.result.point.x;
																			rtDTO.posY = result2.response.result.point.y;

																			$.post("/forsale/rest/tradings/updateCoords", rtDTO, function (data, status) {
																				console.log("Data: " + data + "\nStatus: " + status);
																			});


																			let tFillColor = '#15C4B2';
																			let tStrokeColor = '#15C4B2';

																			var circle = new kakao.maps.Circle({
																				center: new kakao.maps.LatLng(result2.response.result.point.y, result2.response.result.point.x),  // 원의 중심좌표 입니다 
																				radius: 5, // 미터 단위의 원의 반지름입니다 
																				strokeWeight: 2, // 선의 두께입니다 
																				strokeColor: tStrokeColor, // 선의 색깔입니다
																				strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다    
																				fillColor: tFillColor, // 채우기 색깔입니다
																				fillOpacity: 1  // 채우기 불투명도 입니다   
																			});

																			realTradingPoiArr.push(circle);

																			// 마커가 지도 위에 표시되도록 설정합니다
																			circle.setMap(map);

																			if (itemIdx < 5) {
																				let content = '<div class="overlay_wrap">' +
																					'    <div class="overlay_info">' +
																					'        <div class="overlay_titleA">' +
																					'            매매 | 토지' +
																					'        </div>' +
																					'        <div class="overlay_body">' +
																					'            <div class="overlay_desc">' +
																					'                <div>`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '/' + '<span class="area1">' + Number(item.useArea).toFixed(2) + '㎡</span>' + '<span class="area2">' + Number(item.useArea / 3.3058).toFixed(0) + '평</span></div>' +
																					'                <div>' + item.dealAmount + '</div>' +
																					'            </div>' +
																					'        </div>' +
																					'    </div>' +
																					'</div>';

																				// 커스텀 오버레이를 생성합니다
																				let customOverlay = new kakao.maps.CustomOverlay({
																					position: circle.getPosition(),
																					content: content,

																				});

																				realTradingOverArr.push(customOverlay);

																				// 커스텀 오버레이를 지도에 표시합니다
																				customOverlay.setMap(map);
																			}
																		}
																	}
																});
															}
														}
													});
												} else if (item.saleDetailType === 'l3' || item.saleDetailType === 's1') {
													let paramData = {
														serviceKey: data_go_key,
														pnu: item.pnu0,
														//startDt: item.dealMonth,
														stdrYear: item.dealMonth.substr(0, 4),
														//endDt: "209909",
														format: "json",
														numOfRows: "10000",
														pageNo: "1"
													};
													$.get('https://apis.data.go.kr/1611000/nsdi/LandCharacteristicsService/attr/getLandCharacteristics', paramData, function (data) {
														console.log(data);
														//console.log(item.useArea);
														if (data.landCharacteristicss != 'undefined') {
															let temp = data.landCharacteristicss.field.filter(subItem => {
																//console.log(subItem);
																return Number(subItem.lndpclAr) === Number(item.groundArea);
															});
															console.log(temp);
															if (temp.length > 0) {
																$.ajax({
																	type: "GET",
																	url: "http://api.vworld.kr/req/address",
																	dataType: "jsonp",
																	data: {
																		service: "address",
																		request: "getCoord",
																		format: "json",
																		crs: "EPSG:4326",
																		key: vworld_key,
																		type: "parcel",
																		address: item.sigungu + " " + temp[0].mnnmSlno
																	},
																	async: false,
																	cache: false,
																	success: function (result2) {//console.log(result2);	
																		if (result2.response.status === 'OK') {
																			rtDTO.rid = item.rid;
																			rtDTO.posX = result2.response.result.point.x;
																			rtDTO.posY = result2.response.result.point.y;

																			$.post("/forsale/rest/tradings/updateCoords", rtDTO, function (data, status) {
																				console.log("Data: " + data + "\nStatus: " + status);
																			});


																			let tFillColor = '#15C4B2';
																			let tStrokeColor = '#15C4B2';

																			var circle = new kakao.maps.Circle({
																				center: new kakao.maps.LatLng(result2.response.result.point.y, result2.response.result.point.x),  // 원의 중심좌표 입니다 
																				radius: 5, // 미터 단위의 원의 반지름입니다 
																				strokeWeight: 2, // 선의 두께입니다 
																				strokeColor: tStrokeColor, // 선의 색깔입니다
																				strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다    
																				fillColor: tFillColor, // 채우기 색깔입니다
																				fillOpacity: 1  // 채우기 불투명도 입니다   
																			});

																			realTradingPoiArr.push(circle);

																			// 마커가 지도 위에 표시되도록 설정합니다
																			circle.setMap(map);

																			if (itemIdx < 5) {
																				let content = '<div class="overlay_wrap">' +
																					'    <div class="overlay_info">' +
																					'        <div class="overlay_titleA">' +
																					'            매매 | 상가' +
																					'        </div>' +
																					'        <div class="overlay_body">' +
																					'            <div class="overlay_desc">' +
																					'                <div>`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '/' + '<span class="area1">' + Number(item.useArea).toFixed(2) + '㎡</span>' + '<span class="area2">' + Number(item.useArea / 3.3058).toFixed(0) + '평</span></div>' +
																					'                <div>' + item.dealAmount + '</div>' +
																					'            </div>' +
																					'        </div>' +
																					'    </div>' +
																					'</div>';

																				// 커스텀 오버레이를 생성합니다
																				let customOverlay = new kakao.maps.CustomOverlay({
																					position: circle.getPosition(),
																					content: content,

																				});

																				realTradingOverArr.push(customOverlay);

																				// 커스텀 오버레이를 지도에 표시합니다
																				customOverlay.setMap(map);
																			}
																		}
																	}
																});
															}
														}
													});
												} else if (item.saleDetailType === 'h1') {

													let mainPrposCode = '01000';
													let detailPrposCode = '';
													if (item.buildType === '단독') {
														detailPrposCode = '01001';
													} else if (item.buildType === '다가구') {
														detailPrposCode = '01003';
													}
													let paramData = {
														serviceKey: data_go_key,
														pnu: item.pnu0,
														//startDt: item.dealMonth,
														//stdrYear: item.dealMonth.substr(0, 4),
														//endDt: "209909",
														mainPrposCode: mainPrposCode,
														detailPrposCode: detailPrposCode,
														format: "json",
														numOfRows: "10000",
														pageNo: "1"
													};
													$.get('https://apis.data.go.kr/1611000/nsdi/BuildingUseService/attr/getBuildingUse', paramData, function (data) {
														console.log(data);
														//console.log(item.useArea);
														if (data.buildingUses != 'undefined') {
															let temp = data.buildingUses.field.filter(subItem => {
																//console.log(subItem);
																return Number(subItem.buldTotar) === Number(item.useArea);
															});
															console.log(temp);
															if (temp.length > 0) {
																$.ajax({
																	type: "GET",
																	url: "http://api.vworld.kr/req/address",
																	dataType: "jsonp",
																	data: {
																		service: "address",
																		request: "getCoord",
																		format: "json",
																		crs: "EPSG:4326",
																		key: vworld_key,
																		type: "parcel",
																		address: item.sigungu + " " + temp[0].mnnmSlno
																	},
																	async: false,
																	cache: false,
																	success: function (result2) {//console.log(result2);	
																		if (result2.response.status === 'OK') {
																			rtDTO.rid = item.rid;
																			rtDTO.posX = result2.response.result.point.x;
																			rtDTO.posY = result2.response.result.point.y;

																			$.post("/forsale/rest/tradings/updateCoords", rtDTO, function (data, status) {
																				console.log("Data: " + data + "\nStatus: " + status);
																			});


																			let tFillColor = '#15C4B2';
																			let tStrokeColor = '#15C4B2';

																			var circle = new kakao.maps.Circle({
																				center: new kakao.maps.LatLng(result2.response.result.point.y, result2.response.result.point.x),  // 원의 중심좌표 입니다 
																				radius: 5, // 미터 단위의 원의 반지름입니다 
																				strokeWeight: 2, // 선의 두께입니다 
																				strokeColor: tStrokeColor, // 선의 색깔입니다
																				strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다    
																				fillColor: tFillColor, // 채우기 색깔입니다
																				fillOpacity: 1  // 채우기 불투명도 입니다   
																			});

																			realTradingPoiArr.push(circle);

																			// 마커가 지도 위에 표시되도록 설정합니다
																			circle.setMap(map);

																			if (itemIdx < 5) {
																				let content = '<div class="overlay_wrap">' +
																					'    <div class="overlay_info">' +
																					'        <div class="overlay_titleA">' +
																					'            매매 | 단독·다가구' +
																					'        </div>' +
																					'        <div class="overlay_body">' +
																					'            <div class="overlay_desc">' +
																					'                <div>`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '/' + '<span class="area1">' + Number(item.useArea).toFixed(2) + '㎡</span>' + '<span class="area2">' + Number(item.useArea / 3.3058).toFixed(0) + '평</span></div>' +
																					'                <div>' + item.dealAmount + '</div>' +
																					'            </div>' +
																					'        </div>' +
																					'    </div>' +
																					'</div>';

																				// 커스텀 오버레이를 생성합니다
																				let customOverlay = new kakao.maps.CustomOverlay({
																					position: circle.getPosition(),
																					content: content,

																				});

																				realTradingOverArr.push(customOverlay);

																				// 커스텀 오버레이를 지도에 표시합니다
																				customOverlay.setMap(map);
																			}
																		}
																	}
																});
															}
														}

													});
												} else {
													$.ajax({
														type: "GET",
														url: "http://api.vworld.kr/req/address",
														dataType: "jsonp",
														data: {
															service: "address",
															request: "getCoord",
															format: "json",
															crs: "EPSG:4326",
															key: vworld_key,
															type: "parcel",
															address: item.sigungu + " " + item.jibun
														},
														async: false,
														cache: false,
														success: function (result2) {//console.log(result2);	
															if (result2.response.status === 'OK') {
																rtDTO.rid = item.rid;
																rtDTO.posX = result2.response.result.point.x;
																rtDTO.posY = result2.response.result.point.y;

																$.post("/forsale/rest/tradings/updateCoords", rtDTO, function (data, status) {
																	console.log("Data: " + data + "\nStatus: " + status);
																});


																let tFillColor = '#15C4B2';
																let tStrokeColor = '#15C4B2';

																var circle = new kakao.maps.Circle({
																	center: new kakao.maps.LatLng(result2.response.result.point.y, result2.response.result.point.x),  // 원의 중심좌표 입니다 
																	radius: 5, // 미터 단위의 원의 반지름입니다 
																	strokeWeight: 2, // 선의 두께입니다 
																	strokeColor: tStrokeColor, // 선의 색깔입니다
																	strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다    
																	fillColor: tFillColor, // 채우기 색깔입니다
																	fillOpacity: 1  // 채우기 불투명도 입니다   
																});

																realTradingPoiArr.push(circle);

																// 마커가 지도 위에 표시되도록 설정합니다
																circle.setMap(map);

																if (itemIdx < 5) {
																	let content = '<div class="overlay_wrap">' +
																		'    <div class="overlay_info">' +
																		'        <div class="overlay_titleA">' +
																		'            매매 | 오피스텔' +
																		'        </div>' +
																		'        <div class="overlay_body">' +
																		'            <div class="overlay_desc">' +
																		'                <div>`' + item.dealMonth.substr(2, 2) + '.' + item.dealMonth.substr(4, 2) + '/' + '<span class="area1">' + Number(item.useArea).toFixed(2) + '㎡</span>' + '<span class="area2">' + Number(item.useArea / 3.3058).toFixed(0) + '평</span></div>' +
																		'                <div>' + item.dealAmount + '</div>' +
																		'            </div>' +
																		'        </div>' +
																		'    </div>' +
																		'</div>';

																	// 커스텀 오버레이를 생성합니다
																	let customOverlay = new kakao.maps.CustomOverlay({
																		position: circle.getPosition(),
																		content: content,

																	});

																	realTradingOverArr.push(customOverlay);

																	// 커스텀 오버레이를 지도에 표시합니다
																	customOverlay.setMap(map);
																}
															}
														}
													});
												}
											}
										});		
										// overlay Event Setting
										$('.overlay_wrap').on('click', overlayClickHandler);	
									},
									error: function (json) {
										console.log("error");
									}
								});
							});
						} else {
							alert("OpenAPI(읍면동) 연결이 실패하였습니다.");
						}
					}
				});
			}

			// 실거래가 표출
			let realTradingPoiArr = [];		//실거래가 point 배열
			let realTradingPoiTopArr = [];		//실거래가 상위 5개 point 배열
			let realTradingOverArr = new Array(5);	//실거래가 오버레이 팝업 배열
			
			// 실거래가 On/Off 클릭 이벤트
			let isRealTradings = true;
			$('#realTrans').click(function () {
				isRealTradings = !isRealTradings;

				if (isRealTradings) {
					$('.category_rtOn').css('display', 'block');
					$('.category_rtOff').css('display', 'none');

					let boundbox = map.getBounds().toString().replace('((', '').replace('))', '').replace('(', '').replace(')', '').replaceAll(' ', '');
					getRealTrading(boundbox);
				} else {
					$('.category_rtOn').css('display', 'none');
					$('.category_rtOff').css('display', 'block');

					removeRealTrading();
				}
			});

			// 실거래가 Cluster 표출
			function realTransCluster(map) {
				if (realTradingPoiArr.length > 0) {
					realTradingPoiArr.forEach(function (realTradingPoi) {
						realTradingPoi.setMap(null);
					});
				}

				if (realTradingOverArr.length > 0) {
					// 마커 클러스터러를 생성합니다 
					let clusterer2 = new kakao.maps.MarkerClusterer({
						map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
						averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
						minLevel: 6 // 클러스터 할 최소 지도 레벨 
					});

					clusterer2.addMarkers(realTradingOverArr);
				}

				let boundbox = map.getBounds().toString().replace('((', '').replace('))', '').replace('(', '').replace(')', '').replaceAll(' ', '');
				let boxArr = boundbox.split(',');	//console.log(boxArr);				
				let tempBox = 'BOX(' + boxArr[1] + ',' + boxArr[0] + ',' + boxArr[3] + ',' + boxArr[2] + ')';

				$.ajax({
					type: "GET",
					url: "http://api.vworld.kr/req/data",
					dataType: "jsonp",
					data: {
						request: "GetFeature",
						data: "LT_C_ADEMD_INFO",
						key: vworld_key,
						geomFilter: tempBox,
						crs: "EPSG:4326",
						size: 100,
						geometry: true
					},
					async: false,
					cache: false,
					success: function (result) {
						console.log("test:::realTransCluster()"); console.log(result);
						if (result.response.status === 'OK' && result.response.record.total > 0) {
							console.log(result.response.result.featureCollection);

							let level = map.getLevel();
							let emdArr = result.response.result.featureCollection.features;

							emdArr.forEach((item, idx) => {
								console.log(item.properties.emd_cd);
								console.log(item.geometry.coordinates[0]);
								console.log(level);
								if (level >= 6 && item.geometry != null) {
									var emdPolygonPath = [];

									let emdGeom = item.geometry.coordinates[0][0];
									emdGeom.forEach((tempPOI, idx2) => {	//console.log(tempPOI);
										emdPolygonPath.push(new kakao.maps.LatLng(tempPOI[1], tempPOI[0]));
									});

									// 지도에 표시할 다각형을 생성합니다
									let emdPolygon = new kakao.maps.Polygon({
										path: emdPolygonPath, // 그려질 다각형의 좌표 배열입니다
										strokeWeight: 3, // 선의 두께입니다
										strokeColor: '#00589A', // 선의 색깔입니다
										strokeOpacity: 0.8, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
										strokeStyle: 'dashed', // 선의 스타일입니다
										fillColor: '#CFE7FF', // 채우기 색깔입니다
										fillOpacity: 0.0 // 채우기 불투명도 입니다
									});

									emdPolygon.setMap(map);
								}
							});
						}
					},
					error: function (json) {
						console.log("error:::realTransCluster()");
					}
				});
			}

			// xml을 json으로 변환해주는 xmlToJson함수 선언
			function xmlToJson(xml) {
				// Create the return object
				var obj = {};

				if (xml.nodeType == 1) {
					// element
					// do attributes
					if (xml.attributes.length > 0) {
						obj["@attributes"] = {};
						for (var j = 0; j < xml.attributes.length; j++) {
							var attribute = xml.attributes.item(j);
							obj["@attributes"][attribute.nodeName] = attribute.nodeValue;
						}
					}
				} else if (xml.nodeType == 3) {
					// text
					obj = xml.nodeValue;
				}

				// do children
				// If all text nodes inside, get concatenated text from them.
				var textNodes = [].slice.call(xml.childNodes).filter(function (node) {
					return node.nodeType === 3;
				});
				if (xml.hasChildNodes() && xml.childNodes.length === textNodes.length) {
					obj = [].slice.call(xml.childNodes).reduce(function (text, node) {
						return text + node.nodeValue;
					}, "");
				} else if (xml.hasChildNodes()) {
					for (var i = 0; i < xml.childNodes.length; i++) {
						var item = xml.childNodes.item(i);
						var nodeName = item.nodeName;
						if (typeof obj[nodeName] == "undefined") {
							obj[nodeName] = xmlToJson(item);
						} else {
							if (typeof obj[nodeName].push == "undefined") {
								var old = obj[nodeName];
								obj[nodeName] = [];
								obj[nodeName].push(old);
							}
							obj[nodeName].push(xmlToJson(item));
						}
					}
				}
				return obj;
			}
			
			

			

			let evtStatus = null;
			$('#cat_map').click(function () {				
				clearCategory('cat_map');
				
				if (!isMap) {
					$('.category_top li').removeClass("on");
					$('#cat_map').addClass("on");
					
					$('.category_bottom').hide();
					$('#cat_map_sub').show();		
					
					initCategory();
				}				
				isMap = !isMap;
			});			
			$('#cat_measure').click(function () {
				if (!isMeasure) {
					kakao.maps.event.removeListener(map, 'click', jibunClickHandler);
					
					$('.category_top li').removeClass("on");
					$('#cat_measure').addClass("on");

					$('.category_bottom').hide();
					$('#cat_measure_sub').show();
					
					initCategory();					
				} else {
					kakao.maps.event.addListener(map, 'click', jibunClickHandler);
					
					clearCategory('cat_measure');					
				}
				isMeasure = !isMeasure; 
			});			
			$('#cat_around').click(function () {
				clearCategory('cat_around');
				
				if (!isAround) {					
					$('.category_top li').removeClass("on");
					$('#cat_around').addClass("on");

					$('.category_bottom').hide();
					$('#cat_around_sub').show();
					
					kakao.maps.event.addListener(map, 'idle', searchPlaces);

					contentNode.className = 'placeinfo_wrap';
		 
					addEventHandle(contentNode, 'mousedown', kakao.maps.event.preventMap);
					addEventHandle(contentNode, 'touchstart', kakao.maps.event.preventMap);
					

					placeOverlay.setContent(contentNode);

					addCategoryClickEvent();
					
					initCategory();
				}
				isAround = !isAround;
			});
			
			function clearCategory(catType) {
				$('#cat_map').removeClass("on");
				$('#cat_measure').removeClass("on");
				$('#cat_around').removeClass("on");

				$('.category_bottom').hide();

				clearCategorySub();
				initCategorySub();

				/*
					if (isSkyview) {
						$('#mapTypeChange1').removeClass("on");
						_map.setMapTypeId(kakao.maps.MapTypeId.ROADMAP);
					}
					if (isUseDistrict) {
						$('#mapTypeChange2').removeClass("on");
						_map.removeOverlayMapTypeId(kakao.maps.MapTypeId.USE_DISTRICT);
					}
					if (isTerrain) {
						$('#mapTypeChange3').removeClass("on");
						_map.removeOverlayMapTypeId(kakao.maps.MapTypeId.TERRAIN);
					}
					if (isRoadView) {
						$('#mapTypeChange4').removeClass("on");
						clearRoadview();
					}
				
					isSkyview = false;
					isTerrain = false;
					isUseDistrict = false;
					isRoadView = false;
				*/

				$('.map-layer-icon2').css("border", "none");
				$('.map-layer-icon3').css("border", "none");
				$('.map-layer-icon4').css("border", "none");
			}

			function clearCategorySub(catType) {
				$('#lengthMeasure').removeClass("on");
				$('#areaMeasure').removeClass("on");

				clearMeasure();
				//clearMeasure('area');
			}
			
			function clearMeasure(mType) {
		//		if (mType == 'length') {						
					// 지도 위에 선이 표시되고 있다면 지도에서 제거합니다
					deleteClickLine();
					// 지도 위에 커스텀오버레이가 표시되고 있다면 지도에서 제거합니다
					deleteDistance();
					// 지도 위에 선을 그리기 위해 클릭한 지점과 해당 지점의 거리정보가 표시되고 있다면 지도에서 제거합니다
					deleteCircleDot();
	
					// 거리 측정 이벤트 해제
					kakao.maps.event.removeListener(map, 'click', measuerLengthClickHandler);					
	//			} else if (mType == 'area') {
					if (polygonArr.length > 0) {
						polygonArr.forEach(function (polygon) {
							polygon.setMap(null);
						});

						areaOverlayArr.forEach(function (areaOverlay) {
							areaOverlay.setMap(null);
						});
					}
					
					kakao.maps.event.removeListener(map, 'click', measuerAreaClickHandler);
//				}
				$('div.tab1').addClass('on');
				$('div.tab5').removeClass('on');				
			}					

			
			function initMeasure(mType) {
				//$('.category_bottom li').removeClass("on");				
				if (mType == 'length') {
					measureSet('거리');	
					$('#lengthMeasure').addClass("on");
					
					kakao.maps.event.addListener(map, 'click', measuerLengthClickHandler);
				} else if (mType == 'area') {
					measureSet('면적');
					$('#areaMeasure').addClass("on");
					
					kakao.maps.event.addListener(map, 'click', measuerAreaClickHandler);
					
					if (polygon != null)
						polygon.setMap(null);
				}
				$('div.tab1').removeClass('on');
				$('div.tab5').addClass('on');
			}
			
			//PC using
			$('#lengthMeasure').click(function () {
				clearCategorySub();
				
				if (isLength) {					
					kakao.maps.event.addListener(map, 'click', jibunClickHandler);
					
					clearMeasure('length');					
				} else {		
					kakao.maps.event.removeListener(map, 'click', jibunClickHandler);
					
					initCategorySub();
					
					clearMeasure('area');
					initMeasure('length');
				}
				isLength = !isLength;
			});
			
			// PC using
			$('#areaMeasure').click(function () {
				clearCategorySub();
				
				if (isArea) {
					kakao.maps.event.addListener(map, 'click', jibunClickHandler);
					
					clearMeasure('area');					
				} else {		
					kakao.maps.event.removeListener(map, 'click', jibunClickHandler);
					
					initCategorySub();
					
					clearMeasure('length');
					initMeasure('area');
					
					$('.gis_sub_wrap').off('click');
					
					$(document).on('click', '.mt-slot-btn', function (e) {
						let idx = $('.mt-slot-btn').index(this);
						let tempArea = polygonArr[idx].getArea().toFixed(1);
						//alert(polygonArr[idx].getArea().toFixed(1));

						polygonArr[idx].setMap(null);
						polygonArr.splice(idx, 1);

						areaOverlayArr[idx].setMap(null);
						areaOverlayArr.splice(idx, 1);

						areaAddressArr.splice(idx, 1);



						$('.area-list').eq(idx).remove();

						//console.log($('.areaListCnt').length);
						for (let i = 0; i < $('.areaListCnt').length; i++) {
							$('.areaListCnt').eq(i).text(i + 1);
						}

						areaListCnt = $('.areaListCnt').length;

						$('#mt_count').text(areaListCnt);


						areaListSum = areaListSum - tempArea;


						if (areaListCnt > 0) {
							$('#mt_total_area').text(areaListSum.toFixed(1) + 'm²');
							//$('#mt_total_gong_value').text(areaListSum.toFixed(1) + '억');
						} else {
							$('#mt_total_area').text('0 m²');
							$('#mt_total_gong_value').text('0 원');
						}
					});	
				}
				isArea = !isArea;
			});

			
			let moveLine; // 선이 그려지고 있을때 마우스 움직임에 따라 그려질 선 객체 입니다
			let clickLine // 마우스로 클릭한 좌표로 그려질 선 객체입니다
			let distanceOverlay; // 선의 거리정보를 표시할 커스텀오버레이 입니다
			let dots = {}; // 선이 그려지고 있을때 클릭할 때마다 클릭 지점과 거리를 표시하는 커스텀 오버레이 배열입니다.

			let measuerLengthClickHandler = function(mouseEvent) {
				// 마우스로 클릭한 위치입니다 
				let clickPosition = mouseEvent.latLng;

				let subHtml = '';
				subHtml += '<div class="rbc-cerulean" style="height: 120px;">';
				//subHtml += '	<div class="rfc-cerulean" style="background: #fff;width: 144px;display: inline-block;border-radius: 22px;height: 40px;position: relative;top:7px;line-height:40px;cursor:pointer;pointer-events:auto;" id="mt_last_btn">';
				//subHtml += '		<span style="display: inline-block;"><img src="https://aurora.disco.re/static/common/img/ico_close_b.png?ver=1688364125" style="width:16px;"></span>';
				//subHtml += '		<span style="display: inline-block;">마지막 지점 삭제</span>';
				//subHtml += '	</div>';
				subHtml += '	<div style="height: 40px;line-height: 46px;font-size: 16px;color: #fff;">선택된 지점 <span id="mt_count" style="display: inline-block;"></span> 개</div>';
				subHtml += '	<div style="height: 40px;position: relative;">';
				subHtml += '		<div style="display: inline-block;width: 49%;padding-left: 16px;color: #fff;">';
				subHtml += '			<span style="display: inline-block;font-size: 14px;color: #7eb6e7;margin-right: 10px;">거리 합계 </span>';
				subHtml += '			<span style="display: inline-block;font-size: 20px;color: #fff;" id="mt_total_length"></span> m';
				subHtml += '		</div>';
				subHtml += '</div>';

				if (!isLengthList) {
					isLengthList = true;

					$('#map_tool_msg').hide();
					$('#map_tool_field').append(subHtml);

					/*
					$('#mt_last_btn').on('click', function() {
						// 그려지고 있는 선의 좌표 배열을 얻어옵니다
						var path = clickLine.getPath();

						// 좌표 배열에 마지막 요소 제거
						path.pop();

						// 다시 선에 좌표 배열을 설정하여 클릭 위치까지 선을 그리도록 설정합니다
						clickLine.setPath(path);

						deleteLastCircleDot();

						if (lengthListCnt > 0) {
							lineDistanceArr.pop();
							lengthDisSum = lineDistanceArr[lineDistanceArr.length - 1];


							$('#mt_count').text((--lengthListCnt) + 1);
							$('#mt_total_length').text(lengthDisSum + 'm');
						} else {
							$('#mt_count').text(0);
							drawingFlag = false;
						}
					});
					*/
				}

				let temp_html = '<span class="temp_add_close" style="display: inline-block; position: relative; top: -25px; right: 5px;">';
				temp_html += '<img src="/img/sub/ico_btn_close.svg" width="20px" height="20px">';
				temp_html += '</span>';

				// 지도 클릭이벤트가 발생했는데 선을 그리고있는 상태가 아니면
				if (!drawingFlag) {
					// 상태를 true로, 선이 그리고있는 상태로 변경합니다
					drawingFlag = true;
					// 지도 위에 선이 표시되고 있다면 지도에서 제거합니다
					deleteClickLine();
					// 지도 위에 커스텀오버레이가 표시되고 있다면 지도에서 제거합니다
					deleteDistance();
					// 지도 위에 선을 그리기 위해 클릭한 지점과 해당 지점의 거리정보가 표시되고 있다면 지도에서 제거합니다
					deleteCircleDot();
					
					lengthListCnt++;
					$('#mt_count').text(lengthListCnt);
					$('#mt_total_length').text(lengthDisSum);

					// 클릭한 위치를 기준으로 선을 생성하고 지도위에 표시합니다
					clickLine = new kakao.maps.Polyline({
						map: map, // 선을 표시할 지도입니다 
						path: [clickPosition], // 선을 구성하는 좌표 배열입니다 클릭한 위치를 넣어줍니다
						strokeWeight: 3, // 선의 두께입니다 
						strokeColor: '#db4040', // 선의 색깔입니다
						strokeOpacity: 1, // 선의 불투명도입니다 0에서 1 사이값이며 0에 가까울수록 투명합니다
						strokeStyle: 'solid' // 선의 스타일입니다
					});

					// 선이 그려지고 있을 때 마우스 움직임에 따라 선이 그려질 위치를 표시할 선을 생성합니다
					moveLine = new kakao.maps.Polyline({
						strokeWeight: 3, // 선의 두께입니다 
						strokeColor: '#db4040', // 선의 색깔입니다
						strokeOpacity: 0.5, // 선의 불투명도입니다 0에서 1 사이값이며 0에 가까울수록 투명합니다
						strokeStyle: 'solid' // 선의 스타일입니다    
					});

					// 클릭한 지점에 대한 정보를 지도에 표시합니다
					displayCircleDot(clickPosition, 0);

					$('.dotOverlay').eq(0).html('시작 <span class="number">0</span>m');
					$('.dotOverlay').eq(0).parent().append(temp_html);
					/*
					$('.temp_add_close').off('mouseover');
					$('.temp_add_close').off('mouseout');
					$('.temp_add_close').off('click');
					
					$('.temp_add_close').on('mouseover', function (e) {											
						//kakao.maps.event.removeListener(map, 'click', jibunClickHandler);						
					});
					$('.temp_add_close').on('mouseout', function (e) {
						//kakao.maps.event.addListener(map, 'click', jibunClickHandler);																	
					});
					$('.temp_add_close').on('click', function (e) {
						// 그려지고 있는 선의 좌표 배열을 얻어옵니다
						let path = clickLine.getPath();
						// 좌표 배열에 마지막 요소 제거
						path.pop();
						// 다시 선에 좌표 배열을 설정하여 클릭 위치까지 선을 그리도록 설정합니다
						clickLine.setPath(path);
						// 마지막 지점 지도에서 제거
						deleteLastCircleDot();

						if (lengthListCnt > 0) {
							lineDistanceArr.pop();
							lengthDisSum = lineDistanceArr[lineDistanceArr.length - 1];

							$('#mt_count').text((--lengthListCnt) + 1);
							$('#mt_total_length').text(lengthDisSum + 'm');
						} else {
							$('#mt_count').text(0);
							drawingFlag = false;
						}					
					});
					*/
					
					$('.temp_add_close').off('contextmenu');
					$('.temp_add_close').on('contextmenu', function() {
						// 그려지고 있는 선의 좌표 배열을 얻어옵니다
						let path = clickLine.getPath();
						// 좌표 배열에 마지막 요소 제거
						path.pop();
						// 다시 선에 좌표 배열을 설정하여 클릭 위치까지 선을 그리도록 설정합니다
						clickLine.setPath(path);
						// 마지막 지점 지도에서 제거
						deleteLastCircleDot();

						if (lengthListCnt > 0) {
							lineDistanceArr.pop();
							lengthDisSum = lineDistanceArr[lineDistanceArr.length - 1];

							$('#mt_count').text((--lengthListCnt) + 1);
							$('#mt_total_length').text(lengthDisSum + 'm');
						} else {
							$('#mt_count').text(0);
							drawingFlag = false;
						}
					});
				} else { // 선이 그려지고 있는 상태이면
					// 그려지고 있는 선의 좌표 배열을 얻어옵니다
					let path = clickLine.getPath();
					// 좌표 배열에 클릭한 위치를 추가합니다
					path.push(clickPosition);
					// 다시 선에 좌표 배열을 설정하여 클릭 위치까지 선을 그리도록 설정합니다
					clickLine.setPath(path);

					let distance = Math.round(clickLine.getLength());
					displayCircleDot(clickPosition, distance);

					lengthListCnt++;
					lengthDisSum = distance;

					$('#mt_count').text(lengthListCnt);
					$('#mt_total_length').text(lengthDisSum);

					//$('#mt_total_area_view').css('display', 'block');

					$('.temp_add_close').hide();
					$('.dotOverlay').eq($('.dotOverlay').length - 1).parent().append(temp_html);
					/*
					$('.temp_add_close').off('mouseover');
					$('.temp_add_close').off('mouseout');
					$('.temp_add_close').off('click');
					
					$('.temp_add_close').on('mouseover', function (e) {											
						//kakao.maps.event.removeListener(map, 'click', jibunClickHandler);						
					});
					$('.temp_add_close').on('mouseout', function (e) {
						//kakao.maps.event.addListener(map, 'click', jibunClickHandler);																	
					});
					$('.temp_add_close').on('click', function (e) {
						// 그려지고 있는 선의 좌표 배열을 얻어옵니다
						let path = clickLine.getPath();
						// 좌표 배열에 마지막 요소 제거
						path.pop();
						// 다시 선에 좌표 배열을 설정하여 클릭 위치까지 선을 그리도록 설정합니다
						clickLine.setPath(path);
						// 마지막 지점 지도에서 제거
						deleteLastCircleDot();

						if (lengthListCnt > 0) {
							lineDistanceArr.pop();
							lengthDisSum = lineDistanceArr[lineDistanceArr.length - 1];

							$('#mt_count').text((--lengthListCnt) + 1);
							$('#mt_total_length').text(lengthDisSum + 'm');
						} else {
							$('#mt_count').text(0);
							drawingFlag = false;
						}
						$('.temp_add_close').eq($('.dotOverlay').length - 1).show();					
					});
					*/
					
					$('.temp_add_close').off('contextmenu');
					$('.temp_add_close').on('contextmenu', function() {
						// 그려지고 있는 선의 좌표 배열을 얻어옵니다
						let path = clickLine.getPath();
						// 좌표 배열에 마지막 요소 제거
						path.pop();
						// 다시 선에 좌표 배열을 설정하여 클릭 위치까지 선을 그리도록 설정합니다
						clickLine.setPath(path);
						// 마지막 지점 지도에서 제거
						deleteLastCircleDot();

						if (lengthListCnt > 0) {
							lineDistanceArr.pop();
							lengthDisSum = lineDistanceArr[lineDistanceArr.length - 1];

							$('#mt_count').text((--lengthListCnt) + 1);
							$('#mt_total_length').text(lengthDisSum + 'm');
						} else {
							$('#mt_count').text(0);
							drawingFlag = false;
						}
						$('.temp_add_close').eq($('.dotOverlay').length - 1).show();
					});
				}
				
				
			};
			
			let measuerAreaClickHandler = function (mouseEvent) {
				// 클릭한 위도, 경도 정보를 가져옵니다 
				let latlng = mouseEvent.latLng;

				let subHtml = '';
				subHtml += '<div class="rbc-cerulean" style="height: 80px;">';
				subHtml += '	<div style="height: 40px;line-height: 46px;font-size: 16px;color: #fff;display: inline-block;">총 <span id="mt_count" style="display: inline-block;"></span>개 필지가 선택됨</div>';
				subHtml += '	<div class="map-tool-reset-btn"><span class="map-tool-btns" style="pointer-events: auto; padding-right: 20px; position: absolute; top: -18px; left: 10px;" id="mt_area_reset_btn"><img src="/img/sub/ico_reset_a.png" style="width:24px;"></span></div>';
				subHtml += '	<div style="height: 56px;position: relative;">';
				subHtml += '		<div style="display: inline-block;width: 39%;padding-left: 16px;color: #fff;">';
				subHtml += '			<span style="display: inline-block;font-size: 14px;color: #7eb6e7;margin-right: 10px;">면적 합계 </span>';
				subHtml += '			<span style="display: inline-block;font-size: 20px;" class="areaListInfo" id="mt_total_area"></span>';
				subHtml += '			<span style="display: inline-block;font-size: 20px;" class="areaListInfo2" id="mt_total_area2"></span>';
				subHtml += '			<span class="area_unit"></span>';
				subHtml += '		</div>';
				subHtml += '		<div class="btn_meter_pyeong">';
				subHtml += '			<button type="button">㎡/평</button>';
				subHtml += '		</div>';
				subHtml += '		<div style="display: inline-block;width: 49%;padding-right: 16px;color: #fff;">';
				subHtml += '			<span style="display: inline-block;font-size: 14px;color: #7eb6e7;margin-right: 10px;">공시지가 합계</span>';
				subHtml += '			<span style="display: inline-block;font-size: 20px;" id="mt_total_gong_value">-</span>';
				subHtml += '		</div>';
				subHtml += '	</div>';
				subHtml += '</div>';

				subHtml += '<div class="rbc-cerulean" style="height:32px;position:relative;top:-1px;line-height:32px;color:#fff;font-size:12px;" id="mt_list_title">';
				subHtml += '	<span style="width: 23%;text-align: center;display: inline-block;">번호</span>';
				subHtml += '	<span style="width: 23%;text-align: center;display: inline-block;">지번</span>';
				subHtml += '	<span style="width: 52%;text-align: center;display: inline-block;padding-right:32px;">면적 / 공시지가</span>';
				subHtml += '</div>';
				//subHtml += '<div id="mt_slot_list" style="overflow-y: scroll; height: 757px;">';
				subHtml += '<div id="mt_slot_list">';
				subHtml += '</div>';

				if (!isAreaList) {
					isAreaList = true;

					$('#map_tool_msg').hide();
					$('#map_tool_field').append(subHtml);
					
					$('#mt_area_reset_btn').click(function () {
						for (let i = 0; i < $('.areaListCnt').length; i++) {
							polygonArr[i].setMap(null);
							areaOverlayArr[i].setMap(null);
						}
						for (let i = $('.areaListCnt').length - 1; i >= 0; i--) {
							$('.area-list').eq(i).remove();
						}

						$('#mt_count').text('0');

						$('#mt_total_area').text('0');
						$('#mt_total_area2').text('0');
						$('#mt_total_gong_value').text('0 원');
					});

					$('.btn_meter_pyeong').on('click', function () {
						if (!isAreaExtent) {
							$('.area_meter').css('display', 'none');
							$('.area_pyeong').css('display', 'inline-block');
							
							$('.areaInfo').css('display', 'none');
							$('.areaInfo2').css('display', 'inline-block');

							$('.areaListInfo').css('display', 'none');
							$('.areaListInfo2').css('display', 'inline-block');

							$('.area_unit').text("평");

							if (!isPrice) {
								$('.unit_meter_price').css('display', 'none');
								$('.unit_pyeong_price').css('display', 'inline-block');
							}

							$('#mo-catAreaSub1').css("background", "#1263DF");
							$('#mo-catAreaSub1').css("color", "#fff");

							$('#mo-catAreaSub2').css("background", "#F5F5FC");
							$('#mo-catAreaSub2').css("color", "#000");
						} else {
							$('.area_meter').css('display', 'inline-block');
							$('.area_pyeong').css('display', 'none');

							$('.areaInfo').css('display', 'inline-block');
							$('.areaInfo2').css('display', 'none');
							
							$('.areaListInfo').css('display', 'inline-block');
							$('.areaListInfo2').css('display', 'none');

							$('.area_unit').text("㎡");

							if (!isPrice) {
								$('.unit_meter_price').css('display', 'inline-block');
								$('.unit_pyeong_price').css('display', 'none');
							}

							$('#mo-catAreaSub2').css("background", "#1263DF");
							$('#mo-catAreaSub2').css("color", "#fff");

							$('#mo-catAreaSub1').css("background", "#F5F5FC");
							$('#mo-catAreaSub1').css("color", "#000");
						}
						isAreaExtent = !isAreaExtent;
					});
				}

				$.ajax({
					url: 'https://polygon.disco.re/get_land_by_latlng/?lat=' + latlng.getLat() + '&lng=' + latlng.getLng(),
					type: 'GET',
					dataType: "json",
					async: false,
					cache: false,
					success: function (result) {						
						//console.log(result);
						let includeAddr = false;
						areaAddressArr.forEach((item, idx) => {
							if (item === result.address) {
								includeAddr = true;
								console.log("yy");
								polygonArr[idx].setMap(null);
								polygonArr.splice(idx, 1);

								areaOverlayArr[idx].setMap(null);
								areaOverlayArr.splice(idx, 1);

								areaAddressArr.splice(idx, 1);
								let selArea = parseFloat($('.areaListMeter').eq(idx).text()); //console.log(selArea);
								let selArea2 = parseFloat($('.areaListPyeong').eq(idx).text()); //console.log(selArea);

								$('.area-list').eq(idx).remove();

								//console.log($('.areaListCnt').length);
								for (let i = 0; i < $('.areaListCnt').length; i++) {
									$('.areaListCnt').eq(i).text(i + 1);
								}

								areaListCnt = $('.areaListCnt').length;
								areaListSum = areaListSum - selArea;
								let areaListSum2 = Number($('#mt_total_area2').text()) - selArea2;

								$('#mt_count').text(areaListCnt);
								if (areaListCnt > 0) {
									$('#mt_total_area').text(areaListSum.toFixed(1));
									$('#mt_total_area2').text(areaListSum2.toFixed(0));
									//$('#mt_total_gong_value').text(areaListSum.toFixed(1) + '억');
								} else {
									$('#mt_total_area').text('0');
									$('#mt_total_area2').text('0');
									$('#mt_total_gong_value').text('0 원');
								}
							}
						});

						if (!includeAddr) {
							areaAddressArr.push(result.address);
							console.log("xx");
							let tempPoly = null;
							tempPoly = parse_land_polygon_value(result.polygon); //console.log(tempPoly);

							// 지도에 표시할 다각형을 생성합니다
							let polygon = new kakao.maps.Polygon({
								path: tempPoly[0],//polygonPath, // 그려질 다각형의 좌표 배열입니다
								strokeWeight: 2, // 선의 두께입니다 
								strokeColor: '#75B8FA', // 선의 색깔입니다
								strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
								strokeStyle: 'shortdash', // 선의 스타일 입니다
								fillColor: '#CFE7FF', // 채우기 색깔입니다
								fillOpacity: 0.7  // 채우기 불투명도 입니다
							});
							polygonArr.push(polygon);

							// 지도에 다각형을 표시합니다
							polygon.setMap(map);

							let area = Math.round(polygon.getArea());	// 다각형의 총면적을 계산합니다

							let temp_html = '<div class="areaInfo">총면적 <span class="areaNumber"> ' + area + '</span> ㎡</div><div class="areaInfo2">총면적 <span class="areaNumber"> ' + Number(area / 3.3058).toFixed(0) + '</span> 평</div>';
							let content = temp_html; // 커스텀오버레이에 추가될 내용입니다

							var path = polygon.getPath();
							// console.log(tempPoly[0][0][0]);
							// 면적정보를 지도에 표시합니다
							var areaOverlay = new kakao.maps.CustomOverlay({
								map: map, // 커스텀오버레이를 표시할 지도입니다 
								content: content,  // 커스텀오버레이에 표시할 내용입니다
								xAnchor: 0,
								yAnchor: 0,
								position: latlng  // 커스텀오버레이를 표시할 위치입니다. 위치는 다각형의 마지막 좌표로 설정합니다
							});
							areaOverlayArr.push(areaOverlay);

							let temp_area1 = 0.0;
							let temp_area2 = 0.0;
							temp_area1 = polygon.getArea().toFixed(1);
							temp_area2 = Number(polygon.getArea() / 3.3058).toFixed(0);

							let subHtml = '';
							subHtml += '<div class="area-list">';
							subHtml += '	<div class="rfc-dusk" style="height: 64px;position:relative;top:-1px;font-size:15px;">';
							subHtml += '		<span style="width:18%;text-align:center;display: inline-block;">';
							subHtml += '			<span class="rbc-cerulean areaListCnt" style="width: 24px;height: 24px;color: #fff;display: inline-block;border-radius: 12px;top: 0px;line-height: 24px;">';
							subHtml += ++areaListCnt;
							subHtml += '			</span>';
							subHtml += '		</span>';
							subHtml += '		<span style="width:38%;text-align:center;display: inline-block;">';
							subHtml += result.address;
							subHtml += '		</span>';
							subHtml += '		<span style="width:28%;text-align:center;display: inline-block;line-height:16px;">';
							subHtml += '			<span style="bottom: -10px;position: relative;">';
							subHtml += '				<span class="areaListMeter areaListInfo" style="display: inline-block;">';
							subHtml += temp_area1;
							subHtml += '				</span>';
							subHtml += '				<span class="areaListPyeong areaListInfo2" style="display: none;">';
							subHtml += temp_area2;
							subHtml += '				</span>';
							subHtml += '				<span class="area_unit"></span>';
							subHtml += '			</span><br>';
							subHtml += '			<span style="font-size: 12px;position: relative;top:9px;color:#73788c;">-</span>';
							subHtml += '		</span>';
							subHtml += '		<span class="mt-slot-btn" data-num="1" style="width:12%;text-align:center;display: inline-block;cursor:pointer;">';
							subHtml += '			<img src="https://aurora.disco.re/static/common/img/ico_s_close2_4x.png?ver=1681186936" style="width:16px;">';
							subHtml += '		</span>';
							subHtml += '	</div>';
							subHtml += '	<div style="height:1px;background:#000;opacity:0.05;"></div>';
							subHtml += '</div>';

							areaListSum += parseFloat(polygon.getArea().toFixed(1));

							//$('#mt_slot_list').prepend(subHtml);
							$('#mt_slot_list').append(subHtml);

							$('#mt_count').text(areaListCnt);
							$('#mt_total_area').text(areaListSum.toFixed(1));
							$('#mt_total_area2').text(Number(areaListSum / 3.3058).toFixed(0));

							if (!isAreaExtent) {
								$('.area_unit').text('㎡');

								$('.areaInfo').show();
								$('.areaInfo2').hide();
								$('.areaListInfo').show();
								$('.areaListInfo2').hide();
							} else {
								$('.area_unit').text('평');

								$('.areaInfo').hide();
								$('.areaInfo2').show();
								$('.areaListInfo').hide();
								$('.areaListInfo2').show();								
							}
						}
					},
					error: function (json) {
						console.log("error");
					}
				});
			};

			// 선이 그려지고 있는 상태일 때 지도를 클릭하면 호출하여 
			// 클릭 지점에 대한 정보 (동그라미와 클릭 지점까지의 총거리)를 표출하는 함수입니다
			function displayCircleDot(position, distance) {

				// 클릭 지점을 표시할 빨간 동그라미 커스텀오버레이를 생성합니다
				var circleOverlay = new kakao.maps.CustomOverlay({
					content: '<span class="dot"></span>',
					position: position,
					zIndex: 1
				});

				// 지도에 표시합니다
				circleOverlay.setMap(map);

				if (distance > 0) {
					// 클릭한 지점까지의 그려진 선의 총 거리를 표시할 커스텀 오버레이를 생성합니다
					var distanceOverlay = new kakao.maps.CustomOverlay({
						content: '<div class="dotOverlay">거리 <span class="number">' + distance + '</span>m</div>',
						position: position,
						yAnchor: 1,
						zIndex: 2
					});

					// 지도에 표시합니다
					distanceOverlay.setMap(map);
				} else {
					var distanceOverlay = new kakao.maps.CustomOverlay({
						content: '<div class="dotOverlay">시작</div>',
						position: position,
						yAnchor: 1,
						zIndex: 2
					});

					// 지도에 표시합니다
					distanceOverlay.setMap(map);
				}

				lineDistanceArr.push(distance);
				// 배열에 추가합니다
				dots.push({ circle: circleOverlay, distance: distanceOverlay });
			}
			
			// 클릭으로 그려진 선을 지도에서 제거하는 함수입니다
			function deleteClickLine() {
				if (clickLine) {
					clickLine.setMap(null);
					clickLine = null;
				}
			}
			
			// 그려지고 있는 선의 총거리 정보와 
			// 선 그리기가 종료됐을 때 선의 정보를 표시하는 커스텀 오버레이를 삭제하는 함수입니다
			function deleteDistance() {
				if (distanceOverlay) {
					distanceOverlay.setMap(null);
					distanceOverlay = null;
				}
			}

			// 마지막 지점 지도에서 제거하는 함수입니다
			function deleteLastCircleDot() {
				if (dots[dots.length - 1].circle) {
					dots[dots.length - 1].circle.setMap(null);
				}
				if (dots[dots.length - 1].distance) {
					dots[dots.length - 1].distance.setMap(null);
				}
				// 마지막 제거
				dots.pop();
			}

			// 전체 지점 지도에서 제거하는 함수입니다
			function deleteAllCircleDot() {
				// 그려지고 있는 선의 좌표 배열을 얻어옵니다
				let path = clickLine.getPath();
				// 좌표 배열 모든 요소 제거
				path = [];
				// 다시 선에 좌표 배열을 설정하여 클릭 위치까지 선을 그리도록 설정합니다
				clickLine.setPath(path);

				for (let i = 0; i < dots.length; i++) {
					dots[i].circle.setMap(null);
					dots[i].distance.setMap(null);
				}

				$('#mt_count').text(0);
				$('#mt_total_length').text('0m');
			}

			// 클릭 지점에 대한 정보 (동그라미와 클릭 지점까지의 총거리)를 지도에서 모두 제거하는 함수입니다
			function deleteCircleDot() {				
				for (let i = 0; i < dots.length; i++) {
					if (dots[i].circle) {
						dots[i].circle.setMap(null);
					}
					if (dots[i].distance) {
						dots[i].distance.setMap(null);
					}
				}
				dots = [];
			}
						
			function measureSet(measureType) {
				let subHtml = '';
				subHtml += '<div class="mfs-list-div-view3 dsc-main-frame" id="map_tool_div_view" style="text-align: center; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.15) 1px 0px 2px 0px;">';
				subHtml += '	<div style="background: #fff;pointer-events:auto;">';
				subHtml += '		<div class="map-tool-title-bar-div">';
				subHtml += '			<div class="map-tool-name-title" id="map_tool_name_title">' + measureType + ' 측정</div>';				
				subHtml += '			<div class="map-tool-before-btn"><span class="map-tool-btns mearsure-close" style="padding-left:20px;" id="mt_close_btn"><img src="/img/sub/ico_btn_close.png" style="width:20px;height:19px;"></span></div>';
				subHtml += '		</div>';
				subHtml += '	</div>';
				subHtml += '	<div id="map_tool_msg" style="color: rgb(115, 120, 140); height: 100%; line-height: 91px; background: rgb(255, 255, 255); position: relative;">측정하고자 하는 위치를 선택하세요.</div>';
				subHtml += '	<div id="map_tool_field" style="position: relative; pointer-events: auto; top: 0px;"></div>';
				subHtml += '</div>';

				$('div.tab5').html(subHtml);				
				
				let isTag = $("#mt_close_btn").hasClass("mearsure-close");
				
				if (isTag) {
					$('#mt_close_btn').click(function () {
						clearCategorySub();
						initCategorySub();						
					});
				}
			}
			
			


			
			
			// 마커를 클릭했을 때 해당 장소의 상세정보를 보여줄 커스텀오버레이입니다
			let placeOverlay = new kakao.maps.CustomOverlay({ zIndex: 1 }),
				contentNode = document.createElement('div'),
				currCategory = '';	
			
			// 장소 검색 객체를 생성합니다
			let _ps = new kakao.maps.services.Places(map);

			
			// 엘리먼트에 이벤트 핸들러를 등록하는 함수입니다
			function addEventHandle(target, type, callback) {
				if (target.addEventListener) {
					target.addEventListener(type, callback);
				} else {
					target.attachEvent('on' + type, callback);
				}
			}

			// 카테고리 검색을 요청하는 함수입니다
			function searchPlaces() {
				if (!currCategory) {
					return;
				} 
				placeOverlay.setMap(null);
				removeMarker();

				_ps.categorySearch(currCategory, placesSearchCB, { useMapBounds: true });
			}

			// 장소검색이 완료됐을 때 호출되는 콜백함수 입니다
			function placesSearchCB(data, status, pagination) {
				if (status === kakao.maps.services.Status.OK) {console.log("11");
					displayPlaces(data);
				} else if (status === kakao.maps.services.Status.ZERO_RESULT) {console.log("22");
					// 검색결과가 없는경우 해야할 처리가 있다면 이곳에 작성해 주세요
				} else if (status === kakao.maps.services.Status.ERROR) {console.log("33");
					// 에러로 인해 검색결과가 나오지 않은 경우 해야할 처리가 있다면 이곳에 작성해 주세요
				}
			}

			// 지도에 마커를 표출하는 함수입니다
			function displayPlaces(places) {
				let order = document.getElementById(currCategory).getAttribute('data-order');

				for (let i = 0; i < places.length; i++) {
					let marker = addMarker(new kakao.maps.LatLng(places[i].y, places[i].x), order);

					(function (marker, place) {
						kakao.maps.event.addListener(marker, 'click', function () {
							displayPlaceInfo(place);
						});
					})(marker, places[i]);
				}
			}

			// 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다
			function addMarker(position, order) {
				let imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/places_category.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다
					imageSize = new kakao.maps.Size(27, 28),  // 마커 이미지의 크기
					imgOptions = {
						spriteSize: new kakao.maps.Size(72, 208), // 스프라이트 이미지의 크기
						spriteOrigin: new kakao.maps.Point(46, (order * 36)), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표
						offset: new kakao.maps.Point(11, 28) // 마커 좌표에 일치시킬 이미지 내에서의 좌표
					},
					markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),
					marker = new kakao.maps.Marker({
						position: position, // 마커의 위치
						image: markerImage
					});
				marker.setMap(map); // 지도 위에 마커를 표출합니다
				around_markers.push(marker);  // 배열에 생성된 마커를 추가합니다

				return marker;
			}

			// 지도 위에 표시되고 있는 마커를 모두 제거합니다
			function removeMarker() {
				for (let i = 0; i < around_markers.length; i++) {
					around_markers[i].setMap(null);
				}
				around_markers = [];
			}

			// 클릭한 마커에 대한 장소 상세정보를 커스텀 오버레이로 표시하는 함수입니다
			function displayPlaceInfo(place) {
				let content = '<div class="placeinfo">' +
					'   <a class="title" href="' + place.place_url + '" target="_blank" title="' + place.place_name + '">' + place.place_name + '</a>';

				if (place.road_address_name) {
					content += '    <span title="' + place.road_address_name + '">' + place.road_address_name + '</span>' +
						'  <span class="jibun" title="' + place.address_name + '">(지번 : ' + place.address_name + ')</span>';
				} else {
					content += '    <span title="' + place.address_name + '">' + place.address_name + '</span>';
				}
				content += '    <span class="tel">' + place.phone + '</span>' +
					'</div>' +
					'<div class="after"></div>';

				contentNode.innerHTML = content;
				placeOverlay.setPosition(new kakao.maps.LatLng(place.y, place.x));
				placeOverlay.setMap(map);
			}

			// 각 카테고리에 클릭 이벤트를 등록합니다
			function addCategoryClickEvent() {
				let category = document.getElementById('cat_around_sub'),
					children = category.children;

				for (let i = 0; i < children.length; i++) {
					children[i].onclick = onClickCategory;
				}
			}

			// 카테고리를 클릭했을 때 호출되는 함수입니다
			function onClickCategory() {
				let id = this.id,
					className = this.className;

				placeOverlay.setMap(null);

				if (className === 'on') {
					currCategory = '';
					changeCategoryClass();
					removeMarker();
				} else {
					currCategory = id;
					changeCategoryClass(this);
					searchPlaces();
				}
			}

			// 클릭된 카테고리에만 클릭된 스타일을 적용하는 함수입니다
			function changeCategoryClass(el) {
				let category = document.getElementById('cat_around_sub'),
					children = category.children;

				for (let i = 0; i < children.length; i++) {
					children[i].className = '';
				}

				if (el) {
					el.className = 'on';
				}
			}
			
			function displayMarker(place) {			overlay_wrap  
			    // 마커에 클릭이벤트를 등록합니다
			    kakao.maps.event.addListener(marker, 'click', function() {
			        // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
			        infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
			        infowindow.open(map, marker);
			    });
			}
			
			
			
			$('#mo-catAreaSub1').click(function () {
				isAreaExtent = true;

				$('.area_pyeong').css('display', 'inline-block');
				$('.area_meter').css('display', 'none');

				$('.areaInfo').css('display', 'none');
				$('.areaInfo2').css('display', 'inline-block');

				$('.areaListInfo').css('display', 'none');
				$('.areaListInfo2').css('display', 'inline-block');

				$('.area_unit').text("평");

				if (!isPrice) {
					$('.unit_meter_price').css('display', 'none');
					$('.unit_pyeong_price').css('display', 'inline-block');
				}

				$('#mo-catAreaSub1').css("background", "#1263DF");
				$('#mo-catAreaSub1').css("color", "#fff");

				$('#mo-catAreaSub2').css("background", "#F5F5FC");
				$('#mo-catAreaSub2').css("color", "#000");
			});

			$('#mo-catAreaSub2').click(function () {
				isAreaExtent = false;

				$('.area_meter').css('display', 'inline-block');
				$('.area_pyeong').css('display', 'none');

				$('.areaInfo2').css('display', 'none');
				$('.areaInfo').css('display', 'inline-block');

				$('.areaListInfo').css('display', 'inline-block');
				$('.areaListInfo2').css('display', 'none');

				$('.area_unit').text("㎡");

				if (!isPrice) {
					$('.unit_meter_price').css('display', 'inline-block');
					$('.unit_pyeong_price').css('display', 'none');
				}

				$('#mo-catAreaSub2').css("background", "#1263DF");
				$('#mo-catAreaSub2').css("color", "#fff");

				$('#mo-catAreaSub1').css("background", "#F5F5FC");
				$('#mo-catAreaSub1').css("color", "#000");
			});

			$('#mo-catPriceSub1').click(function () {
				isPrice = true;

				$('.unit_meter_price').css('display', 'none');
				$('.unit_pyeong_price').css('display', 'none');
				$('.total_price').css('display', 'inline-block');

				$('#mo-catPriceSub1').css("background", "#1263DF");
				$('#mo-catPriceSub1').css("color", "#fff");

				$('#mo-catPriceSub2').css("background", "#F5F5FC");
				$('#mo-catPriceSub2').css("color", "#000");
			});

			$('#mo-catPriceSub2').click(function () {
				isPrice = false;

				if (!isAreaExtent) {	// 제곱미터일 경우
					$('.unit_meter_price').css('display', 'inline-block');
					$('.unit_pyeong_price').css('display', 'none');
				} else {	// 평일 경우
					$('.unit_meter_price').css('display', 'none');
					$('.unit_pyeong_price').css('display', 'inline-block');
				}
				$('.total_price').css('display', 'none');

				$('#mo-catPriceSub2').css("background", "#1263DF");
				$('#mo-catPriceSub2').css("color", "#fff");

				$('#mo-catPriceSub1').css("background", "#F5F5FC");
				$('#mo-catPriceSub1').css("color", "#000");
			});

			$('#cat_area').click(function () {
				if (isAreaExtent) {	// 평에서 제곱미터로 변경
					isAreaExtent = false;

					$('.area_meter').css('display', 'inline-block');
					$('.area_pyeong').css('display', 'none');

					$('.area_unit').text("㎡");

					if (!isPrice) {
						$('.unit_meter_price').css('display', 'inline-block');
						$('.unit_pyeong_price').css('display', 'none');
					}

					$('#catAreaSub1').css("color", "#000");
					$('#catAreaSub1').css("background-color", "#fff");

					$('#catAreaSub2').css("color", "#fff");
					$('#catAreaSub2').css("background-color", "#1263df");
				} else {	// 제곱미터에서 평으로 변경
					isMap = false;
					isMeasure = false;
					isAround = false;
					//isPrice = false;

					isAreaExtent = true;

					$('.area_pyeong').css('display', 'inline-block');
					$('.area_meter').css('display', 'none');

					$('.area_unit').text("평");

					if (!isPrice) {
						$('.unit_meter_price').css('display', 'none');
						$('.unit_pyeong_price').css('display', 'inline-block');
					}

					$('#catAreaSub2').css("color", "#000");
					$('#catAreaSub2').css("background-color", "#fff");

					$('#catAreaSub1').css("color", "#fff");
					$('#catAreaSub1').css("background-color", "#1263df");
				}
			});

			$('#cat_price').click(function () {
				if (isPrice) {	// 총액에서 단가로 변경
					isPrice = false;

					if (!isAreaExtent) {	// 제곱미터일 경우
						$('.unit_meter_price').css('display', 'inline-block');
						$('.unit_pyeong_price').css('display', 'none');
					} else {	// 평일 경우
						$('.unit_meter_price').css('display', 'none');
						$('.unit_pyeong_price').css('display', 'inline-block');
					}
					$('.total_price').css('display', 'none');

					$('#catPriceSub1').css("color", "#000");
					$('#catPriceSub1').css("background-color", "#fff");

					$('#catPriceSub2').css("color", "#fff");
					$('#catPriceSub2').css("background-color", "#1263df");
				} else {	// 단가에서 총액으로 변경
					isMap = false;
					isMeasure = false;
					isAround = false;
					//isAreaExtent = false;

					isPrice = true;

					$('.unit_meter_price').css('display', 'none');
					$('.unit_pyeong_price').css('display', 'none');
					$('.total_price').css('display', 'inline-block');

					$('#catPriceSub2').css("color", "#000");
					$('#catPriceSub2').css("background-color", "#fff");

					$('#catPriceSub1').css("color", "#fff");
					$('#catPriceSub1').css("background-color", "#1263df");
				}
			});
			


			


			function parse_land_polygon_value(e, r) {
				var t = [19e-6, 0];//get_rev_xy(r, "l");				
				var a = new RegExp(/\(\(.+?\)\)/g);
				var i = new RegExp(/\(.+?\)/g);
				var l = [];
				var n;
				var s;
				while ((n = a.exec(e.replace('(((', '((').replace(')))', '))'))) !== null) {
					var _ = [];
					s = i.exec(n[0].replace('((', '(').replace('))', ')'));
					var o = s[0].replace('(', '').replace(')', '').split(',');
					var c = [];
					for (var p = 0; p < o.length; p++) {
						var d = o[p].split(" ");
						d[0] = String(Number(d[0]) + t[0]);
						d[1] = String(Number(d[1]) + t[1]);
						c.push(new daum.maps.LatLng(d[1], d[0]))
					}
					_.push(c)

					l.push(_)
				}
				return l
			}

			function forsaleDetail(rid) {
				
				$('.cell_hidden').css('display', 'table-cell');			
				$('.btn_wrap').show();
				$('#slide_detail').show();
				$('.tag_wrap').show();
				$('.info_wrap').show();
				
				$('.saleDetail').show();
				$('.jibunDetail').hide();				

				var url = $.validator.format('/forsale/rest/view/{0}', rid);
				$.get(url, {}, function (data) {
					//console.log(data);
					var viewArea = $('div.detail_wrap');

					EXTERNAL_LINK_URL = data.linkUrl;

					//이미지
					var photoArea = viewArea.find('ul.photoList');
					photoArea.empty();
					$.each(data.photoList, function (idx, item) {
						var photo = $.validator.format('<li class="thumb"><img src="{0}" /></li>', item);
						photoArea.append(photo);
						touchSlider('#slide_detail', 1, false, true, 500);
						//imgResizeIn(".detail_wrap .slide_wrap li img");
					});

					var userType = /*[[${USER_TYPE}]]*/ '';
					var isAgent = (userType == 'AA' || userType == 'RA');

					//버튼들에 식별키 설정.
					viewArea.find('a[data-rid]').data('rid', data.rid);
					//버튼 설정.
					viewArea.find('a.edit').hide();
					viewArea.find('a.advertising').hide();
					viewArea.find('a.report').show();
					viewArea.find('a.getoffer').hide();
					viewArea.find('a.dooffer').hide();
					//alert(data.editUrl);
					if (data.ownerYn == 'Y') {
						viewArea.find('a.edit').show();
						viewArea.find('a.edit').attr('href', data.editUrl);
						viewArea.find('a.advertising').show();
						viewArea.find('a.report').hide();	//신고하기는 본인 매물이 아닌 경우.
					}

					if (isAgent && data.ownerYn == 'N') {
						viewArea.find('a.dooffer').show();
					}
					else if (!isAgent) {
						viewArea.find('a.getoffer').show();
					}

					//alert(data.priceWon + ' ' + data.priceWon);
					$('[data-field=saleNo]').text(data.saleNo);
					$('[data-field=tradeTypeAndPrice]').text(data.tradeTypeNm + ' ' + data.priceWon);
					$('[data-field=maintenanceFeeWon]').text(data.maintenanceFeeWon);
					$('[data-field=dongAddr]').text(data.dongAddr);
					$('[data-field=info1]').text(data.info1);
					$('[data-field=info2]').text(data.info2);
					$('[data-field=info3]').text(data.info3);
					$('[data-field=info4]').html((data.forsaleIntroDetail == null) ? '' : '<font color=black><b>매물 정보</b></font>' + data.forsaleIntroDetail.replace(/\n/g, '<br>'));
					$('[data-field=includeItems]').text(data.includeItems.replace(/\|/g, ','));
					$('[data-field=optionItems]').text(data.optionItems.replace(/\|/g, ','));

					viewArea.find('div.hashtag').empty().append(data.hashtag);
					
					//이미지 지도.
					$('#staticMap').empty();	//기존 내용 지우기.
					var staticMapContainer = document.getElementById('staticMap'); // 이미지 지도를 표시할 div
					//alert(staticMapContainer + '...' + data.posY + '...' + data.posX);
					// 이미지 지도에서 마커가 표시될 위치입니다
					var markerPosition = new kakao.maps.LatLng(data.posY, data.posX);
					// 이미지 지도에 표시할 마커입니다
					var staticMarker = { position: markerPosition };

					staticMapOption = {
						center: new kakao.maps.LatLng(Number(data.posY) + (Math.random() / 300), Number(data.posX) + (Math.random() / 300)), // 이미지 지도의 중심좌표
						level: 5, // 이미지 지도의 확대 레벨
						//marker: staticMarker // 이미지 지도에 표시할 마커
					};
					// 이미지 지도를 표시할 div와 옵션으로 이미지 지도를 생성합니다
					var staticMap = new kakao.maps.StaticMap(staticMapContainer, staticMapOption);

					var obj = $('#frmReport').find('select[name=agentId]');
					obj.empty().append('<option value="">-선택-</option>');
					//alert(JSON.stringify(data.agentList));
					$.each(data.agentList, function (idx, user) {
						var option = $.validator.format('<option value="{0}">{1}</option>', user.userid, user.usernm);
						obj.append(option);
					});
					
					$('#trp-detail-period-cnt').text('(0 건)');
					
					let html = '';
					html += '<div class="detail_tradings_table2">';
					html += '	<div class="detail_tradings_table_row">';
					html += '	<span>';
					html += '		실거래 내역이 없습니다.';
					html += '	</span>';
					html += '	</div>';
					html += '</div>';
					
					$('#detail_tradings_table_conts').html(html);					

					$.get('https://polygon.disco.re/get_pnu_by_latlng2/?lat=' + data.posY + '&lng=' + data.posX + '&spec=goon', {}, function (pnu) {
						console.log(pnu);
						// 토지대장
						$.get('https://data.disco.re/home/land_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);
							$('#land_forest_info_area').text(data.area);
							$('#land_forest_info_purpose').text(data.purpose);
							$('#p6').text(data.p6);
							$('#p10').text(data.p10);
							$('#owner_gbn').text(data.owner_gbn);
							$('#days').text(data.days);
							$('#why').text(data.why);
							$('#p16').text(data.p16);
							$('#p12').text(data.p12);
							$('#p14').text(data.p14);

							let info_main = data.land_use_planning_info_main;
							if (info_main != null && info_main.length > 0) {
								info_main = info_main.split(',');
							}

							let info_main_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
							let info_main_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
							let info_main_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

							$('#info_main_0').text(info_main_0);
							$('#info_main_1').text(info_main_1);
							$('#info_main_2').text(info_main_2);

							let info_etc = data.land_use_planning_info_etc;
							if (info_etc != null && info_etc.length > 0) {
								info_etc = info_etc.split(',');
							}

							let info_etc_0 = info_main.filter(item => item.includes('포함')).map(item => item.replace('(포함)', ''));
							let info_etc_1 = info_main.filter(item => item.includes('저촉')).map(item => item.replace('(저촉)', ''));
							let info_etc_2 = info_main.filter(item => item.includes('접함')).map(item => item.replace('(접함)', ''));

							$('#arch_info_0').text(info_etc_0);
							$('#arch_info_1').text(info_etc_1);
							$('#arch_info_2').text(info_etc_2);
						});

						$.get('https://data.disco.re/home/arch_by_pnu/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);
							if (data.overall_title_section.length > 0) {

							} else {
								console.log(data.title_section)
								let build_info = data.title_section[0];
								let html = '';

								$('#dpa_overall_b1').text(build_info.a23 != null ? build_info.a23 : "-");

								$('#dpa_overall_a1').text(build_info.a36 != null ? build_info.a36 : "-");
								$('#dpa_overall_a1_1').text(build_info.a37 != null ? build_info.a37 : "-");
								$('#dpa_title_b5_1').text(build_info.a33 != null ? build_info.a33 : "-");
								$('#dpa_title_b5_2').text(build_info.a39 != null ? build_info.a39 : "-");

								$('#dpa_overall_c2').text(build_info.a43 != null ? build_info.a43 + "m" : "-");
								$('#dpa_overall_c5').text(build_info.a44 != null ? build_info.a44 + "/" + build_info.a45 : "-");

								$('#dpa_overall_a2').text(build_info.a26 != null ? build_info.a26 + "㎡" : "-");

								$('.dpa-c-name').text(build_info.a36 != null ? build_info.a36 : "-");

								html = '';
								html += '<span>' + build_info.a27 + '㎡</span><br><span>(건폐율 ' + build_info.a28 + '%)</span>';
								$('#dpa_overall_a3').html(html);

								$('#dpa_overall_b2').text(build_info.a29 != null ? build_info.a29 + "㎡" : "-");

								html = '';
								html += '<span>' + build_info.a30 + '㎡</span><br><span>(용적률 ' + build_info.a31 + '%)</span>';
								$('#dpa_overall_b3').html(html);

								$('#dpa_overall_c3_0').text(build_info.a41 != null ? build_info.a41 : "-");
								$('#dpa_overall_c3_1').text(build_info.a42 != null ? build_info.a42 : "-");
								$('#dpa_overall_c3_2').text(build_info.a67 != null ? build_info.a67 : "-");

								$('#dpa_overall_a5').text(build_info.a17 != null ? build_info.a17 : "-");

								$('#dpa_overall_g23').text(build_info.g23 != null ? build_info.g23 : "-");
								$('#dpa_overall_g24').text(build_info.g24 != null ? build_info.g24 : "-");
								$('#dpa_overall_g27').text(build_info.g27 != 0 ? build_info.g27 : "-");
								$('#dpa_overall_g28').text(build_info.g28 != 0 ? build_info.g28 : "-");

								$('#dpaz_value_1').text(build_info.a55 != null ? build_info.a55 + "대" : "-");
								$('#dpaz_value_2').text(build_info.a57 != null ? build_info.a57 + "대" : "-");
								$('#dpaz_value_3').text(build_info.a51 != null ? build_info.a51 + "대" : "-");
								$('#dpaz_value_4').text(build_info.a53 != null ? build_info.a53 + "대" : "-");

								$('#dpal_value1').text(build_info.a46 != null ? build_info.a46 : "-");
								$('#dpal_value2').text(build_info.a47 != null ? build_info.a47 : "-");

								let temp_a59 = build_info.a59.substr(0, 4) + "년 " + build_info.a59.substr(4, 2) + "월 " + build_info.a59.substr(6, 2) + "일";
								$('#dpad_value1').text(build_info.a59 != null ? temp_a59 : "-");
								let temp_a60 = build_info.a60.substr(0, 4) + "년 " + build_info.a60.substr(4, 2) + "월 " + build_info.a60.substr(6, 2) + "일";
								$('#dpad_value2').text(build_info.a60 != null ? temp_a60 : "-");
								let temp_a61 = build_info.a61.substr(0, 4) + "년 " + build_info.a61.substr(4, 2) + "월 " + build_info.a61.substr(6, 2) + "일";
								$('#dpad_value3').text(build_info.a61 != null ? temp_a61 : "-");

								$.get('https://data.disco.re/home/arch_floor_list/?key=' + build_info.a1, {}, function (subData) {
									console.log(subData);
									let subHtml = '';
									if (subData.length > 0) {
										subData.forEach(item => {
											subHtml += '<div class="rfc-cool-grey" style="width:auto;padding:7px 20px;font-size:14px;">';
											subHtml += '	<div style="display:table;">';
											subHtml += '		<div style="position:relative;line-height:32px;display:table-row;">';
											subHtml += '			<span style="display:table-cell;background:#afbed7;width:27px;display: inline-block;height: 20px;text-align: center;line-height:21px;color: #fff;border-radius:10px;">';
											subHtml += item.d31.substr(0, 1);
											subHtml += '			</span>';
											subHtml += '			<span style="display:table-cell;min-width:70px;font-size: 16px; padding:0 5px;text-align:middle;" class="rf3_text1">';
											subHtml += item.floor;
											subHtml += '			</span>';
											subHtml += '			<span style="display:table-cell;width:auto;text-align:left;line-height: 20px;">';
											subHtml += item.d27 + ' · ' + item.d28;
											subHtml += '			</span>';
											subHtml += '		</div>';
											subHtml += '	</div>';
											subHtml += '	<div style="width:100%;">';
											subHtml += item.d24;
											subHtml += ' · ';
											subHtml += '		<span style="display: inline-block;">';
											subHtml += item.d29 + '㎡';
											subHtml += '		</span>';
											subHtml += '	</div>';
											subHtml += '</div>';
											subHtml += '<div class="ifs-tab-bar"></div>';
										});

										$('#dpaf_data_list').html(subHtml);
									}
								});
							}
						});

						$.get('https://data.disco.re/home/get_land_history/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);

							let html = '';
							data.reverse().forEach(item => {
								html += '<div style="display: table-row;line-height: 48px;">';
								html += '	<div style="display: table-cell;width:40%;text-align:left;font-size:14px;color:#50555a;padding-left:12px;">';
								html += item.move_date;
								html += '	</div>';
								html += '	<div style="display: table-cell;width:60%;text-align:left;font-size:14px;color:#1e1e23;">';
								html += item.reason;
								html += '	</div>';
								html += '</div>';
							});
							$('#land_history').html(html);
						});
						
						$.get('https://data.disco.re/home/land_price/?pnu=' + pnu.pnu, {}, function (data) {
							console.log(data);
							xLabels.length = 0;
							datapoints.length = 0;

							minValue = data[0][2];
							maxValue = data[0][2];

							data.forEach(item => {
								xLabels.push('`' + (item[0] + '').substr(2, 2) + '년');
								datapoints.push(item[2]);
								if (minValue > item[2])
									minValue = item[2];
								if (maxValue < item[2])
									maxValue = item[2];
							});

							gongChart.update();
						});
					});

					/*
										$.get('https://polygon.disco.re/get_land_by_latlng/?lat=' + data.posY + '&lng=' + data.posX, {}, function (result) {
											console.log(result);
					
											let tempPoly = null;
											tempPoly = parse_land_polygon_value(result.polygon); console.log(tempPoly);
					
											// 지도에 표시할 다각형을 생성합니다
											polygon = new kakao.maps.Polygon({
												path: tempPoly[0],//polygonPath, // 그려질 다각형의 좌표 배열입니다
												strokeWeight: 5, // 선의 두께입니다 
												strokeColor: '#75B8FA', // 선의 색깔입니다
												strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
												strokeStyle: 'dashed', // 선의 스타일 입니다
												fillColor: '#CFE7FF', // 채우기 색깔입니다
												fillOpacity: 0.7  // 채우기 불투명도 입니다  
					
											});
					
											// 지도에 다각형을 표시합니다
											polygon.setMap(map);
										});
					
										// 지도 화면 이동
										var moveLatLon = new kakao.maps.LatLng(data.posY, data.posX);
										map.panTo(moveLatLon);
					*/
				});	//End-of-$.get(url, {}, function(data) {
			}

			/*
			$('#map-layer1').on('click', function() {
				map.setMapTypeId(kakao.maps.MapTypeId.ROADMAP);
			});
			*/

			$('#map-layer2').on('click', function () {
				setOverlayMapTypeId('skyview');
			});

			$('#map-layer3').on('click', function () {
				setOverlayMapTypeId('terrain');
			});

			$('#map-layer4').on('click', function () {
				setOverlayMapTypeId('use_district');
			});

			$('#map-measure1').on('click', function () {
				$("#gnb_tool_layout .gnb_tool_wrap").animate({ "right": "-200px" }, 300);
				$("#gnb_tool_layout .gnb_tool_close").animate({ "right": "-220px" }, 300, function () {
					$("html").removeClass("gnbOn");
					$("#gnb_tool_layout").css("display", "none");
				});

				$('#cat_measure_sub').show();
				$('.category_bottom').css("top", "80px");
				$('.category_bottom').css("left", "10px");
				$('.category_bottom li').css("float", "none");
				$('#cat_measure_sub_close').css("display", "block");

				//$('.left_wrap.mini').css("display", "none");

				//중복선언
				//let isArea = false;
				//let isLength = false;

				isMap = false;
				isAround = false;
				//isAreaExtent = false;
				//isPrice = false;

				isMeasure = true;
				$('.category_top li').css("color", "#000");
				$('.category_top li').css("background-color", "#fff");

				$('#cat_measure').css("color", "#fff");
				$('#cat_measure').css("background-color", "#1263df");

				$('.category_bottom').hide();
				$('#cat_measure_sub').show();

				// Mobile using
				$('#areaMeasure').click(function () {
					if (isArea) {
						isArea = false;
						isAreaList = false;

						if (polygonArr.length > 0) {
							polygonArr.forEach(function (polygon) {
								polygon.setMap(null);
							});

							areaOverlayArr.forEach(function (areaOverlay) {
								areaOverlay.setMap(null);
							});
						}

						areaListCnt = 0;
						areaListSum = 0;

						//kakao.maps.event.addListener(map, 'click', jibunClickHandler);
						kakao.maps.event.removeListener(map, 'click', measuerAreaClickHandler);

						$('div.tab1').addClass('on');
						$('div.tab5').removeClass('on');

						$('#areaMeasure').css("color", "#000");
						$('#areaMeasure').css("background-color", "#fff");
					} else {
						isLength = false;
						isLengthList = false;

						drawingFlag = false;

						lengthListCnt = 0;
						lengthDisSum = 0;

						isArea = true;

						$('.detail_wrap .saleNum a').trigger('click');

						measureSet('면적');

						// 지도 위에 선이 표시되고 있다면 지도에서 제거합니다
						deleteClickLine();
						// 지도 위에 커스텀오버레이가 표시되고 있다면 지도에서 제거합니다
						deleteDistance();
						// 지도 위에 선을 그리기 위해 클릭한 지점과 해당 지점의 거리정보가 표시되고 있다면 지도에서 제거합니다
						deleteCircleDot();

						kakao.maps.event.removeListener(map, 'click', measuerLengthClickHandler);
						
						// 지도에 클릭 이벤트를 등록합니다
						// 지도를 클릭하면 마지막 파라미터로 넘어온 함수를 호출합니다
						if (polygon != null)
							polygon.setMap(null);
						kakao.maps.event.removeListener(map, 'click', jibunClickHandler);
						kakao.maps.event.addListener(map, 'click', measuerAreaClickHandler);

						$(document).on('click', '.mt-slot-btn', function (e) {
							let idx = $('.mt-slot-btn').index(this);

							polygonArr[idx].setMap(null);
							polygonArr.splice(idx, 1);

							areaOverlayArr[idx].setMap(null);
							areaOverlayArr.splice(idx, 1);

							areaAddressArr.splice(idx, 1);
							let selArea = parseFloat($('.areaListMeter').eq(idx).text()); //console.log(selArea);
							let selArea2 = parseFloat($('.areaListPyeong').eq(idx).text()); //console.log(selArea);
							$('.area-list').eq(idx).remove();

							//console.log($('.areaListCnt').length);
							for (let i = 0; i < $('.areaListCnt').length; i++) {
								$('.areaListCnt').eq(i).text(i + 1);
							}

							areaListCnt = $('.areaListCnt').length;
							areaListSum = areaListSum - selArea;
							let areaListSum2 = Number($('#mt_total_area2').text()) - selArea2;

							$('#mt_count').text(areaListCnt);
							if (areaListCnt > 0) {
								$('#mt_total_area').text(areaListSum.toFixed(1));
								$('#mt_total_area2').text(areaListSum2.toFixed(0));
								//$('#mt_total_gong_value').text(areaListSum.toFixed(1) + '억');
							} else {
								$('#mt_total_area').text('0');
								$('#mt_total_area2').text('0');
								$('#mt_total_gong_value').text('0 원');
							}
						});

						$('#lengthMeasure').css("color", "#000");
						$('#lengthMeasure').css("background-color", "#fff");

						$('#areaMeasure').css("color", "#fff");
						$('#areaMeasure').css("background-color", "#FF8080");
					}
				});

				// Mobile using
				$('#lengthMeasure').click(function () {
					if (isLength) {
						isLength = false;
						isLengthList = false;

						drawingFlag = false;

						lengthListCnt = 0;
						lengthDisSum = 0;

						// 지도 위에 선이 표시되고 있다면 지도에서 제거합니다
						deleteClickLine();
						// 지도 위에 커스텀오버레이가 표시되고 있다면 지도에서 제거합니다
						deleteDistance();
						// 지도 위에 선을 그리기 위해 클릭한 지점과 해당 지점의 거리정보가 표시되고 있다면 지도에서 제거합니다
						deleteCircleDot();

						//kakao.maps.event.addListener(map, 'click', jibunClickHandler);
						kakao.maps.event.removeListener(map, 'click', measuerLengthClickHandler);
						
						$('div.tab1').addClass('on');
						$('div.tab5').removeClass('on');

						$('#lengthMeasure').css("color", "#000");
						$('#lengthMeasure').css("background-color", "#fff");
					} else {
						isArea = false;
						isAreaList = false;

						areaListCnt = 0;
						areaListSum = 0;

						isLength = true;

						$('.detail_wrap .saleNum a').trigger('click');

						measureSet('거리');

						if (polygonArr.length > 0) {
							polygonArr.forEach(function (polygon) {
								polygon.setMap(null);
							});

							areaOverlayArr.forEach(function (areaOverlay) {
								areaOverlay.setMap(null);
							});
						}

						kakao.maps.event.removeListener(map, 'click', jibunClickHandler);
						kakao.maps.event.removeListener(map, 'click', measuerAreaClickHandler);

						//kakao.maps.event.addListener(map, 'click', measuerLengthClickHandler);

						//$('a.search').trigger('click');

						// 지도 위에 거리 측정하는 함수
						kakao.maps.event.addListener(map, 'click', measuerLengthClickHandler);

						$('#areaMeasure').css("color", "#000");
						$('#areaMeasure').css("background-color", "#fff");

						$('#lengthMeasure').css("color", "#fff");
						$('#lengthMeasure').css("background-color", "#FF8080");
					}
				});
			});


			let around_markers = [];
			$('#map-around').on('click', function () {
				$("#gnb_tool_layout .gnb_tool_wrap").animate({ "right": "-200px" }, 300);
				$("#gnb_tool_layout .gnb_tool_close").animate({ "right": "-220px" }, 300, function () {
					$("html").removeClass("gnbOn");
					$("#gnb_tool_layout").css("display", "none");
				});

				$('#cat_around_sub').show();
				$('.category_bottom').css("top", "80px");
				$('.category_bottom').css("left", "10px");
				$('.category_bottom li').css("float", "none");
				$('#cat_around_sub_close').css("display", "block");

				$('.left_wrap.mini').css("display", "none");

				// 마커를 클릭했을 때 해당 장소의 상세정보를 보여줄 커스텀오버레이입니다
				var placeOverlay = new kakao.maps.CustomOverlay({ zIndex: 1 }),
					contentNode = document.createElement('div'), // 커스텀 오버레이의 컨텐츠 엘리먼트 입니다 
					//markers = [], // 마커를 담을 배열입니다
					currCategory = ''; // 현재 선택된 카테고리를 가지고 있을 변수입니다	
				// 장소 검색 객체를 생성합니다
				var ps = new kakao.maps.services.Places(map);

				// 지도에 idle 이벤트를 등록합니다
				kakao.maps.event.addListener(map, 'idle', searchPlaces);

				// 커스텀 오버레이의 컨텐츠 노드에 css class를 추가합니다 
				contentNode.className = 'placeinfo_wrap';

				// 커스텀 오버레이의 컨텐츠 노드에 mousedown, touchstart 이벤트가 발생했을때
				// 지도 객체에 이벤트가 전달되지 않도록 이벤트 핸들러로 kakao.maps.event.preventMap 메소드를 등록합니다 
				addEventHandle(contentNode, 'mousedown', kakao.maps.event.preventMap);
				addEventHandle(contentNode, 'touchstart', kakao.maps.event.preventMap);

				// 커스텀 오버레이 컨텐츠를 설정합니다
				placeOverlay.setContent(contentNode);

				// 각 카테고리에 클릭 이벤트를 등록합니다
				addCategoryClickEvent();

				// 엘리먼트에 이벤트 핸들러를 등록하는 함수입니다
				function addEventHandle(target, type, callback) {
					if (target.addEventListener) {
						target.addEventListener(type, callback);
					} else {
						target.attachEvent('on' + type, callback);
					}
				}

				// 카테고리 검색을 요청하는 함수입니다
				function searchPlaces() {
					if (!currCategory) {
						return;
					}

					// 커스텀 오버레이를 숨깁니다 
					placeOverlay.setMap(null);

					// 지도에 표시되고 있는 마커를 제거합니다
					removeMarker();

					ps.categorySearch(currCategory, placesSearchCB, { useMapBounds: true });
				}

				// 장소검색이 완료됐을 때 호출되는 콜백함수 입니다
				function placesSearchCB(data, status, pagination) {
					if (status === kakao.maps.services.Status.OK) {

						// 정상적으로 검색이 완료됐으면 지도에 마커를 표출합니다
						displayPlaces(data);
					} else if (status === kakao.maps.services.Status.ZERO_RESULT) {
						// 검색결과가 없는경우 해야할 처리가 있다면 이곳에 작성해 주세요

					} else if (status === kakao.maps.services.Status.ERROR) {
						// 에러로 인해 검색결과가 나오지 않은 경우 해야할 처리가 있다면 이곳에 작성해 주세요

					}
				}

				// 지도에 마커를 표출하는 함수입니다
				function displayPlaces(places) {

					// 몇번째 카테고리가 선택되어 있는지 얻어옵니다
					// 이 순서는 스프라이트 이미지에서의 위치를 계산하는데 사용됩니다
					var order = document.getElementById(currCategory).getAttribute('data-order');



					for (var i = 0; i < places.length; i++) {

						// 마커를 생성하고 지도에 표시합니다
						var marker = addMarker(new kakao.maps.LatLng(places[i].y, places[i].x), order);

						// 마커와 검색결과 항목을 클릭 했을 때
						// 장소정보를 표출하도록 클릭 이벤트를 등록합니다
						(function (marker, place) {
							kakao.maps.event.addListener(marker, 'click', function () {
								displayPlaceInfo(place);
							});
						})(marker, places[i]);
					}
				}

				// 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다
				function addMarker(position, order) {
					var imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/places_category.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다
						imageSize = new kakao.maps.Size(27, 28),  // 마커 이미지의 크기
						imgOptions = {
							spriteSize: new kakao.maps.Size(72, 208), // 스프라이트 이미지의 크기
							spriteOrigin: new kakao.maps.Point(46, (order * 36)), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표
							offset: new kakao.maps.Point(11, 28) // 마커 좌표에 일치시킬 이미지 내에서의 좌표
						},
						markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),
						marker = new kakao.maps.Marker({
							position: position, // 마커의 위치
							image: markerImage
						});

					marker.setMap(map); // 지도 위에 마커를 표출합니다
					around_markers.push(marker);  // 배열에 생성된 마커를 추가합니다

					return marker;
				}

				// 지도 위에 표시되고 있는 마커를 모두 제거합니다
				function removeMarker() {
					for (var i = 0; i < around_markers.length; i++) {
						around_markers[i].setMap(null);
					}
					around_markers = [];
				}

				// 클릭한 마커에 대한 장소 상세정보를 커스텀 오버레이로 표시하는 함수입니다
				function displayPlaceInfo(place) {
					var content = '<div class="placeinfo">' +
						'   <a class="title" href="' + place.place_url + '" target="_blank" title="' + place.place_name + '">' + place.place_name + '</a>';

					if (place.road_address_name) {
						content += '    <span title="' + place.road_address_name + '">' + place.road_address_name + '</span>' +
							'  <span class="jibun" title="' + place.address_name + '">(지번 : ' + place.address_name + ')</span>';
					} else {
						content += '    <span title="' + place.address_name + '">' + place.address_name + '</span>';
					}

					content += '    <span class="tel">' + place.phone + '</span>' +
						'</div>' +
						'<div class="after"></div>';

					contentNode.innerHTML = content;
					placeOverlay.setPosition(new kakao.maps.LatLng(place.y, place.x));
					placeOverlay.setMap(map);
				}


				// 각 카테고리에 클릭 이벤트를 등록합니다
				function addCategoryClickEvent() {
					var category = document.getElementById('cat_around_sub'),
						children = category.children;

					for (var i = 0; i < children.length; i++) {
						children[i].onclick = onClickCategory;
					}
				}

				// 카테고리를 클릭했을 때 호출되는 함수입니다
				function onClickCategory() {
					var id = this.id,
						className = this.className;

					placeOverlay.setMap(null);

					if (className === 'on') {
						currCategory = '';
						changeCategoryClass();
						removeMarker();
					} else {
						currCategory = id;
						changeCategoryClass(this);
						searchPlaces();
					}
				}

				// 클릭된 카테고리에만 클릭된 스타일을 적용하는 함수입니다
				function changeCategoryClass(el) {
					var category = document.getElementById('cat_around_sub'),
						children = category.children,
						i;

					for (i = 0; i < children.length; i++) {
						children[i].className = '';
					}

					if (el) {
						el.className = 'on';
					}
				}
			});

			$(".category_bottom li a").on("click", function () {
				$('.category_bottom').hide();

				for (var i = 0; i < around_markers.length; i++) {
					around_markers[i].setMap(null);
				}
				around_markers = [];

				if (polygonArr.length > 0) {
					polygonArr.forEach(function (polygon) {
						polygon.setMap(null);
					});

					areaOverlayArr.forEach(function (areaOverlay) {
						areaOverlay.setMap(null);
					});
				}

				// 지도 위에 선이 표시되고 있다면 지도에서 제거합니다
				deleteClickLine();
				// 지도 위에 커스텀오버레이가 표시되고 있다면 지도에서 제거합니다
				deleteDistance();
				// 지도 위에 선을 그리기 위해 클릭한 지점과 해당 지점의 거리정보가 표시되고 있다면 지도에서 제거합니다
				deleteCircleDot();

				//kakao.maps.event.addListener(map, 'click', jibunClickHandler);
				kakao.maps.event.removeListener(map, 'click', measuerLengthClickHandler);
				kakao.maps.event.removeListener(map, 'click', measuerAreaClickHandler);
				
				$('.left_wrap.mini').css("display", "block");

				isLength = false;
				isLengthList = false;

				drawingFlag = false;

				lengthListCnt = 0;
				lengthDisSum = 0;

				isArea = false;
				isAreaList = false;

				areaListCnt = 0;
				areaListSum = 0;

				$('#lengthMeasure').css("color", "#000");
				$('#lengthMeasure').css("background-color", "#fff");

				$('#areaMeasure').css("color", "#000");
				$('#areaMeasure').css("background-color", "#fff");

				$('div.tab1').addClass('on');
				$('div.tab5').removeClass('on');
			});
			
					
		});
		
		
		

			
	</script>

</head>

<body th:inline="text">
	<!--top_layout-->
	<div id="top_layout" class="type3">
		<th:block th:replace="layout/fragments/front/header :: headerFragment"></th:block>
	</div>
	<!--//top_layout-->
	<!--gis_layout-->
	<div id="gis_layout">
		<!--gis_wrap-->
		<div class="gis_wrap">
			<!--
			<div class="location" id="realTrans" style="z-index: 9999;">
				<img src="/img/main/ico_real_transact.png" />
				<!--
                <div class="search">
                    <input type="text" id="w" name="w" placeholder="매물 동명으로 검색 이동" />
                    <a href="javascript:void(0);" class="dongSearch">검색</a>
                </div>
                <a class="gps" href="#">gps</a>
                <a class="zoom_in" href="#">in</a>
                <a class="zoom_out" href="#">out</a>                
			
			</div>
				-->
			<div class="category_rtOnOff" id="realTrans">
				실거래가
				<div class="category_rtOn">On</div>
				<div class="category_rtOff">Off</div>
			</div>
			<div class="category_select">
				<select id="selSaleDetailType" name="selSaleDetailType" style="border-radius: 5px; height: 30px;">
					<!-- <option value="">물건종류</option> -->
					<option value="00" style="font-weight: bold;">물건종류 전체</option>
					<option value="a1" style="font-weight: bold;" selected>아파트</option>
					<option value="a2" style="font-weight: bold;">오피스텔</option>
					<option value="a3" style="font-weight: bold;">분양·입주권</option>
					<option value="h1" style="font-weight: bold;">단독·다가구</option>
					<option value="h2" style="font-weight: bold;">연립·다세대</option>
					<option value="s1" style="font-weight: bold;">상가·업무</option>
					<option value="l3" style="font-weight: bold;">공장·창고</option>
					<option value="l1" style="font-weight: bold;">토지</option>
				</select>
				<select id="selTradeType" name="selTradeType" style="border-radius: 5px; height: 30px;">
					<!-- <option value="">거래종류</option> 
					<option value="all" selected>거래종류 전체</option>
					-->
					<option value="A" selected>매매</option>
					<option value="C">전세</option>
					<option value="B">월세</option>
				</select>
			</div>
			<div class="category_tradeYear">				
				<label for="tradeYear" style="display: inline-block;">거래년도 : </label>
				<div id="tradeYear" style="display: inline-block;">2022</div>
				<div id="slider-range" style="display: inline-block; width: 95px; margin-left: 10px; margin-right: 10px;"></div>
				<div id="tradeYearEnd" style="display: inline-block;">2023</div>				
			</div>
			<ul class="category_top">
				<li id="cat_map" data-order="0">
					지도
				</li>
				<li id="cat_measure" data-order="1">
					측정
				</li>
				<li id="cat_around" data-order="2">
					주변
				</li>
				<li id="cat_area" data-order="3" style="line-height: 25px;">
					<div id="catAreaSub1">
						평
					</div>
					<div id="catAreaSub2"
						style="border-top: 1px solid #acacac;color: rgb(255, 255, 255);background-color: rgb(18, 99, 223);">
						㎡
					</div>
				</li>
				<li id="cat_price" data-order="4" style="line-height: 25px;">
					<div id="catPriceSub1">
						총액
					</div>
					<div id="catPriceSub2"
						style="border-top: 1px solid #acacac;color: rgb(255, 255, 255);background-color: rgb(18, 99, 223);">
						단가
					</div>
				</li>
			</ul>
			<ul id="cat_map_sub" class="category_bottom">
				<li id="mapTypeChange1" data-order="0">
					위성
				</li>
				<li id="mapTypeChange2" data-order="1">
					지적
				</li>
				<li id="mapTypeChange3" data-order="2">
					지형
				</li>
				<li id="mapTypeChange4" data-order="3">
					거리뷰
				</li>
			</ul>
			<ul id="cat_measure_sub" class="category_bottom">
				<li id="lengthMeasure" data-order="1">
					<span class="category_bg_len"></span>
					거리
				</li>
				<li id="areaMeasure" data-order="0">
					<span class="category_bg_area"></span>
					면적
				</li>
				<li id="cat_measure_sub_close">
					<a class="gnb_tool_close" href="#">닫기</a>
				</li>
			</ul>
			<ul id="cat_around_sub" class="category_bottom">
				<li id="BK9" data-order="0">
					<span class="category_bg bank"></span>
					은행
				</li>
				<li id="MT1" data-order="1">
					<span class="category_bg mart"></span>
					마트
				</li>
				<li id="PM9" data-order="2">
					<span class="category_bg pharmacy"></span>
					약국
				</li>
				<li id="OL7" data-order="3">
					<span class="category_bg oil"></span>
					주유소
				</li>
				<li id="CE7" data-order="4">
					<span class="category_bg cafe"></span>
					카페
				</li>
				<li id="CS2" data-order="5">
					<span class="category_bg store"></span>
					편의점
				</li>
				<li id="cat_around_sub_close">
					<a class="gnb_tool_close" href="#">닫기</a>
				</li>
			</ul>
			<div class="category_tool_mobile">
				<img src="https://aurora.disco.re/static/common/img/new/ic-main-memu@3x.png?ver=1686201881"
					width="30px">
			</div>

			<div id="gis_container">
				<div class="roadview_wrap">
					<div id="roadview" style="width:100%;height:100%;"></div> <!-- 로드뷰를 표시할 div 입니다 -->
				</div>				
				<div class="map_wrap">
					<div id="map" class="gis">
						GIS
					</div>
				</div>				
			</div>
		</div>
		<!--//gis_wrap-->
		<!--left_wrap-->
		<div class="left_wrap">
			<div class="headBox">
				<div class="banner_wrap" th:if="${banner != null}">
					<div class="search">
						<div class="search_wrap">
							<div class="searchBox">
								<div class="selectBox">							
									<select id="searchSido">
										<option value="0">시·도</option>
										<option value="01">강원특별자치도</option>
										<option value="02">경기도</option>
										<option value="03">경상남도</option>
										<option value="04">경상북도</option>
										<option value="05">광주광역시</option>
										<option value="06">대구광역시</option>
										<option value="07">대전광역시</option>
										<option value="08">부산광역시</option>
										<option value="09">서울특별시</option>
										<option value="10">세종특별자치시</option>
										<option value="11">울산광역시</option>
										<option value="12">인천광역시</option>
										<option value="13">전라남도</option>
										<option value="14">전라북도</option>
										<option value="15">제주특별자치도</option>
										<option value="16">충청남도</option>
										<option value="17">충청북도</option>
									</select>							
								</div>						
								<div class="selectBox">
									<select id="searchSigungu">
										<option value="0">시·군·구</option>
									</select>							
								</div>
								<div class="selectBox">
									<select id="searchEmd">
										<option value="0">읍·면·동</option>
									</select>							
								</div>
								<div class="selectBox lp_open" style="line-height: 50px;font-size: 1.2em;text-align: center;cursor: pointer;" data-lp="04l00p">
									직접입력
								</div>
								<a href="javascript:void(0);" class="dongSearch">검색</a>
							</div>
						</div>
					</div>
					<!--
                    <a class="thumb" th:href="${banner.linkUrl}" target="_blank">
                        <img th:src="${banner.imagePath}" />
                    </a>
                    -->
				</div>
				<!--로그인시 노출-->
				<div class="tab_wrap type2" th:if="${IS_AUTHENTICATED}">
					<ul>
						<li th:class="${form.active=='tab4'? '': 'on'}"><a href="#" data-tab="tab1">전체 매물</a></li>
						<li th:unless="${IS_AGENT_USER}"><a href="#" data-tab="tab2">등록 매물</a></li>
						<!-- 공인중개사/임대관리사가 아닌 경우 -->
						<li th:if="${IS_AGENT_USER}"><a href="#" data-tab="tab2">등록/열람매물</a></li>
						<!-- 공인중개사/임대관리사인 경우 -->
						<li><a href="#" data-tab="tab3">아이템 구매</a></li>
						<li th:class="${form.active=='tab4'? 'on': ''}"><a href="#" data-tab="tab4">포인트 & 관리</a></li>
					</ul>
				</div>
				<!--//로그인시 노출-->
			</div>
			<!--tab0(Dummy)-->
			<div class="tabCon_wrap tab0" style="display:none;">
				<ul class="list loading">
					<li class="ad" th:each="item : ${list}">
						<a class="menu" href="#" th:attr="data-rid=${form.rid}">a</a>
					</li>
				</ul>
			</div>
			<!--//tab1-->
			<!--tab1-->
			<div class="tabCon_wrap tab1" th:classappend="${form.active=='tab4'? '': 'on'}">
			</div>
			<!--//tab1-->
			<!--tab2-->
			<div class="tabCon_wrap tab2" th:if="${IS_AUTHENTICATED}">
			</div>
			<!--//tab2-->
			<!--tab3-->
			<div class="tabCon_wrap tab3" th:if="${IS_AUTHENTICATED}">
				<h2>누적된 포인트로<br>아이템 구매하고,<br>효과적으로 광고하세요.</h2>
				<!--itemList_wrap-->
				<div class="itemList_wrap">
					<!--itemBox-->
					<div class="itemBox type1">
						<h3>매물목록 상단UP</h3>
						<p>내가 등록한 매물을 매물목록 상단으로 노출하는 아이템.<br>(매물 소재지 목록에서만 적용됩니다.) </p>
						<ul>
							<li>구매 시 보유 포인트에서 차감 됩니다.</li>
							<li>아이템 1개당 1개의 매물에 적용.</li>
							<li>적용기간은 10일 간 적용(자정 기준)</li>
							<li>적용기간 내 적용 취소 시 아이템 소멸.</li>
							<li>구매 후 1일 이상 사용 시 환불 불가능.</li>
						</ul>
						<form id="frmItem1" name="frmItem1" method="post" onsubmit="return false">
							<div class="buyBox">
								<dl>
									<dt>보유 포인트</dt>
									<dd class="session_point_type2"><span
											th:text="${#numbers.formatDecimal( USE_AVAIL_POINT, 0, 'COMMA', 0, 'POINT')}"
											th:remove="tag">0</span> P</dd>
								</dl>
								<dl>
									<dt>구매 수량</dt>
									<dd>
										<div class="selectBox">
											<select name="itemCount">
												<option value="">-선택-</option>
												<option value="1">1</option>
												<option value="2">2</option>
												<option value="3">3</option>
												<option value="4">4</option>
												<option value="5">5</option>
											</select>
										</div>
										<p class="buyPoint1">0원</p>
									</dd>
								</dl>
							</div>
						</form>
						<div class="btn_wrap">
							<a href="#" class="item1">아이템 구매</a>
						</div>
					</div>
					<!--//itemBox-->
					<!--itemBox-->
					<div class="itemBox type1" th:if="${USER_TYPE=='AA' or USER_TYPE=='RA'}"><!-- 공인중개사나 임대관리사만 노출 -->
						<h3>추천중개사목록 상단UP</h3>
						<p>공인중개사 목록에서 상단으로 노출되는 아이템.<br>(매물 소재지 목록에서만 적용됩니다.)</p>
						<ul>
							<li>구매 시 보유 포인트에서 차감. </li>
							<li>매물 유형별로 적용 (유형별 별도 구매)</li>
							<li>적용기간은 10일 간 적용 (자정 기준)</li>
							<li>구매 시 즉시 적용되며, 적용 취소 및 환불은 불가능.</li>
						</ul>
						<form id="frmItem2" name="frmItem2" method="post" onsubmit="return false">
							<div class="buyBox">
								<dl>
									<dt>보유 포인트</dt>
									<dd class="session_point_type2"><span
											th:text="${#numbers.formatDecimal( USE_AVAIL_POINT, 0, 'COMMA', 0, 'POINT')}"
											th:remove="tag">0</span> P</dd>
								</dl>
								<dl>
									<dt>매물유형</dt>
									<dd>
										<div class="selectBox">
											<select name="saleType">
												<option value="">-선택-</option>
												<option th:each="item : ${SALE_TYPE}" th:value="${item.cd}"
													th:text="${item.nm}">원룸ㆍ투룸+</option>
											</select>
										</div>
										<p class="buyPoint2"
											th:text="${#numbers.formatDecimal( ITEM2_PRICE, 0, 'COMMA', 0, 'POINT')+'원'}">
											0원</p>
									</dd>
								</dl>
							</div>
						</form>
						<div class="btn_wrap">
							<a href="#" class="item2">아이템 구매</a>
						</div>
					</div>
					<!--//itemBox-->
				</div>
				<!--//itemList_wrap-->
			</div>
			<!--//tab3-->

			<!--tab4-->
			<div class="tabCon_wrap tab4" th:classappend="${form.active=='tab4'? 'on': ''}" th:if="${IS_AUTHENTICATED}">
				<div class="tit_wrap">
					<!--<h2>알써니 포인트관리</h2>-->
					<p>[[${USER_NM}]]([[${USER_ID}]])</p>
					<div class="infoBox">
						<ul>
							<li>[[${USER_EMAIL}]]</li>
							<li>[[${USER_PHONE}]]</li>
						</ul>
						<a href="#" class="lp_open" data-lp="02la04p01"
							th:if="${USER_TYPE=='NM' or USER_TYPE=='BM'}">편집</a><!-- 일반/지점관리자 -->
						<a href="#" class="lp_open" data-lp="02lb04p01"
							th:if="${USER_TYPE=='AA' or USER_TYPE=='RA'}">편집</a><!-- 공인/임대관리사 -->
					</div>
					<div class="pointBox">
						<dl>
							<dt>누적 포인트</dt>
							<dd>
								<p class="session_point_type2">[[${#numbers.formatDecimal( USE_AVAIL_POINT, 0, 'COMMA',
									0, 'POINT')}]] P</p>
								<div class="btn">
									<a href="#" class="lp_open" data-lp="02lb04p04">충전 신청</a>
									<a href="#" class="lp_open" data-lp="02lb04p03">출금 신청</a>
								</div>
							</dd>
						</dl><br>
						<div>매물을 등록하면 포인트가 쌓이고,현금으로 출금하세요.</div>
					</div>
				</div>
				<div class="pointList_wrap">
					<div class="titBox">
						<h2>포인트 내역</h2>
						<div class="typeBox">
							<div id="pointType" class="selectBox">
								<select>
									<option value="0">전체내역</option>
									<option value="1">적립내역</option>
									<option value="2">사용내역</option>
									<option value="3">충전내역</option>
								</select>
							</div>
							<div id="buyList" class="selectBox">
								<select>
									<option>매물선택(전체)</option>
									<!--
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                     -->
								</select>
							</div>
						</div>
					</div>
					<ul class="listBox tab4_list">
						<!--
                        <li>
                           <p class="date">2020.12.30</p>
                           <p class="txt">미래 부동산</p>
                           <p class="point">
                               <span class="type1">열람</span>
                               +1,000 P
                           </p>
                        </li>
                        <li>
                           <p class="date">2020.12.30</p>
                           <p class="txt">다랑이 중개관리자무소</p>
                           <p class="point">
                               <span class="type2">충전</span>
                               +1,000 P
                           </p>
                        </li>
                        <li>
                           <p class="date">2020.12.30</p>
                           <p class="txt">아이템1 구매 2건</p>
                           <p class="point">
                               <span class="type3">사용</span>
                               -1,000 P
                           </p>
                        </li>
                        <li>
                           <p class="date">2020.12.30</p>
                           <p class="txt">포인트 출금</p>
                           <p class="point">
                               <span class="type4">출금</span>
                               -1,000 P
                           </p>
                        </li>
                        -->
					</ul>
					<ul class="paging">
						<!--
                        <li class="prev"><a href="#">이전</a></li>
                        <li class="num"><a href="#">1</a></li>
                        <li class="num"><a href="#">2</a></li>
                        <li class="num"><a href="#">3</a></li>
                        <li class="num"><a href="#">4</a></li>
                        <li class="next"><a href="#">다음</a></li>
                        -->
					</ul>
				</div>
			</div>
			<!--//tab4-->

			<!--tab5-->
			<div class="tabCon_wrap tab5">
			</div>
			<!--//tab5-->
			<th:block th:replace="layout/fragments/front/footer2 :: footerFragment"></th:block>
		</div>
		<!--//left_wrap-->

		<!--filter_wrap-->
		<div class="filter_wrap on">
			<a href="#" th:text="${saleTypeNm}">원룸ㆍ투룸+</a>
			<div class="filterBox">
				<form id="frmFilter" name="frmFilter" method="get" action="#">
					<input type="hidden" id="saleType" name="saleType" th:value="${form.saleType}" />
					<input type="hidden" id="page" name="page" value="1" />
					<input type="hidden" id="swX" name="swX" value="" />
					<input type="hidden" id="swY" name="swY" value="" />
					<input type="hidden" id="neX" name="neX" value="" />
					<input type="hidden" id="neY" name="neY" value="" />
					<input type="hidden" id="sido" name="sido" value="" />
					<input type="hidden" id="sigungu" name="sigungu" value="" />
					<input type="hidden" id="dong" name="dong" value="" />
					<div class="checkBox">
						<div class="txtRadio" th:each="item, state : ${SALE_TYPE_DTL}">
							<input th:id="${'filter_ck_'+state.index}" name="saleDetailType" th:value="${item.cd}"
								type="checkbox">
							<label th:for="${'filter_ck_'+state.index}" th:text="${item.nm}">원룸</label>
						</div>
						<div class="txtRadio" th:each="item, state : ${TRADE_TYPE}">
							<input th:id="${'tradetype_ck_'+state.index}" name="tradeType" th:value="${item.cd}"
								type="checkbox">
							<label th:for="${'tradetype_ck_'+state.index}" th:text="${item.nm}">매매</label>
						</div>
					</div>
					<div class="input_wrap">
						<dl>
							<dt>매매·보증·전세금</dt>
							<dd class="rangeBox">
								<input type="text" name="priceFr" class="comma" placeholder="만 단위" />
								<span>~</span>
								<input type="text" name="priceTo" class="comma" placeholder="만 단위" />
							</dd>
						</dl>
						<dl>
							<dt>월세</dt>
							<dd class="rangeBox">
								<input type="text" name="monthlyPriceFr" class="comma" placeholder="만 단위" />
								<span>~</span>
								<input type="text" name="monthlyPriceTo" class="comma" placeholder="만 단위" />
							</dd>
						</dl>
						<dl>
							<dt>전용면적</dt>
							<dd class="rangeBox">
								<input type="text" name="privateAreaFr" class="py" placeholder="㎡ 단위" />
								<span>~</span>
								<input type="text" name="privateAreaTo" class="py" placeholder="㎡ 단위" />
							</dd>
						</dl>
						<dl>
							<dt>준공년도</dt>
							<dd class="rangeBox">
								<input type="text" name="completionYearFr" class="year" maxlength="4"
									placeholder="년 단위" />
								<span>~</span>
								<input type="text" name="completionYearTo" class="year" maxlength="4"
									placeholder="년 단위" />
							</dd>
						</dl>
						<!--
                    <dl>
                        <dt>입주 시점</dt>
                        <dd class="selectBox">
                            <select id="moveinType" name="moveinType">
                                <option value="">-전체-</option>
                                <option th:each="item : ${MOVEIN}" th:value="${item.cd}" th:text="${item.nm}">1</option>
                            </select>
                        </dd>
                    </dl>
                    -->
					</div>
				</form>
				<div class="btn_wrap">
					<a href="#" class="search">매물검색</a>
				</div>
			</div>
		</div>
		<!--//filter_wrap-->

		<!--detail_wrap-->
		<div class="detail_wrap">
			
			<div class="saleDetail">
				<div id="saleNum" class="saleNum">
					<p>매물번호<span data-field="saleNo"></span></p>					
					<a href="#">닫기</a>
				</div>
			</div>
			<div class="jibunDetail">
				<div class="saleNum">					
					<p id="jibunAddress"></p>
					<a href="#">닫기</a>
				</div>
			</div>
				
			<div class="detail_info_navi">
				<div class="detail_info_navi_cell cell_hidden">
					<a href="#saleNum">매물정보</a>
				</div>
				<div class="detail_info_navi_cell">
					<a href="#dp_sales_prefix">실거래가</a>
				</div>
				<div class="detail_info_navi_cell">
					<a href="#dp_land_prefix">토지정보</a>
				</div>
				<div class="detail_info_navi_cell detail_info_navi_cell_right">
					<a href="#dp_arch_prefix">건물정보</a>
				</div>
			</div>
	
			<div class="saleDetail">
				<div class="btn_wrap">
					<div class="left">
						<a href="#" class="gislp_open getoffer" data-lp="broker" data-rid=""
							th:unless="${USER_TYPE=='AA' || USER_TYPE=='RA'}">알선받기</a>
						<a href="#" class="dooffer" data-rid="" th:if="${USER_TYPE=='AA' || USER_TYPE=='RA'}">알선하기</a>
						<a href="#" class="edit" data-rid="">편집</a>
						<a href="#" class="lp_open advertising" data-rid="" data-lp="02la02p01">광고</a>
					</div>
					<div class="right">
						<a class="report gislp_open" data-lp="report" data-rid="" href="#"
							th:if="${USER_TYPE=='NM' || USER_TYPE=='BM' || USER_TYPE=='AA' || USER_TYPE=='RA'}">신고하기</a>
						<div class="share">
							<a href="#" class="share" data-rid="">공유하기</a>
							<!--
	                        <div class="sns">
	                            <a class="n1" href="#" data-rid="">페이스북</a>
	                            <a class="n2" href="#" data-rid="">인스타그램</a>
	                            <a class="n3" href="#" data-rid="">카카오톡</a>
	                        </div>
	                    	-->
						</div>
					</div>
				</div>
				<div id="slide_detail" class="slide_wrap">
					<div class="sliderBox">
						<ul class="photoList">
							<!--
	                        <li class="thumb"><img src="/img/sub/visual_img_2.png" /></li>
	                        <li class="thumb"><img src="/img/sub/visual_img_2.png" /></li>
	                        <li class="thumb"><img src="/img/sub/visual_img_2.png" /></li>
	                        -->
						</ul>
					</div>
					<div class="controlBox">
						<button type="button" class="btn_prev">이전</button>
						<button type="button" class="btn_next">다음</button>
					</div>
				</div>
				<div class="tag_wrap hashtag">
					<!--
	                <p>#반려동물</p>
	                <p>#단기가능</p>
	                <p>#1년가능</p>
	                -->
				</div>
				<div class="info_wrap">
					<dl>
						<dt data-field="tradeTypeAndPrice"><!-- 월세 보200 / 월35 --></dt>
						<dd data-field="dongAddr"><!-- 서울시 강남구 삼성동 --></dd>
						<dd data-field="info1"><!-- 원룸 | 면적 33㎡ | 2층 | 남동향 | 공용주차 --></dd>
						<dd data-field="info2"><!-- 엘리베이터 있음 | 준공 2020년 | 입주협의 --></dd>
						<dd data-field="info3"><!-- 반려동물 가능 | 단기 월 55만원 (2개월 이상) --></dd>
						<dd data-field="info4"><!-- 매물정보 항목 --></dd>
	
					</dl>
					<dl>
						<dt data-field="maintenanceFeeWon">관리비</dt>
						<dd data-field="includeItems"></dd>
					</dl>
					<dl>
						<dt>옵션</dt>
						<dd data-field="optionItems"></dd>
					</dl>
					<dl>
						<dt>위치정보</dt>
						<dd data-field="dongAddr"></dd>
						<!-- <dd class="map"><img src="/img/sub/map.PNG" /></dd> -->
						<dd class="map">
							<div id="staticMap" style="width:100%;height:280px;"></div>
						</dd>
					</dl>
				</div>
			</div>
			
			<div class="jibunDetail">
				<div class="detail_info_divider"></div>
							  
				<div id="minimap_container" class="view_map">
				    <div id="minimap_mapWrapper" style="width:100%;height:300px;position:relative;">
				        <div id="minimap_map" style="width:100%;height:100%"></div> 
				        <input type="button" id="minimap_btnRoadview" onclick="minimapToggle(false)" title="로드뷰 보기" value="로드뷰">
				    </div>
				    <div id="minimap_rvWrapper" style="width:100%;height:300px;position:absolute;top:0;left:0;">
				        <div id="minimap_roadview" style="height:100%"></div> 
				        <input type="button" id="minimap_btnMap" onclick="minimapToggle(true)" title="지도 보기" value="지도">
				    </div>
				</div>
			</div>
 			
			<div class="detail_info_divider"></div>
			
			<div id="dp_sales_prefix" class="detail_info_header_prefix"></div>

			<div class="detail_info_header">
				<div>
					<h3>실거래가</h3>
				</div>				
			</div>

			<div>				
				<span class="ddiv-sub-title">
					<span id="trp-detail-period" style="display:inline;">거래내역</span>
					<span id="trp-detail-period-cnt" style="display:inline;"></span>
				</span>
			</div>

			<div class="detail_tradings_table">
				<div class="detail_tradings_table_row">					
					<div class="detail_tradings_table_cell" style="width: 22%;">거래일</div>
					<div class="detail_tradings_table_cell" style="width: 20%;">거래금액</div>
					<div class="detail_tradings_table_cell" style="width: auto;">동/층/호</div>
					<div class="detail_tradings_table_cell" style="width: 90px;"></div>
				</div>
			</div>

			<div id="detail_tradings_table_conts">

			</div>

			<div class="detail_info_divider"></div>
			
			<div id="dp_land_prefix" class="detail_info_header_prefix"></div>
			
			<div class="detail_info_header">
				<div>
					<h3>토지 정보</h3>
				</div>
			</div>
			<div class="detail_info_body">
				<div>
					<div class="detail_info_body_sub">
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">면적</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="land_forest_info_area" class="to-area-field"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">지목</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="land_forest_info_purpose"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">용도지역</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="p6"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">이용상황</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="p10"></span>
							</div>
						</div>
					</div>
					<div class="detail_margin_div"></div>
					<div class="detail_info_body_sub">
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">소유구분</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="owner_gbn"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">소유권변동일자</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="days"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">소유권변동원인</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="why"></span>
							</div>
						</div>
					</div>
					<div class="detail_margin_div"></div>
					<div class="detail_info_body_sub">
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">도로접면</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="p16"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">지형높이</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="p12"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">지형형상</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="p14"></span>
							</div>
						</div>
					</div>
					<div class="detail_margin_div"></div>
					<div class="detail_data_txt detail_data_txt_title2">토지이용계획</div>
					<div class="detail_data_txt detail_data_txt_title2 detail_txt_black">국토의 계획 및 이용에 관한 법률</div>
					
					<div class="detail_info_body_sub">
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">포함</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="info_main_0" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">저촉</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="info_main_1" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">접함</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="info_main_2" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
					</div>
					<div class="detail_margin_div"></div>
					<div class="detail_data_txt detail_data_txt_title2">기타법률</div>
					<div class="detail_info_body_sub">
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">포함</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="arch_info_0" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">저촉</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="arch_info_1" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">접함</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="arch_info_2" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
					</div>
					<div class="detail_margin_div"></div>
					<div class="detail_data_txt detail_data_txt_title2">토지 이동(변동) 사유</div>
					<div class="detail_land_history_info">
						<div class="detail_land_history_info_table">
							<div class="detail_land_history_info_table_row">
								<div class="detail_land_history_info_table_cell1">일자</div>
								<div class="detail_land_history_info_table_cell2">사유</div>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div id="land_history" class="detail_land_history_info_table"></div>
					</div>

					<div class="detail_margin_div"></div>
					<div>
						<div class="detail_data_txt detail_data_txt_title2">개별공시지가</div>
						<div id="mdv_chart_div">
							<canvas id="mdv_chart_canvas" width="760" height="440" style="width: 380px; height: 220px;"></canvas>
						</div>							
					</div>
				</div>

			</div>

			<div class="detail_info_divider"></div>

			<div id="dp_arch_prefix" class="detail_info_header_prefix"></div>
			<div class="detail_info_header">
				<div>
					<h3>건물 정보</h3>
				</div>
			</div>
				
			<div class="detail_list_btn">
				<div class="detail_list_btn_sub">
					<div class="detail_list_btn_sub_txt">
						<span>표제부(주1)</span>
						<span>
							<img src="https://aurora.disco.re/static/common/img/ico_s_extend3_4x.png?ver=1681968257" width="12px" id="dpa_list_symbol">
						</span>
					</div>
					<div class="detail_expand_txt detail_txt_blue"></div>
				</div>
			</div>

			<div>
				<div>
					<div class="detail_info_body_sub">
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">건물이름</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="dpa_overall_b1" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">주용도</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="dpa_overall_a1" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div style="display:table-row;">
								<div class="detail_data_txt detail_data_txt_title">기타용도</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_overall_a1_1" class="detail_data_txt_conts_span"></span>
								</div>
							</div>
						</div>
						
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">주구조</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_title_b5_1" class="detail_data_txt_conts_span"></span>
								</div>
							</div>
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">지붕구조</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_title_b5_2" class="detail_data_txt_conts_span"></span>
								</div>
							</div>
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">높이</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_overall_c2"></span>
								</div>
							</div>
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">지상/지하</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_overall_c5"></span>
								</div>
							</div>
						
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">대지면적</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="dpa_overall_a2" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">건축면적</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="dpa_overall_a3" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">연면적</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="dpa_overall_b2" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">용적률산정연면적</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="dpa_overall_b3" class="detail_data_txt_conts_span"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">세대 수</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<div class="detail_data_txt_conts_sub">
									<span>세대</span>
									<span>가구</span>
									<span>호수</span>
								</div>
								<div class="detail_data_txt_conts_sub2">
									<span id="dpa_overall_c3_0">0</span>
									<span id="dpa_overall_c3_1">0</span>
									<span id="dpa_overall_c3_2">0</span>
								</div>
							</div>
						</div>

						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">외필지 수</div>
							<div class="detail_data_txt detail_data_txt_conts">
								<span id="dpa_overall_a5"></span>
							</div>
						</div>
						
						<div class="detail_info_body_sub_detail_divider"></div>
						
						<div class="detail_info_body_sub_detail">
							<div class="detail_data_txt detail_data_txt_title">오수정화시설</div>
						</div>
						<div class="detail_info_body_sub">
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">형식</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_overall_g23" class="detail_data_txt_conts_span"></span>
								</div>
							</div>
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">형식 (기타)
								</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_overall_g24" class="detail_data_txt_conts_span"></span>
								</div>
							</div>
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">용량 (인용)
								</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_overall_g27" class="detail_data_txt_conts_span"></span>
								</div>
							</div>
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">용량 (루베)
								</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpa_overall_g28" class="detail_data_txt_conts_span"></span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

				<div class="detail_margin_div"></div>
				<div class="detail_list_btn">
					<div class="detail_list_btn_sub">
						<div class="detail_list_btn_sub_txt">
							<span>건축물현황</span>
							<span>
								<img src="https://aurora.disco.re/static/common/img/ico_s_extend3_4x.png?ver=1681968257" width="12px" id="dpaf_data_list_symbol">
							</span>							
						</div>
						<div class="detail_expand_txt detail_txt_blue"></div>
					</div>
				</div>
				<div class="detail_info_body_sub" id="dpaf_data_list"></div>

				<div class="detail_margin_div"></div>
				<div class="detail_list_btn">
					<div class="detail_list_btn_sub">
						<div class="detail_list_btn_sub_txt">
							<span>주차장</span>
							<span>
								<img src="https://aurora.disco.re/static/common/img/ico_s_extend3_4x.png?ver=1681968257" width="12px" id="dpaz_data_list_symbol">
							</span>
						</div>
						<div class="detail_expand_txt detail_txt_blue"></div>
					</div>
				</div>
				<div id="dpaz_data_list">
					<div>
						<div class="detail_info_body_sub">
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">자주식</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<div class="detail_data_txt_conts_sub">
										<span>옥내</span>
										<span>옥외</span>
									</div>
									<div class="detail_data_txt_conts_sub2">
										<span id="dpaz_value_1"></span>
										<span id="dpaz_value_2"></span>
									</div>
								</div>
							</div>
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">기계식</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<div class="detail_data_txt_conts_sub">
										<span>옥내</span>
										<span>옥외</span>
									</div>
									<div class="detail_data_txt_conts_sub2">
										<span id="dpaz_value_3"></span>
										<span id="dpaz_value_4"></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="detail_margin_div"></div>
				<div class="detail_list_btn">
					<div class="detail_list_btn_sub">
						<div class="detail_list_btn_sub_txt">
							<span>승강기</span>
							<span>
								<img src="https://aurora.disco.re/static/common/img/ico_s_extend3_4x.png?ver=1681968257" width="12px" id="dpal_data_list_symbol">
							</span>
						</div>
						<div class="detail_expand_txt detail_txt_blue"></div>
					</div>
				</div>
				<div id="dpal_data_list">
					<div>
						<div class="detail_info_body_sub">
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">승용</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpal_value1"></span>
								</div>
							</div>
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">비상용</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpal_value2"></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="detail_margin_div"></div>
				<div class="detail_list_btn">
					<div class="detail_list_btn_sub">
						<div class="detail_list_btn_sub_txt">
							<span>일자정보</span>
							<span>
								<img src="https://aurora.disco.re/static/common/img/ico_s_extend3_4x.png?ver=1681968257" width="12px" id="dpad_data_list_symbol">
							</span>
						</div>
						<div class="detail_expand_txt detail_txt_blue"></div>
					</div>
				</div>
				<div id="dpad_data_list">
					<div>
						<div class="detail_info_body_sub">
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">허가일</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpad_value1"></span>
								</div>
							</div>
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">착공일</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpad_value2"></span>
								</div>
							</div>
							
							<div class="detail_info_body_sub_detail_divider"></div>
							
							<div class="detail_info_body_sub_detail">
								<div class="detail_data_txt detail_data_txt_title">사용승인일</div>
								<div class="detail_data_txt detail_data_txt_conts">
									<span id="dpad_value3"></span>
								</div>
							</div>
						</div>
					</div>
				</div>
			
			<div class="detail_info_divider"></div>
			
		</div>
		<!--//detail_wrap-->
		<!--broker_wrap-->
		<div class="broker_wrap lp_gis">
			<div class="head">
				<h2>알선받기</h2>
			</div>
			<div class="body">
				<ul class="agent-list">
					<!-- 등록하거나 알선하기한 공인중개사 목록 -->
				</ul>
				<div class="btn">
					<a href="#" class="wrap_close type1" data-lp="broker">확인</a>
				</div>
			</div>
			<a href="#" class="wrap_close" data-lp="broker">닫기</a>
		</div>
		<!--//broker_wrap-->
		<!--report_wrap-->
		<div class="report_wrap lp_gis">
			<div class="head">
				<h2>신고하기(일반)</h2>
			</div>
			<div class="body">
				<form id="frmReport" name="frmReport" method="post" onsubmit="return false">
					<input type="hidden" id="rid" name="rid" value="" />
					<h3 class="saleNo">매물번호 NO44444434</h3>
					<div class="inputBox">
						<ul>
							<li th:unless="${IS_AGENT_USER}">
								<label for="id_report1-button">해당 중개사</label>
								<div class="selectBox">
									<select id="id_report1" name="agentId">
									</select>
								</div>
							</li>
							<li>
								<label for="id_report2">신고유형</label>
								<div class="selectBox">
									<select id="id_report2" name="reportType">
										<option value="">신고 유형을 선택하세요.</option>
										<option th:each="item : ${REPORT_TYPE}" th:value="${item.cd}"
											th:text="${item.nm}">1</option>
									</select>
								</div>
							</li>
							<li>
								<label for="id_report3">기타사항</label>
								<textarea id="id_report3" name="etcMemo" placeholder="기타사항"></textarea>
							</li>
						</ul>
						<div class="btn">
							<a href="#" class="type2 wrap_close" data-lp="report">취소</a>
							<a href="#" class="type1 saveReport">신고하기</a>
						</div>
					</div>
				</form>
			</div>
			<a href="#" class="wrap_close" data-lp="report">닫기</a>
		</div>
		<!--//report_wrap-->
	</div>
	<!--//gis_layout-->
</body>

</html>